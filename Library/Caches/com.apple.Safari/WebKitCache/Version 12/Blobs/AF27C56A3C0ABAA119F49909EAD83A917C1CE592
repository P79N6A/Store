
(function($){$.jet.env.packager.domains_expeertv2_com={"host":"estatic.ccmbg.com","template":"//${host}/hayatouki.com/${type}/${packageName}?v=${timestamp}","timestamps":{"css":{"jdf_external":20190716105049,"ar":20190716105055,"horoscopeBundle":20190716105057,"privatemessage":20190716105057,"freecontent":20190716105056,"od.main":20190716105058,"od.editor":20160622144318,"od.main.amp":20190716105058,"horoscopeBundle_override":20190716105047,"privatemessage_override":20190716105046,"freecontent_override":20190716105046,"ckeditor":20190716105048,"jdf":20190716105051,"jdf_bundle":20190716105045},"js":{"jdfa":20190716105048,"jdfa.admin":20190221100000,"common":20190221100000,"action":20190221100000,"admin":20190221100000,"advertisement.js":20190221100000,"bookmark-bubble":20190221100000,"contents":20190221100000,"lazyImage":20190221100000,"contentMaternity":20190221100000,"contentRecipe":20190221100000,"contentBeauty":20190221100000,"editorial":20190221100000,"eventGa":20190221100000,"expeert.core":20190221100000,"jdf":20190221100000,"webservices":20190221100000,"jplugins":20190221100000,"moderator":20190221100000,"modules":20190221100000,"searchEngineSort":20190221100000,"picturefill":20190221100000,"cropAvatar":20190221100000,"editCertifiedAccountImage":20190221100000,"editGroupImage":20190221100000,"downloadredirect":20190221100000,"start":20190221100000,"login":20190221100000,"od.tab":20190221100000,"od.comments":20190221100000,"od.mainsearch":20190221100000,"od.datafinder.rankedlist":20190221100000,"od.datafinder.rankedlistsplitted":20190221100000,"od.insitu":20190221100000,"od.editor":20190221100000,"od.map":20190221100000,"horoscopeBundle":20190524110807,"privatemessage":20190221100000,"freecontent":20190524110751}}};}(jQuery));(function($){$.loading={defaultOptions:{padding:10,label:'LOADING',speedFadeIn:'slow',speedFadeOut:'slow',template:'<div id="loading"></div>',dataName:'loadingNode',timeout:100,css:{opacity:1,backgroundColor:'none',backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',zindex:1000}}};$.fn.loading=function(action,config,dimension,handler){action=action||'on';config=config||{};dimension=dimension||null;handler=handler||function(){};config=$.extend(true,{},$.loading.defaultOptions,config);var $lastNode=this;this.each(function(){var $this=$(this),position,isInit=typeof $this.data(config.dataName)!='undefined',data=(isInit?$this.data(config.dataName):{$loading:$(config.template).appendTo($this),counter:[]});switch(action.toLowerCase()){case'on':$.profile&&console.time('loading.on : '+config.label);position=$this.position();data.$spin=data.$loading.css($.extend({height:$this.height()+config.padding,width:$this.width()+config.padding,position:'absolute',top:position.top-(config.padding/2),left:position.left-(config.padding/2)},config.css)).fadeIn(config.speedFadeIn).spin();data.counter++;$lastNode=data.$loading;$.profile&&console.timeEnd('loading.on : '+config.label);break;case'update':$.profile&&console.time('loading.update');if(dimension!==null)
{var paramAnim={};if(typeof dimension.diffWidth!='undefined'){paramAnim.width=(dimension.diffWidth>0?"+="+(dimension.diffWidth+config.padding)+"px":"-="+-(dimension.diffWidth+config.padding)+"px");}
if(typeof dimension.diffHeight!='undefined'){paramAnim.height=(dimension.diffHeight>0?"+="+(dimension.diffHeight+config.padding)+"px":"-="+-(dimension.diffHeight+config.padding)+"px");}
$lastNode=data.$loading.animate(paramAnim,{complete:handler});}
$.profile&&console.timeEnd('loading.update');break;case'off':$.profile&&console.time('loading.off'),console.time('loading.offTimeout');data.counter--;data.counter<0&&console.warn('haven\'t you missed something ? (off before on)');setTimeout(function(){data.counter===0&&data.$loading.fadeOut(config.speedFadeOut).spin();$.profile&&console.timeEnd('loading.offTimeout');},config.timeout);$.profile&&console.timeEnd('loading.off');break;}
$this.data(config.dataName,data);});return $lastNode;};})(jQuery);(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
if(s[prop]!==undefined)return prop
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'auto',left:'auto',position:'relative'}
function Spinner(o){if(typeof this=='undefined')return new Spinner(o)
this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width,ep,tp
if(target){target.insertBefore(el,target.firstChild||null)
tp=pos(target)
ep=pos(el)
css(el,{left:(o.left=='auto'?tp.x-ep.x+(target.offsetWidth>>1):parseInt(o.left,10)+mid)+'px',top:(o.top=='auto'?tp.y-ep.y+(target.offsetHeight>>1):parseInt(o.top,10)+mid)+'px'})}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(o.color,'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:o.color,opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));(function($){$.spin={defaultConfig:{lines:12,length:10,width:4,radius:10,color:'#000',speed:1.0,trail:50,shadow:false}};$.fn.spin=function(opts){opts=$.extend({},$.spin.defaultConfig,opts);this.each(function(){var $this=$(this),data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner;return $this;}
if(opts!==false){data.spinner=new Spinner($.extend({color:$this.css('color')},opts)).spin(this);$.core.$fake[0]=data.spinner.el;$.core.$fake.css({zIndex:1000});}});return $.core.$fake;};})(jQuery);(function($){var history_handle_top,timer;var body;var jwindow;$.extend({pnotify_remove_all:function(){var body_data=body.data("pnotify");if(body_data&&body_data.length){$.each(body_data,function(){if(this.pnotify_remove)
this.pnotify_remove();});}},pnotify_position_all:function(){if(timer)
clearTimeout(timer);timer=null;try{var body_data=body.data("pnotify");}
catch(e){return;}
if(!body_data||!body_data.length)
return;$.each(body_data,function(){var s=this.opts.pnotify_stack;if(!s)return;if(!s.nextpos1)
s.nextpos1=s.firstpos1;if(!s.nextpos2)
s.nextpos2=s.firstpos2;if(!s.addpos2)
s.addpos2=0;if(this.css("display")!="none"){var curpos1,curpos2;var animate={};var csspos1;switch(s.dir1){case"down":csspos1="top";break;case"up":csspos1="bottom";break;case"left":csspos1="right";break;case"right":csspos1="left";break;}
curpos1=parseInt(this.css(csspos1));if(isNaN(curpos1))
curpos1=0;if(typeof s.firstpos1=="undefined"){s.firstpos1=curpos1;s.nextpos1=s.firstpos1;}
var csspos2;switch(s.dir2){case"down":csspos2="top";break;case"up":csspos2="bottom";break;case"left":csspos2="right";break;case"right":csspos2="left";break;}
curpos2=parseInt(this.css(csspos2));if(isNaN(curpos2))
curpos2=0;if(typeof s.firstpos2=="undefined"){s.firstpos2=curpos2;s.nextpos2=s.firstpos2;}
if((s.dir1=="down"&&s.nextpos1+this.height()>jwindow.height())||(s.dir1=="up"&&s.nextpos1+this.height()>jwindow.height())||(s.dir1=="left"&&s.nextpos1+this.width()>jwindow.width())||(s.dir1=="right"&&s.nextpos1+this.width()>jwindow.width())){s.nextpos1=s.firstpos1;s.nextpos2+=s.addpos2+10;s.addpos2=0;}
if(s.animation&&s.nextpos2<curpos2){switch(s.dir2){case"down":animate.top=s.nextpos2+"px";break;case"up":animate.bottom=s.nextpos2+"px";break;case"left":animate.right=s.nextpos2+"px";break;case"right":animate.left=s.nextpos2+"px";break;}}else
this.css(csspos2,s.nextpos2+"px");switch(s.dir2){case"down":case"up":if(this.outerHeight(true)>s.addpos2)
s.addpos2=this.height();break;case"left":case"right":if(this.outerWidth(true)>s.addpos2)
s.addpos2=this.width();break;}
if(typeof s.nextpos1==="number"){if(s.animation&&(curpos1>s.nextpos1||animate.top||animate.bottom||animate.right||animate.left)){switch(s.dir1){case"down":animate.top=s.nextpos1+"px";break;case"up":animate.bottom=s.nextpos1+"px";break;case"left":animate.right=s.nextpos1+"px";break;case"right":animate.left=s.nextpos1+"px";break;}}else
this.css(csspos1,s.nextpos1+"px");}
if(animate.top||animate.bottom||animate.right||animate.left)
this.animate(animate,{duration:500,queue:false});switch(s.dir1){case"down":case"up":s.nextpos1+=this.height()+10;break;case"left":case"right":s.nextpos1+=this.width()+10;break;}}});$.each(body_data,function(){var s=this.opts.pnotify_stack;if(!s)return;s.nextpos1=s.firstpos1;s.nextpos2=s.firstpos2;s.addpos2=0;s.animation=true;});},pnotify:function(options){if(!body)
body=$("body");if(!jwindow)
jwindow=$(window);var animating;var opts;if(typeof options!="object"){opts=$.extend({},$.pnotify.defaults);opts.pnotify_text=options;}else{opts=$.extend({},$.pnotify.defaults,options);}
if(opts.pnotify_before_init){if(opts.pnotify_before_init(opts)===false)
return null;}
var nonblock_last_elem;var nonblock_pass=function(e,e_name){pnotify.css("display","none");var element_below=document.elementFromPoint(e.clientX,e.clientY);pnotify.css("display","block");var jelement_below=$(element_below);var cursor_style=jelement_below.css("cursor");pnotify.css("cursor",cursor_style!="auto"?cursor_style:"default");if(!nonblock_last_elem||nonblock_last_elem.get(0)!=element_below){if(nonblock_last_elem){dom_event.call(nonblock_last_elem.get(0),"mouseleave",e.originalEvent);dom_event.call(nonblock_last_elem.get(0),"mouseout",e.originalEvent);}
dom_event.call(element_below,"mouseenter",e.originalEvent);dom_event.call(element_below,"mouseover",e.originalEvent);}
dom_event.call(element_below,e_name,e.originalEvent);nonblock_last_elem=jelement_below;};var pnotify=$("<div />",{"class":"ui-pnotify "+opts.pnotify_addclass,"css":{"display":"none"},"mouseenter":function(e){if(opts.pnotify_nonblock)e.stopPropagation();if(opts.pnotify_mouse_reset&&animating=="out"){pnotify.stop(true);animating="in";pnotify.css("height","auto").animate({"width":opts.pnotify_width,"opacity":opts.pnotify_nonblock?opts.pnotify_nonblock_opacity:opts.pnotify_opacity},"fast");}
if(opts.pnotify_nonblock){pnotify.animate({"opacity":opts.pnotify_nonblock_opacity},"fast");}
if(opts.pnotify_hide&&opts.pnotify_mouse_reset)pnotify.pnotify_cancel_remove();if(opts.pnotify_closer&&!opts.pnotify_nonblock)pnotify.closer.show();},"mouseleave":function(e){if(opts.pnotify_nonblock)e.stopPropagation();nonblock_last_elem=null;pnotify.css("cursor","auto");if(opts.pnotify_nonblock&&animating!="out")
pnotify.animate({"opacity":opts.pnotify_opacity},"fast");if(opts.pnotify_hide&&opts.pnotify_mouse_reset)pnotify.pnotify_queue_remove();pnotify.closer.hide();$.pnotify_position_all();},"mouseover":function(e){if(opts.pnotify_nonblock)e.stopPropagation();},"mouseout":function(e){if(opts.pnotify_nonblock)e.stopPropagation();},"mousemove":function(e){if(opts.pnotify_nonblock){e.stopPropagation();nonblock_pass(e,"onmousemove");}},"mousedown":function(e){if(opts.pnotify_nonblock){e.stopPropagation();e.preventDefault();nonblock_pass(e,"onmousedown");}},"mouseup":function(e){if(opts.pnotify_nonblock){e.stopPropagation();e.preventDefault();nonblock_pass(e,"onmouseup");}},"click":function(e){if(opts.pnotify_nonblock){e.stopPropagation();nonblock_pass(e,"onclick");}},"dblclick":function(e){if(opts.pnotify_nonblock){e.stopPropagation();nonblock_pass(e,"ondblclick");}}});pnotify.opts=opts;if(opts.pnotify_shadow&&!$.browser.msie)
pnotify.shadow_container=$("<div />",{"class":"ui-widget-shadow ui-corner-all ui-pnotify-shadow"}).prependTo(pnotify);pnotify.container=$("<div />",{"class":"ui-widget ui-widget-content ui-corner-all ui-pnotify-container "+(opts.pnotify_type=="error"?"ui-state-error":"ui-state-highlight")}).appendTo(pnotify);pnotify.pnotify_version="1.0.1";pnotify.pnotify=function(options){var old_opts=opts;if(typeof options=="string")
opts.pnotify_text=options;else
opts=$.extend({},opts,options);pnotify.opts=opts;if(opts.pnotify_shadow!=old_opts.pnotify_shadow){if(opts.pnotify_shadow&&!$.browser.msie)
pnotify.shadow_container=$("<div />",{"class":"ui-widget-shadow ui-pnotify-shadow"}).prependTo(pnotify);else
pnotify.children(".ui-pnotify-shadow").remove();}
if(opts.pnotify_addclass===false)
pnotify.removeClass(old_opts.pnotify_addclass);else if(opts.pnotify_addclass!==old_opts.pnotify_addclass)
pnotify.removeClass(old_opts.pnotify_addclass).addClass(opts.pnotify_addclass);if(opts.pnotify_title===false)
pnotify.title_container.hide("fast");else if(opts.pnotify_title!==old_opts.pnotify_title)
pnotify.title_container.html(opts.pnotify_title).show(200);if(opts.pnotify_text===false){pnotify.text_container.hide("fast");}else if(opts.pnotify_text!==old_opts.pnotify_text){if(opts.pnotify_insert_brs)
opts.pnotify_text=opts.pnotify_text.replace(/\n/g,"<br />");pnotify.text_container.html(opts.pnotify_text).show(200);}
pnotify.pnotify_history=opts.pnotify_history;if(opts.pnotify_type!=old_opts.pnotify_type)
pnotify.container.toggleClass("ui-state-error ui-state-highlight");if((opts.pnotify_notice_icon!=old_opts.pnotify_notice_icon&&opts.pnotify_type=="notice")||(opts.pnotify_error_icon!=old_opts.pnotify_error_icon&&opts.pnotify_type=="error")||(opts.pnotify_type!=old_opts.pnotify_type)){pnotify.container.find("div.ui-pnotify-icon").remove();if((opts.pnotify_error_icon&&opts.pnotify_type=="error")||(opts.pnotify_notice_icon)){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":opts.pnotify_type=="error"?opts.pnotify_error_icon:opts.pnotify_notice_icon})).prependTo(pnotify.container);}}
if(opts.pnotify_width!==old_opts.pnotify_width)
pnotify.animate({width:opts.pnotify_width});if(opts.pnotify_min_height!==old_opts.pnotify_min_height)
pnotify.container.animate({minHeight:opts.pnotify_min_height});if(opts.pnotify_opacity!==old_opts.pnotify_opacity)
pnotify.fadeTo(opts.pnotify_animate_speed,opts.pnotify_opacity);if(!opts.pnotify_hide)
pnotify.pnotify_cancel_remove();else if(!old_opts.pnotify_hide)
pnotify.pnotify_queue_remove();pnotify.pnotify_queue_position();return pnotify;};pnotify.pnotify_queue_position=function(){if(timer)
clearTimeout(timer);timer=setTimeout($.pnotify_position_all,10);};pnotify.pnotify_display=function(){if(!pnotify.parent().length)
pnotify.appendTo(body);if(opts.pnotify_before_open){if(opts.pnotify_before_open(pnotify)===false)
return;}
pnotify.pnotify_queue_position();if(opts.pnotify_animation=="fade"||opts.pnotify_animation.effect_in=="fade"){pnotify.show().fadeTo(0,0).hide();}else{if(opts.pnotify_opacity!=1)
pnotify.show().fadeTo(0,opts.pnotify_opacity).hide();}
pnotify.animate_in(function(){if(opts.pnotify_after_open)
opts.pnotify_after_open(pnotify);pnotify.pnotify_queue_position();if(opts.pnotify_hide)
pnotify.pnotify_queue_remove();});};pnotify.pnotify_remove=function(){if(pnotify.timer){window.clearTimeout(pnotify.timer);pnotify.timer=null;}
if(opts.pnotify_before_close){if(opts.pnotify_before_close(pnotify)===false)
return;}
pnotify.animate_out(function(){if(opts.pnotify_after_close){if(opts.pnotify_after_close(pnotify)===false)
return;}
pnotify.pnotify_queue_position();if(opts.pnotify_remove)
pnotify.detach();});};pnotify.animate_in=function(callback){animating="in";var animation;if(typeof opts.pnotify_animation.effect_in!="undefined")
animation=opts.pnotify_animation.effect_in;else
animation=opts.pnotify_animation;if(animation=="none"){pnotify.show();callback();}else if(animation=="show")
pnotify.show(opts.pnotify_animate_speed,callback);else if(animation=="fade")
pnotify.show().fadeTo(opts.pnotify_animate_speed,opts.pnotify_opacity,callback);else if(animation=="slide")
pnotify.slideDown(opts.pnotify_animate_speed,callback);else if(typeof animation=="function")
animation("in",callback,pnotify);else if(pnotify.effect)
pnotify.effect(animation,{},opts.pnotify_animate_speed,callback);};pnotify.animate_out=function(callback){animating="out";var animation;if(typeof opts.pnotify_animation.effect_out!="undefined")
animation=opts.pnotify_animation.effect_out;else
animation=opts.pnotify_animation;if(animation=="none"){pnotify.hide();callback();}else if(animation=="show")
pnotify.hide(opts.pnotify_animate_speed,callback);else if(animation=="fade")
pnotify.fadeOut(opts.pnotify_animate_speed,callback);else if(animation=="slide")
pnotify.slideUp(opts.pnotify_animate_speed,callback);else if(typeof animation=="function")
animation("out",callback,pnotify);else if(pnotify.effect)
pnotify.effect(animation,{},opts.pnotify_animate_speed,callback);};pnotify.pnotify_cancel_remove=function(){if(pnotify.timer)
window.clearTimeout(pnotify.timer);};pnotify.pnotify_queue_remove=function(){pnotify.pnotify_cancel_remove();pnotify.timer=window.setTimeout(function(){pnotify.pnotify_remove();},(isNaN(opts.pnotify_delay)?0:opts.pnotify_delay));};pnotify.closer=$("<div />",{"class":"ui-pnotify-closer","css":{"cursor":"pointer","display":"none"},"click":function(){pnotify.pnotify_remove();pnotify.closer.hide();}}).append($("<span />",{"class":"ui-icon ui-icon-circle-close"})).appendTo(pnotify.container);if((opts.pnotify_error_icon&&opts.pnotify_type=="error")||(opts.pnotify_notice_icon)){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":opts.pnotify_type=="error"?opts.pnotify_error_icon:opts.pnotify_notice_icon})).appendTo(pnotify.container);}
pnotify.title_container=$("<div />",{"class":"ui-pnotify-title","html":opts.pnotify_title}).appendTo(pnotify.container);if(opts.pnotify_title===false)
pnotify.title_container.hide();if(opts.pnotify_insert_brs&&typeof opts.pnotify_text=="string")
opts.pnotify_text=opts.pnotify_text.replace(/\n/g,"<br />");pnotify.text_container=$("<div />",{"class":"ui-pnotify-text","html":opts.pnotify_text}).appendTo(pnotify.container);if(opts.pnotify_text===false)
pnotify.text_container.hide();if(typeof opts.pnotify_width=="string")
pnotify.css("width",opts.pnotify_width);if(typeof opts.pnotify_min_height=="string")
pnotify.container.css("min-height",opts.pnotify_min_height);pnotify.pnotify_history=opts.pnotify_history;var body_data=body.data("pnotify");if(body_data==null||typeof body_data!="object")
body_data=[];if(opts.pnotify_stack.push=="top")
body_data=$.merge([pnotify],body_data);else
body_data=$.merge(body_data,[pnotify]);body.data("pnotify",body_data);if(opts.pnotify_after_init)
opts.pnotify_after_init(pnotify);if(opts.pnotify_history){var body_history=body.data("pnotify_history");if(typeof body_history=="undefined"){body_history=$("<div />",{"class":"ui-pnotify-history-container ui-state-default ui-corner-bottom","mouseleave":function(){body_history.animate({top:"-"+history_handle_top+"px"},{duration:100,queue:false});}}).append($("<div />",{"class":"ui-pnotify-history-header","text":"Redisplay"})).append($("<button />",{"class":"ui-pnotify-history-all ui-state-default ui-corner-all","text":"All","mouseenter":function(){$(this).addClass("ui-state-hover");},"mouseleave":function(){$(this).removeClass("ui-state-hover");},"click":function(){$.each(body_data,function(){if(this.pnotify_history&&this.pnotify_display)
this.pnotify_display();});return false;}})).append($("<button />",{"class":"ui-pnotify-history-last ui-state-default ui-corner-all","text":"Last","mouseenter":function(){$(this).addClass("ui-state-hover");},"mouseleave":function(){$(this).removeClass("ui-state-hover");},"click":function(){var i=1;while(!body_data[body_data.length-i]||!body_data[body_data.length-i].pnotify_history||body_data[body_data.length-i].is(":visible")){if(body_data.length-i===0)
return false;i++;}
var n=body_data[body_data.length-i];if(n.pnotify_display)
n.pnotify_display();return false;}})).appendTo(body);var handle=$("<span />",{"class":"ui-pnotify-history-pulldown ui-icon ui-icon-grip-dotted-horizontal","mouseenter":function(){body_history.animate({top:"0"},{duration:100,queue:false});}}).appendTo(body_history);history_handle_top=handle.offset().top+2;body_history.css({top:"-"+history_handle_top+"px"});body.data("pnotify_history",body_history);}}
opts.pnotify_stack.animation=false;pnotify.pnotify_display();return pnotify;}});var re_on=/^on/;var re_mouse_events=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/;var re_ui_events=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/;var re_html_events=/^(scroll|resize|(un)?load|abort|error)$/;var dom_event=function(e,orig_e){var event_object;e=e.toLowerCase();if(document.createEvent&&this.dispatchEvent){e=e.replace(re_on,'');if(e.match(re_mouse_events)){$(this).offset();event_object=document.createEvent("MouseEvents");event_object.initMouseEvent(e,orig_e.bubbles,orig_e.cancelable,orig_e.view,orig_e.detail,orig_e.screenX,orig_e.screenY,orig_e.clientX,orig_e.clientY,orig_e.ctrlKey,orig_e.altKey,orig_e.shiftKey,orig_e.metaKey,orig_e.button,orig_e.relatedTarget);}else if(e.match(re_ui_events)){event_object=document.createEvent("UIEvents");event_object.initUIEvent(e,orig_e.bubbles,orig_e.cancelable,orig_e.view,orig_e.detail);}else if(e.match(re_html_events)){event_object=document.createEvent("HTMLEvents");event_object.initEvent(e,orig_e.bubbles,orig_e.cancelable);}
if(!event_object)return;this.dispatchEvent(event_object);}else{if(!e.match(re_on))e="on"+e;event_object=document.createEventObject(orig_e);this.fireEvent(e,event_object);}};$.pnotify.defaults={pnotify_title:false,pnotify_text:false,pnotify_addclass:"",pnotify_nonblock:false,pnotify_nonblock_opacity:.2,pnotify_history:true,pnotify_width:"300px",pnotify_min_height:"16px",pnotify_type:"notice",pnotify_notice_icon:"ui-icon ui-icon-info",pnotify_error_icon:"ui-icon ui-icon-alert",pnotify_animation:"fade",pnotify_animate_speed:"slow",pnotify_opacity:1,pnotify_shadow:false,pnotify_closer:true,pnotify_hide:true,pnotify_delay:8000,pnotify_mouse_reset:true,pnotify_remove:true,pnotify_insert_brs:true,pnotify_stack:{"dir1":"down","dir2":"left","push":"bottom"}};})(jQuery);(function($){$.jet.services.ajaxStartNote={start:false,options:{label:'loading...',closeable:false,show:function(){return true;}},init:function(){var $node={},self=this;$(document).ajaxStart(function(){if(!$.ajaxSettings.discrete&&self.options.show.call(this,arguments))
{typeof $node.remove=='function'&&$node.remove();$node=$.note.flash(self.options.label,self.options);}
$.ajaxSettings.discrete=false;}).ajaxStop(function(){typeof $node.remove=='function'&&$node.remove();});}};$.note={defaultOptions:{title:false,type:'info',delay:5000,onClose:function(){},ghost:false,hide:true,closeable:true,classes:'',width:50},note:function(note,options)
{$.pnotify.defaults.pnotify_stack.firstpos1=0;$.pnotify.defaults.pnotify_stack.firstpos2=0;options=$.extend({},this.defaultOptions,options);var opt={pnotify_text:note,pnotify_title:options.title,pnotify_history:false,pnotify_type:(function(){switch(options.type){case'warn':return'error';default:return'notice';}})(),pnotify_nonblock:options.ghost,pnotify_before_close:options.onClose,pnotify_delay:options.delay,pnotify_hide:options.hide,pnotify_addclass:options.classes,pnotify_width:options.width,pnotify_closer:options.closeable};$.inArray(options.type,['warn','stick'])!==-1&&(opt.pnotify_stack={animation:true,dir1:'up',dir2:'left',firstpos1:15,firstpos2:5,nextpos1:15,nextpos2:5,push:'bottom'});options.type=='flash'&&(opt.pnotify_stack={animation:true,dir1:'down',dir2:'right',firstpos1:50,firstpos2:5,nextpos1:50,nextpos2:5,push:'bottom'});return $.pnotify(opt);},info:function(note,options)
{return this.note(note,$.extend(options,{type:'info'}));},warn:function(note,options)
{return this.note(note,$.extend({hide:false,classes:'warn'},options,{type:'warn'}));},stick:function(note,options)
{return this.note(note,$.extend({hide:false,classes:'stick',closeable:true},options,{type:'stick'}));},flash:function(note,options)
{return this.note(note,$.extend({hide:false,classes:'flash',closeable:false},options,{type:'flash'}));}};$.note.log=$.note.info;$.note.error=$.note.warn;})(jQuery);(function($)
{$.counter={defaultOptions:{speed:250,countSpeed:25,from:null,value:'incr',limit:{min:null,max:null},limitState:{min:false,max:false},getValue:function()
{match=this.html().match(/[^\d]*(\d+)[^\d]*/);if(match!==null&&match.length>1)
{return parseInt(match[1]);}
return 0;},onLimit:null,afterChange:function(valueBefore,valueAfter,options)
{options.onLimit&&(options.limitState.min||options.limitState.max)&&options.onLimit.apply(this,[valueBefore,valueAfter,options]);$.core.$fake[0]=this;$.core.$fake.effect('pulsate',{times:2},options.speed);},beforeChange:function(valueBefore,valueAfter,options)
{var $this=$(this);if(options.from!==null)
{var $from=$(options.from);if($from.length===0||$from.length>1)
{console.warn('From is empty or contain more than one node so it can\'t be executed correctly');}
else{$from.effect('transfer',{to:$this,className:"ui-effects-transfer"},options.speed,function()
{$this.trigger('doChange',[valueBefore,valueAfter,options]);});}}
else{$this.trigger('doChange',[valueBefore,valueAfter,options]);}}},doChange:function(e,valueBefore,valueAfter,options)
{e.stopPropagation();var
$this=$(this),html=$this.html(),self=this,value=valueBefore,labelSingle=$this.attr('data-label-single'),labelMulti=$this.attr('data-label-multi'),changeValue=function()
{if(value!=valueAfter)
{value=(valueAfter>value?value+1:value-1);$this.data('counterValue',value);if(labelSingle&&labelMulti)
{$this.html(value>1?value+' '+labelMulti:value+' '+labelSingle);}
else{$this.html(html.replace(/\d+/,value));}
if(value!=valueAfter)
{return setTimeout(changeValue,options.countSpeed);}
options.afterChange.apply(self,[valueBefore,valueAfter,options]);}
$this.trigger('counterChanged',[valueBefore,valueAfter,options]);};changeValue();},beforeChange:function(e,options)
{e.stopPropagation();options.limitState={min:false,max:false};$.core.$fake[0]=this;options=$.extend({},$.core.$fake.data('counterOptions'),options);var valueBefore=options.getValue.apply($.core.$fake),valueAfter;if(typeof valueBefore=='number'&&!isNaN(valueBefore))
{valueAfter=(function(){switch(options.value)
{case'incr':case'+1':case'++':return valueBefore+1;case'decr':case'--':case'-1':return valueBefore-1;default:return options.value;}})();options.limit.min!==null&&valueAfter<=options.limit.min&&(valueAfter=options.limit.min,options.limitState.min=true);options.limit.max!==null&&valueAfter>=options.limit.max&&(valueAfter=options.limit.max,options.limitState.max=true);}
options.beforeChange.apply(this,[valueBefore,valueAfter,options]);}};$.fn.counter=function(options)
{options=$.extend({},$.counter.defaultOptions,options);return this.data('counterOptions',options).bind('counterChange',$.counter.beforeChange).bind('doChange',$.counter.doChange).each(function(){$.core.$fake[0]=this;$.core.$fake.data('counterValue',options.getValue.apply($.core.$fake));});};$.fn.counterValue=function()
{return this.first().data('counterValue');};})(jQuery);(function($){$.ccmUIEvent={defaultOptions:{noteOptions:{text:false,type:'info',delay:5000},counterOptions:{to:null,from:null,value:'incr'},redirectOptions:{url:null,delay:5000}},readEvent:function(name,options)
{options=$.extend(true,{},$.ccmUIEvent.defaultOptions,options);options.noteOptions.text!==false&&$.note.note(options.noteOptions.text,options.noteOptions);options.counterOptions.to!==null&&$(options.counterOptions.to).trigger('counterChange',[options.counterOptions]);options.redirectOptions.url!==null&&setTimeout(function()
{window.location=options.redirectOptions.url;},options.redirectOptions.delay);$.profile&&console.log('ccmUIEvent',name,options);},readFromData:function()
{if(typeof $data!='undefined'&&typeof $data.ccmUIEvent!='undefined')
{for(var i in $data.ccmUIEvent)
{$data.ccmUIEvent.hasOwnProperty(i)&&$.ccmUIEvent.readEvent(i,$data.ccmUIEvent[i]);}}},start:function(){$.ccmUIEvent.readFromData();}};$(document).bind('ccmUIEvent',function(e,name,options)
{(!name||!options)&&(console.error('you need to specify a name and options when you fire a ccmUIEvent.'));$.ccmUIEvent.readEvent(name,options);}).ready(function(){setTimeout($.ccmUIEvent.start,250);});})(jQuery);(function($)
{typeof $.jet=='undefined'&&($.jet={services:{}});var $nodeCancel={};$.jet.facebook={utils:{reload:{mobile:function(){window.location=window.location.href+(window.location.href.indexOf('?')==-1?'?1':'&1');},desktop:function(){location.reload(true);}}},init:function()
{$.jet.facebook.microTemplateInit();var optionsInit={appId:$.jet.facebook.options.appId,status:true,cookie:true,xfbml:true,oauth:true};if(typeof $.jet.facebook.options.version!=='undefined'||$.jet.facebook.options.version!==null){optionsInit.version=$.jet.facebook.options.version;}
FB.init(optionsInit);$.jet.facebook.verifHashTag();FB.Event.subscribe('comment.create',$.jet.facebook.options.commentCreateListener);FB.Event.subscribe('comment.remove',$.jet.facebook.options.commentRemoveListener);$.jet.facebook.options.GATrack=$.jet.facebook.options.GATrack&&(typeof $.jet.facebook.options.GAName!='undefined')&&(typeof $.jet.facebook.options.GANameError!='undefined')&&(typeof $.jet.facebook.options.GANameTmp!='undefined');$('body').delegate($.jet.facebook.options.separateSelector,'click',function(e)
{$.jet.facebook.separateAccount.call(this,{defineRights:true,hideShowDiv:true});}).delegate($.jet.facebook.options.associateSelector,'click',function(e)
{$.jet.facebook.associateAccount.call(this,{defineRights:true,hideShowDiv:true});}).delegate($.jet.facebook.options.createSelector,'click',$.jet.facebook.createAccount).delegate($.jet.facebook.options.cancelActionSelector,'click',$.jet.facebook.cancelOGAction);$(document).delegate($.jet.facebook.options.updateOGRights,'click',$.jet.facebook.updateOGRights).bind('FBOpenGraphSend',function(e,actions,object,id,options)
{$.jet.facebook.actionAfterOpenGraph(e,actions,object,id,options);}).trigger('jet.services.facebook.init');$.jet.facebook.delayUnBuffer();FB.Event.subscribe('auth.authResponseChange',function(response){if(response.status=='connected'&&$.jet.facebook.options.subServices)
{var i;for(i in $.jet.facebook.subServices)
{if($.jet.facebook.subServices.hasOwnProperty(i))
{$.jet.facebook.subServices[i].init.call($.jet.facebook);}}}});},options:{separateSelector:'a.separateAccount',associateSelector:'.associateAccount',createSelector:'a.createAccount',cancelActionSelector:'a.cancelFBAction',updateOGRights:'input[type=checkbox].oGRights',scopeList:'email, user_birthday, user_hometown, publish_actions, user_likes',GAName:$data.common.api.facebook.ga_name,GANameError:$data.common.api.facebook.ga_name_error,GANameTmp:$data.common.api.facebook.ga_name_tmp,GATrack:(typeof _gaq!='undefined'||typeof ga!='undefined'),apiController:'/apifacebook',notifications:$data.common.api.facebook.notifications,uidLinked:$data.common.api.facebook.uid,appId:$data.common.api.facebook.app_id,appName:$data.common.api.facebook.application,userConnected:$data.common.connected,urlPreference:'/p/edit/?type=privacy',statusCodePage:$data.common.status_code,reloadFunction:function(){},commentCreateListener:function(){},commentRemoveListener:function(){},version:typeof $data.common.api.facebook.version!='undefined'?$data.common.api.facebook.version:null},updateOGRights:function()
{var $this=$(this),idAction=$this.attr('data-id'),posAction=$this.attr('data-pos'),value=$this.prop('checked');if(typeof idAction!='undefined')
{$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_updateBinaryRights',data:({'xhr':'xhr','binary':idAction,'pos':posAction,'value':value}),success:function(response)
{$.note.info($.jet.facebook.getTemplate($.jet.facebook.langs[$.jet.facebook.lang].FACEBOOK_OG_RIGHTS_UPDATE),{delay:5000});},complete:function()
{$(document).trigger('ajaxFacebookStop');}});}},cancelOGAction:function()
{var idAction=$(this).attr('data-id');if(typeof idAction!='undefined')
{$.jet.facebook.deleteOpenGraph(idAction,{'callback':function()
{!$.isEmptyObject($nodeCancel)&&$nodeCancel.find('div.ui-pnotify-text').html($.jet.facebook.getTemplate($.jet.facebook.langs[$.jet.facebook.lang].FACEBOOK_ACTION_DONE_MANAGE_RULES,$.extend({},{urlPreference:$.jet.facebook.options.urlPreference})));}});}
else{!$.isEmptyObject($nodeCancel)&&$nodeCancel.remove();}},actionAfterOpenGraph:function(event,action,object,id,options)
{if(typeof options.binary!='undefined'&&($.jet.facebook.options.notifications==0||($.jet.facebook.options.notifications&options.binary)==0))
{$(document).trigger('ajaxFacebookStart',['actionAfterOpenGraph',action,object,id,options]);$.ajax($.extend({params:{idAction:id}},$.jet.facebook.actionAfterOpenGraph.ajaxOptions,{type:'post',dataType:'json',data:{xhr:'xhr',binary:options.binary},complete:function()
{$(document).trigger('ajaxFacebookStop');}}));}},openGraph:function(action,params,object,options)
{var OGAction=function(action,params,object,authToken,options)
{options=options||{};var $nodeOG=$.note.flash($.jet.facebook.langs[$data.common.lang.toUpperCase()].FACEBOOK_CONNECT);$(document).trigger('ajaxFacebookStart',['openGraph',action,params,object,authToken,options]);$.ajax($.extend({params:{action:action,object:object,options:options}},$.jet.facebook.openGraph.ajaxOptions,{type:'POST',url:'https://graph.facebook.com/me/'+(options.application?options.application:$data.common.api.facebook.application+':')+action,dataType:'json',data:$.extend(params,{access_token:authToken}),complete:function()
{$nodeOG.remove();typeof options.callback=='function'&&options.callback();$(document).trigger('ajaxFacebookStop');}}));};if($.jet.facebook.options.uidLinked!=0)
{FB.getLoginStatus(function(response)
{response.status=='connected'&&response.authResponse.userID==$.jet.facebook.options.uidLinked&&OGAction(action,params,object,response.authResponse.accessToken,options);});}},deleteOpenGraph:function(id,options)
{var OGAction=function(id,options)
{options=options||{};$(document).trigger('ajaxFacebookStart',['deleteOpenGraph',id,options]);FB.api(id,'delete',function(response)
{if(response&&!response.error&&typeof options.callback=='function')
{options.callback();}
!$.isEmptyObject($nodeCancel)&&$nodeCancel.remove();$(document).trigger('ajaxFacebookStop');});};if($.jet.facebook.options.uidLinked!=0)
{FB.getLoginStatus(function(response)
{response.status=='connected'&&response.authResponse.userID==$.jet.facebook.options.uidLinked&&OGAction(id,options);});}},verifHashTag:function()
{if(window.location.hash&&window.location.hash.substring(1,13)=='access_token')
{$.jet.facebook.login();}},createAccount:function()
{$(document).trigger('ajaxFacebookStart',['createAccount']);$.ajax($.extend({},$.jet.facebook.createAccount.ajaxOptions,{type:'post',dataType:'json',success:function(response)
{$.jet.facebook.options.uidLinked=response.uid;var callback=function()
{$(document).trigger('ajaxStart');$.jet.facebook.options.reloadFunction();};if(typeof response.FBdata!=='undefined')
{$(document).trigger('FBaccountCreated',[response.FBdata,callback]);}else{callback();}},complete:function()
{$(document).trigger('ajaxFacebookStop');}}));},separateAccount:function(options)
{var $actionFacebook=$('.actionFacebook');$(document).trigger('ajaxFacebookStart',['separateAccount',options]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_separateAccount',data:({xhr:'xhr'}),complete:function()
{$(document).trigger('ajaxFacebookStop');},success:function(response)
{$.jet.facebook.options.uidLinked=0;if(typeof options.hideShowDiv!='undefined')
{$actionFacebook.find('.FBAccountOn').hide();$actionFacebook.find('.FBAccountOff').show();}
if(typeof options.defineRights!='undefined')
{$actionFacebook.closest('fieldset').find('div.actionFBList').hide();}
$(document).trigger('ajaxFacebookStop');FB.logout(function()
{typeof options.callback=='function'&&options.callback()});}});},autoConnect:function()
{if($.jet.facebook.options.statusCodePage=='200'&&$.jet.facebook.options.userConnected==false)
{FB.getLoginStatus(function(response)
{if(response.status==='connected')
{$(document).trigger('ajaxFacebookStart',['autoConnect',response]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_autoConnect',data:({token:response.authResponse.accessToken,uid:response.authResponse.userID,xhr:'xhr'}),success:function(response)
{if(typeof response.autoconnect!='undefined'&&response.autoconnect)
{$.note.flash($.jet.facebook.langs[$data.common.lang.toUpperCase()].FACEBOOK_AUTOCONNECT);$.jet.facebook.options.reloadFunction();}},complete:function()
{$(document).trigger('ajaxFacebookStop');}});}});}},associateAccount:function(options)
{var $actionFacebook=$('.actionFacebook'),actionJs=function(token,uid)
{$(document).trigger('ajaxFacebookStart',['associateAccount',token,uid]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_associateAccount',data:({token:token,uid:uid,xhr:'xhr'}),complete:function()
{typeof options.callback=='function'&&options.callback();$(document).trigger('ajaxFacebookStop');},success:function(response)
{if(typeof response.error!=='undefined')
{$.note&&$.note.error(response.error);return;}
$.jet.facebook.options.uidLinked=uid;if(typeof options.hideShowDiv!='undefined')
{$actionFacebook.find('.FBAccountOn').show();$actionFacebook.find('.FBAccountOff').hide();}
if(typeof options.defineRights!='undefined')
{$actionFacebook.closest('fieldset').find('div.actionFBList').find("input[type='checkbox']").attr('checked',true).closest('div.actionFBList').show();}
typeof response.FBdata!=='undefined'&&$(document).trigger('FBaccountAssociated',[response.FBdata]);}});};FB.getLoginStatus(function(response)
{switch(response.status)
{case'unknown':FB.login(function(response){response.status=='connected'&&actionJs(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;case'connected':actionJs(response.authResponse.accessToken,response.authResponse.userID);break;case'not_authorized':FB.login(function(response){response.status=='connected'&&actionJs(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;}});},logout:function(url)
{var redirect=function(url)
{typeof url!=='undefined'&&window.location.replace(url);};if($.jet.facebook.options.userConnected!=true)
{redirect(url);}
FB.getLoginStatus(function(response)
{if(response.status==='connected')
{FB.logout(redirect(url));}
else
{redirect(url);}});},actionLogin:function(token,uid)
{var $nodeLogin=$.note.flash($.jet.facebook.langs[$data.common.lang.toUpperCase()].FACEBOOK_CONNECT);$(document).trigger('ajaxFacebookStart',['actionLogin',token,uid]);$.ajax({type:'post',dataType:'json',url:$.jet.facebook.options.apiController+'/_xhr_apiCheck',data:({token:token,uid:uid,xhr:'xhr'}),complete:function()
{$nodeLogin.remove();$(document).trigger('ajaxFacebookStop');},success:function(response)
{if(typeof response.error!=='undefined')
{$.jet.facebook.options.GATrack&&$.googleEvents.send($.jet.facebook.options.GANameError,'errors_facebook_actionLogin',response.error);$.note&&$.note.error(response.error);return;}
typeof $.jet.facebook.actionLogin.extraTraitments!='undefined'&&$.jet.facebook.actionLogin.extraTraitments(response);$.jet.facebook.options.uidLinked=uid;var callback=function(){};if(typeof response.reload!=='undefined')
{callback=function()
{$.jet.facebook.options.GATrack&&$.googleEvents.send($.jet.facebook.options.GAName,'connect');$.jet.facebook.options.reloadFunction();};}
if(typeof response.FBaccountCreated!=='undefined'&&response.FBaccountCreated&&typeof response.FBdata!=='undefined')
{$(document).trigger('FBaccountCreated',[response.FBdata,callback]);}else{callback();return;}}});},delay:function(){$.jet.facebook.delayBuffer.push(arguments);},delayBuffer:[],delayUnBuffer:function()
{var	m=$.jet.facebook.delayBuffer.length,i=0,curBuf,n=0,j=0,FBContainer;if(typeof FB=='object')
{for(;i<m;++i)
{curBuf=$.jet.facebook.delayBuffer[i];FBContainer=FB;for(j=0,n=curBuf[0].length;j<n;++j)
{FBContainer=FBContainer[curBuf[0][j]];}
var o=curBuf.length,k=1,args=[];for(;k<o;++k){args.push(curBuf[k]);}
FBContainer.apply(FBContainer,args);}}
else{console.warn('FB is not ready to unbuffer delayed actions');}},login:function()
{FB.getLoginStatus(function(response)
{if(response.status=='connected'&&$.jet.facebook.options.uidLinked==response.authResponse.userID)
{return;}
switch(response.status)
{case'unknown':FB.login(function(response){response.status=='connected'&&$.jet.facebook.actionLogin(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;case'connected':$.jet.facebook.actionLogin(response.authResponse.accessToken,response.authResponse.userID);break;case'not_authorized':FB.login(function(response){response.status=='connected'&&$.jet.facebook.actionLogin(response.authResponse.accessToken,response.authResponse.userID);},{scope:$.jet.facebook.options.scopeList});break;}});}};$.extend($.jet.facebook,$.microTemplate);$.jet.facebook.openGraph.ajaxOptions={success:function(response)
{if($.jet.facebook.options.GATrack)
{var GAObject=(typeof this.params.options.GAObject!='undefined')?this.params.options.GAObject:this.params.object,GAAction=(typeof this.params.options.GAAction!='undefined')?this.params.options.GAAction:this.params.action;$.googleEvents.send($.jet.facebook.options.GAName,GAObject,GAAction);}
$(document).trigger('FBOpenGraphSend',[this.params.action,this.params.object,response.id,this.params.options]);}};$.jet.facebook.createAccount.ajaxOptions={url:$.jet.facebook.options.apiController+'/_xhr_createAccount',data:{xhr:'xhr',type:1}};$.jet.facebook.actionAfterOpenGraph.ajaxOptions={url:$.jet.facebook.options.apiController+'/_xhr_updateBinaryNotifications',success:function(response)
{$.jet.facebook.options.notifications=response;$nodeCancel=$.note.info($.jet.facebook.getTemplate($.jet.facebook.langs[$.jet.facebook.lang].FACEBOOK_ACTION_DONE_CANCEL,$.extend({},{idAction:this.params.idAction})),{delay:500000});}};$.jet.facebook.subServices={};$.jet.services.facebook={start:false,options:{subServices:false,reloadFunction:$.jet.facebook.utils.reload.desktop},init:function()
{$.extend($.jet.facebook.options,$.evalOptions(this.options));window.fbAsyncInit=$.jet.facebook.init;}};})(jQuery);(function($)
{$.mark={markPureText:function(text,textToMark)
{return text.replace($.mark.prepareRegExp(textToMark),function(r)
{return $.microTemplate.getTemplate($.mark.options.nodeTemplate,{text:r});},true);},prepareRegExp:function(mark)
{return new RegExp($.trim(mark).split(' ').join('|').replace(/([\\\\\\\^\\\$\\\.\\\|\\\?\\\*\\\+\\\(\\\)\\\{\\\}])/g,function(a){return'\\\\\\'+a;}),'gi');},options:{nodeTemplate:"<mark>${text}</mark>"}};$.fn.mark=function(str)
{var r=$.mark.prepareRegExp(str);return this.each(function()
{$(this).replaceText(r,function(r){return $.microTemplate.getTemplate($.mark.options.nodeTemplate,{text:r});},false);});};})(jQuery);if(!window.JSON){window.JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());(function(window,undefined){"use strict";var
document=window.document,setTimeout=window.setTimeout||setTimeout,clearTimeout=window.clearTimeout||clearTimeout,setInterval=window.setInterval||setInterval,History=window.History=window.History||{};if(typeof History.initHtml4!=='undefined'){throw new Error('History.js HTML4 Support has already been loaded...');}
History.initHtml4=function(){if(typeof History.initHtml4.initialized!=='undefined'){return false;}
else{History.initHtml4.initialized=true;}
History.enabled=true;History.savedHashes=[];History.isLastHash=function(newHash){var oldHash=History.getHashByIndex(),isLast;isLast=newHash===oldHash;return isLast;};History.saveHash=function(newHash){if(History.isLastHash(newHash)){return false;}
History.savedHashes.push(newHash);return true;};History.getHashByIndex=function(index){var hash=null;if(typeof index==='undefined'){hash=History.savedHashes[History.savedHashes.length-1];}
else if(index<0){hash=History.savedHashes[History.savedHashes.length+index];}
else{hash=History.savedHashes[index];}
return hash;};History.discardedHashes={};History.discardedStates={};History.discardState=function(discardedState,forwardState,backState){var discardedStateHash=History.getHashByState(discardedState),discardObject;discardObject={'discardedState':discardedState,'backState':backState,'forwardState':forwardState};History.discardedStates[discardedStateHash]=discardObject;return true;};History.discardHash=function(discardedHash,forwardState,backState){var discardObject={'discardedHash':discardedHash,'backState':backState,'forwardState':forwardState};History.discardedHashes[discardedHash]=discardObject;return true;};History.discardedState=function(State){var StateHash=History.getHashByState(State),discarded;discarded=History.discardedStates[StateHash]||false;return discarded;};History.discardedHash=function(hash){var discarded=History.discardedHashes[hash]||false;return discarded;};History.recycleState=function(State){var StateHash=History.getHashByState(State);if(History.discardedState(State)){delete History.discardedStates[StateHash];}
return true;};if(History.emulated.hashChange){History.hashChangeInit=function(){History.checkerFunction=null;var lastDocumentHash='',iframeId,iframe,lastIframeHash,checkerRunning;if(History.isInternetExplorer()){iframeId='historyjs-iframe';iframe=document.createElement('iframe');iframe.setAttribute('id',iframeId);iframe.style.display='none';document.body.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.close();lastIframeHash='';checkerRunning=false;History.checkerFunction=function(){if(checkerRunning){return false;}
checkerRunning=true;var documentHash=History.getHash()||'',iframeHash=History.unescapeHash(iframe.contentWindow.document.location.hash)||'';if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;if(iframeHash!==documentHash){lastIframeHash=iframeHash=documentHash;iframe.contentWindow.document.open();iframe.contentWindow.document.close();iframe.contentWindow.document.location.hash=History.escapeHash(documentHash);}
History.Adapter.trigger(window,'hashchange');}
else if(iframeHash!==lastIframeHash){lastIframeHash=iframeHash;History.setHash(iframeHash,false);}
checkerRunning=false;return true;};}
else{History.checkerFunction=function(){var documentHash=History.getHash();if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;History.Adapter.trigger(window,'hashchange');}
return true;};}
History.intervalList.push(setInterval(History.checkerFunction,History.options.hashChangeInterval));return true;};History.Adapter.onDomLoad(History.hashChangeInit);}
if(History.emulated.pushState){History.onHashChange=function(event){var currentUrl=((event&&event.newURL)||document.location.href),currentHash=History.getHashByUrl(currentUrl),currentState=null,currentStateHash=null,currentStateHashExits=null,discardObject;if(History.isLastHash(currentHash)){History.busy(false);return false;}
History.doubleCheckComplete();History.saveHash(currentHash);if(currentHash&&History.isTraditionalAnchor(currentHash)){History.Adapter.trigger(window,'anchorchange');History.busy(false);return false;}
currentState=History.extractState(History.getFullUrl(currentHash||document.location.href,false),true);if(History.isLastSavedState(currentState)){History.busy(false);return false;}
currentStateHash=History.getHashByState(currentState);discardObject=History.discardedState(currentState);if(discardObject){if(History.getHashByIndex(-2)===History.getHashByState(discardObject.forwardState)){History.back(false);}else{History.forward(false);}
return false;}
History.pushState(currentState.data,currentState.title,currentState.url,false);return true;};History.Adapter.bind(window,'hashchange',History.onHashChange);History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(false),oldStateHash=History.getHashByState(oldState),html4Hash=History.getHash();History.storeState(newState);History.expectedStateId=newState.id;History.recycleState(newState);History.setTitle(newState);if(newStateHash===oldStateHash){History.busy(false);return false;}
if(newStateHash!==html4Hash&&newStateHash!==History.getShortUrl(document.location.href)){History.setHash(newStateHash,false);return false;}
History.saveState(newState);History.Adapter.trigger(window,'statechange');History.busy(false);return true;};History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),oldState=History.getState(false),previousState=History.getStateByIndex(-2);History.discardState(oldState,newState,previousState);History.pushState(newState.data,newState.title,newState.url,false);return true;};}
if(History.emulated.pushState){if(History.getHash()&&!History.emulated.hashChange){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
console=window.console||undefined,document=window.document,navigator=window.navigator,sessionStorage=window.sessionStorage||false,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,setInterval=window.setInterval,clearInterval=window.clearInterval,JSON=window.JSON,alert=window.alert,History=window.History=window.History||{},history=window.history;JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;if(typeof History.init!=='undefined'){throw new Error('History.js Core has already been loaded...');}
History.init=function(){if(typeof History.Adapter==='undefined'){return false;}
if(typeof History.initCore!=='undefined'){History.initCore();}
if(typeof History.initHtml4!=='undefined'){History.initHtml4();}
return true;};History.initCore=function(){if(typeof History.initCore.initialized!=='undefined'){return false;}
else{History.initCore.initialized=true;}
History.options=History.options||{};History.options.hashChangeInterval=History.options.hashChangeInterval||100;History.options.safariPollInterval=History.options.safariPollInterval||500;History.options.doubleCheckInterval=History.options.doubleCheckInterval||500;History.options.storeInterval=History.options.storeInterval||1000;History.options.busyDelay=History.options.busyDelay||250;History.options.debug=History.options.debug||false;History.options.initialTitle=History.options.initialTitle||document.title;History.intervalList=[];History.clearAllIntervals=function(){var i,il=History.intervalList;if(typeof il!=="undefined"&&il!==null){for(i=0;i<il.length;i++){clearInterval(il[i]);}
History.intervalList=null;}};History.debug=function(){if((History.options.debug||false)){History.log.apply(History,arguments);}};History.log=function(){var
consoleExists=!(typeof console==='undefined'||typeof console.log==='undefined'||typeof console.log.apply==='undefined'),textarea=document.getElementById('log'),message,i,n,args,arg;if(consoleExists){args=Array.prototype.slice.call(arguments);message=args.shift();if(typeof console.debug!=='undefined'){console.debug.apply(console,[message,args]);}
else{console.log.apply(console,[message,args]);}}
else{message=("\n"+arguments[0]+"\n");}
for(i=1,n=arguments.length;i<n;++i){arg=arguments[i];if(typeof arg==='object'&&typeof JSON!=='undefined'){try{arg=JSON.stringify(arg);}
catch(Exception){}}
message+="\n"+arg+"\n";}
if(textarea){textarea.value+=message+"\n-----\n";textarea.scrollTop=textarea.scrollHeight-textarea.clientHeight;}
else if(!consoleExists){alert(message);}
return true;};History.getInternetExplorerMajorVersion=function(){var result=History.getInternetExplorerMajorVersion.cached=(typeof History.getInternetExplorerMajorVersion.cached!=='undefined')?History.getInternetExplorerMajorVersion.cached:(function(){var v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while((div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->')&&all[0]){}
return(v>4)?v:false;})();return result;};History.isInternetExplorer=function(){var result=History.isInternetExplorer.cached=(typeof History.isInternetExplorer.cached!=='undefined')?History.isInternetExplorer.cached:Boolean(History.getInternetExplorerMajorVersion());return result;};History.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent))),hashChange:Boolean(!(('onhashchange'in window)||('onhashchange'in document))||(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8))};History.enabled=!History.emulated.pushState;History.bugs={setHash:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),safariPoll:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),ieDoubleCheck:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<7)};History.isEmptyObject=function(obj){for(var name in obj){return false;}
return true;};History.cloneObject=function(obj){var hash,newObj;if(obj){hash=JSON.stringify(obj);newObj=JSON.parse(hash);}
else{newObj={};}
return newObj;};History.getRootUrl=function(){var rootUrl=document.location.protocol+'//'+(document.location.hostname||document.location.host);if(document.location.port||false){rootUrl+=':'+document.location.port;}
rootUrl+='/';return rootUrl;};History.getBaseHref=function(){var
baseElements=document.getElementsByTagName('base'),baseElement=null,baseHref='';if(baseElements.length===1){baseElement=baseElements[0];baseHref=baseElement.href.replace(/[^\/]+$/,'');}
baseHref=baseHref.replace(/\/+$/,'');if(baseHref)baseHref+='/';return baseHref;};History.getBaseUrl=function(){var baseUrl=History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();return baseUrl;};History.getPageUrl=function(){var
State=History.getState(false,false),stateUrl=(State||{}).url||document.location.href,pageUrl;pageUrl=stateUrl.replace(/\/+$/,'').replace(/[^\/]+$/,function(part,index,string){return(/\./).test(part)?part:part+'/';});return pageUrl;};History.getBasePageUrl=function(){var basePageUrl=document.location.href.replace(/[#\?].*/,'').replace(/[^\/]+$/,function(part,index,string){return(/[^\/]$/).test(part)?'':part;}).replace(/\/+$/,'')+'/';return basePageUrl;};History.getFullUrl=function(url,allowBaseHref){var fullUrl=url,firstChar=url.substring(0,1);allowBaseHref=(typeof allowBaseHref==='undefined')?true:allowBaseHref;if(/[a-z]+\:\/\//.test(url)){}
else if(firstChar==='/'){fullUrl=History.getRootUrl()+url.replace(/^\/+/,'');}
else if(firstChar==='#'){fullUrl=History.getPageUrl().replace(/#.*/,'')+url;}
else if(firstChar==='?'){fullUrl=History.getPageUrl().replace(/[\?#].*/,'')+url;}
else{if(allowBaseHref){fullUrl=History.getBaseUrl()+url.replace(/^(\.\/)+/,'');}else{fullUrl=History.getBasePageUrl()+url.replace(/^(\.\/)+/,'');}}
return fullUrl.replace(/\#$/,'');};History.getShortUrl=function(url){var shortUrl=url,baseUrl=History.getBaseUrl(),rootUrl=History.getRootUrl();if(History.emulated.pushState){shortUrl=shortUrl.replace(baseUrl,'');}
shortUrl=shortUrl.replace(rootUrl,'/');if(History.isTraditionalAnchor(shortUrl)){shortUrl='./'+shortUrl;}
shortUrl=shortUrl.replace(/^(\.\/)+/g,'./').replace(/\#$/,'');return shortUrl;};History.store={};History.idToState=History.idToState||{};History.stateToId=History.stateToId||{};History.urlToId=History.urlToId||{};History.storedStates=History.storedStates||[];History.savedStates=History.savedStates||[];History.normalizeStore=function(){History.store.idToState=History.store.idToState||{};History.store.urlToId=History.store.urlToId||{};History.store.stateToId=History.store.stateToId||{};};History.getState=function(friendly,create){if(typeof friendly==='undefined'){friendly=true;}
if(typeof create==='undefined'){create=true;}
var State=History.getLastSavedState();if(!State&&create){State=History.createStateObject();}
if(friendly){State=History.cloneObject(State);State.url=State.cleanUrl||State.url;}
return State;};History.getIdByState=function(newState){var id=History.extractId(newState.url),str;if(!id){str=History.getStateString(newState);if(typeof History.stateToId[str]!=='undefined'){id=History.stateToId[str];}
else if(typeof History.store.stateToId[str]!=='undefined'){id=History.store.stateToId[str];}
else{while(true){id=(new Date()).getTime()+String(Math.random()).replace(/\D/g,'');if(typeof History.idToState[id]==='undefined'&&typeof History.store.idToState[id]==='undefined'){break;}}
History.stateToId[str]=id;History.idToState[id]=newState;}}
return id;};History.normalizeState=function(oldState){var newState,dataNotEmpty;if(!oldState||(typeof oldState!=='object')){oldState={};}
if(typeof oldState.normalized!=='undefined'){return oldState;}
if(!oldState.data||(typeof oldState.data!=='object')){oldState.data={};}
newState={};newState.normalized=true;newState.title=oldState.title||'';newState.url=History.getFullUrl(History.unescapeString(oldState.url||document.location.href));newState.hash=History.getShortUrl(newState.url);newState.data=History.cloneObject(oldState.data);newState.id=History.getIdByState(newState);newState.cleanUrl=newState.url.replace(/\??\&_suid.*/,'');newState.url=newState.cleanUrl;dataNotEmpty=!History.isEmptyObject(newState.data);if(newState.title||dataNotEmpty){newState.hash=History.getShortUrl(newState.url).replace(/\??\&_suid.*/,'');if(!/\?/.test(newState.hash)){newState.hash+='?';}
newState.hash+='&_suid='+newState.id;}
newState.hashedUrl=History.getFullUrl(newState.hash);if((History.emulated.pushState||History.bugs.safariPoll)&&History.hasUrlDuplicate(newState)){newState.url=newState.hashedUrl;}
return newState;};History.createStateObject=function(data,title,url){var State={'data':data,'title':title,'url':url};State=History.normalizeState(State);return State;};History.getStateById=function(id){id=String(id);var State=History.idToState[id]||History.store.idToState[id]||undefined;return State;};History.getStateString=function(passedState){var State,cleanedState,str;State=History.normalizeState(passedState);cleanedState={data:State.data,title:passedState.title,url:passedState.url};str=JSON.stringify(cleanedState);return str;};History.getStateId=function(passedState){var State,id;State=History.normalizeState(passedState);id=State.id;return id;};History.getHashByState=function(passedState){var State,hash;State=History.normalizeState(passedState);hash=State.hash;return hash;};History.extractId=function(url_or_hash){var id,parts,url;parts=/(.*)\&_suid=([0-9]+)$/.exec(url_or_hash);url=parts?(parts[1]||url_or_hash):url_or_hash;id=parts?String(parts[2]||''):'';return id||false;};History.isTraditionalAnchor=function(url_or_hash){var isTraditional=!(/[\/\?\.]/.test(url_or_hash));return isTraditional;};History.extractState=function(url_or_hash,create){var State=null,id,url;create=create||false;id=History.extractId(url_or_hash);if(id){State=History.getStateById(id);}
if(!State){url=History.getFullUrl(url_or_hash);id=History.getIdByUrl(url)||false;if(id){State=History.getStateById(id);}
if(!State&&create&&!History.isTraditionalAnchor(url_or_hash)){State=History.createStateObject(null,null,url);}}
return State;};History.getIdByUrl=function(url){var id=History.urlToId[url]||History.store.urlToId[url]||undefined;return id;};History.getLastSavedState=function(){return History.savedStates[History.savedStates.length-1]||undefined;};History.getLastStoredState=function(){return History.storedStates[History.storedStates.length-1]||undefined;};History.hasUrlDuplicate=function(newState){var hasDuplicate=false,oldState;oldState=History.extractState(newState.url);hasDuplicate=oldState&&oldState.id!==newState.id;return hasDuplicate;};History.storeState=function(newState){History.urlToId[newState.url]=newState.id;History.storedStates.push(History.cloneObject(newState));return newState;};History.isLastSavedState=function(newState){var isLast=false,newId,oldState,oldId;if(History.savedStates.length){newId=newState.id;oldState=History.getLastSavedState();oldId=oldState.id;isLast=(newId===oldId);}
return isLast;};History.saveState=function(newState){if(History.isLastSavedState(newState)){return false;}
History.savedStates.push(History.cloneObject(newState));return true;};History.getStateByIndex=function(index){var State=null;if(typeof index==='undefined'){State=History.savedStates[History.savedStates.length-1];}
else if(index<0){State=History.savedStates[History.savedStates.length+index];}
else{State=History.savedStates[index];}
return State;};History.getHash=function(){var hash=History.unescapeHash(document.location.hash);return hash;};History.unescapeString=function(str){var result=str,tmp;while(true){tmp=window.unescape(result);if(tmp===result){break;}
result=tmp;}
return result;};History.unescapeHash=function(hash){var result=History.normalizeHash(hash);result=History.unescapeString(result);return result;};History.normalizeHash=function(hash){var result=hash.replace(/[^#]*#/,'').replace(/#.*/,'');return result;};History.setHash=function(hash,queue){var adjustedHash,State,pageUrl;if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.setHash,args:arguments,queue:queue});return false;}
adjustedHash=History.escapeHash(hash);History.busy(true);State=History.extractState(hash,true);if(State&&!History.emulated.pushState){History.pushState(State.data,State.title,State.url,false);}
else if(document.location.hash!==adjustedHash){if(History.bugs.setHash){pageUrl=History.getPageUrl();History.pushState(null,null,pageUrl+'#'+adjustedHash,false);}
else{document.location.hash=adjustedHash;}}
return History;};History.escapeHash=function(hash){var result=History.normalizeHash(hash);result=window.escape(result);if(!History.bugs.hashEscape){result=result.replace(/\%21/g,'!').replace(/\%26/g,'&').replace(/\%3D/g,'=').replace(/\%3F/g,'?');}
return result;};History.getHashByUrl=function(url){var hash=String(url).replace(/([^#]*)#?([^#]*)#?(.*)/,'$2');hash=History.unescapeHash(hash);return hash;};History.setTitle=function(newState){var title=newState.title,firstState;if(!title){firstState=History.getStateByIndex(0);if(firstState&&firstState.url===newState.url){title=firstState.title||History.options.initialTitle;}}
try{document.getElementsByTagName('title')[0].innerHTML=title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');}
catch(Exception){}
document.title=title;return History;};History.queues=[];History.busy=function(value){if(typeof value!=='undefined'){History.busy.flag=value;}
else if(typeof History.busy.flag==='undefined'){History.busy.flag=false;}
if(!History.busy.flag){clearTimeout(History.busy.timeout);var fireNext=function(){var i,queue,item;if(History.busy.flag)return;for(i=History.queues.length-1;i>=0;--i){queue=History.queues[i];if(queue.length===0)continue;item=queue.shift();History.fireQueueItem(item);History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}};History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}
return History.busy.flag;};History.busy.flag=false;History.fireQueueItem=function(item){return item.callback.apply(item.scope||History,item.args||[]);};History.pushQueue=function(item){History.queues[item.queue||0]=History.queues[item.queue||0]||[];History.queues[item.queue||0].push(item);return History;};History.queue=function(item,queue){if(typeof item==='function'){item={callback:item};}
if(typeof queue!=='undefined'){item.queue=queue;}
if(History.busy()){History.pushQueue(item);}else{History.fireQueueItem(item);}
return History;};History.clearQueue=function(){History.busy.flag=false;History.queues=[];return History;};History.stateChanged=false;History.doubleChecker=false;History.doubleCheckComplete=function(){History.stateChanged=true;History.doubleCheckClear();return History;};History.doubleCheckClear=function(){if(History.doubleChecker){clearTimeout(History.doubleChecker);History.doubleChecker=false;}
return History;};History.doubleCheck=function(tryAgain){History.stateChanged=false;History.doubleCheckClear();if(History.bugs.ieDoubleCheck){History.doubleChecker=setTimeout(function(){History.doubleCheckClear();if(!History.stateChanged){tryAgain();}
return true;},History.options.doubleCheckInterval);}
return History;};History.safariStatePoll=function(){var
urlState=History.extractState(document.location.href),newState;if(!History.isLastSavedState(urlState)){newState=urlState;}
else{return;}
if(!newState){newState=History.createStateObject();}
History.Adapter.trigger(window,'popstate');return History;};History.back=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.back,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.back(false);});history.go(-1);return true;};History.forward=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.forward,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.forward(false);});history.go(1);return true;};History.go=function(index,queue){var i;if(index>0){for(i=1;i<=index;++i){History.forward(queue);}}
else if(index<0){for(i=-1;i>=index;--i){History.back(queue);}}
else{throw new Error('History.go: History.go requires a positive or negative integer passed.');}
return History;};if(History.emulated.pushState){var emptyFunction=function(){};History.pushState=History.pushState||emptyFunction;History.replaceState=History.replaceState||emptyFunction;}
else{History.onPopState=function(event,extra){var stateId=false,newState=false,currentHash,currentState;History.doubleCheckComplete();currentHash=History.getHash();if(currentHash){currentState=History.extractState(currentHash||document.location.href,true);if(currentState){History.replaceState(currentState.data,currentState.title,currentState.url,false);}
else{History.Adapter.trigger(window,'anchorchange');History.busy(false);}
History.expectedStateId=false;return false;}
stateId=History.Adapter.extractEventData('state',event,extra)||false;if(stateId){newState=History.getStateById(stateId);}
else if(History.expectedStateId){newState=History.getStateById(History.expectedStateId);}
else{newState=History.extractState(document.location.href);}
if(!newState){newState=History.createStateObject(null,null,document.location.href);}
History.expectedStateId=false;if(History.isLastSavedState(newState)){History.busy(false);return false;}
History.storeState(newState);History.saveState(newState);History.setTitle(newState);History.Adapter.trigger(window,'statechange');History.busy(false);return true;};History.Adapter.bind(window,'popstate',History.onPopState);History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.pushState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.replaceState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};}
if(sessionStorage){try{History.store=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){History.store={};}
History.normalizeStore();}
else{History.store={};History.normalizeStore();}
History.Adapter.bind(window,"beforeunload",History.clearAllIntervals);History.Adapter.bind(window,"unload",History.clearAllIntervals);History.saveState(History.storeState(History.extractState(document.location.href,true)));if(sessionStorage){History.onUnload=function(){var	currentStore,item;try{currentStore=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){currentStore={};}
currentStore.idToState=currentStore.idToState||{};currentStore.urlToId=currentStore.urlToId||{};currentStore.stateToId=currentStore.stateToId||{};for(item in History.idToState){if(!History.idToState.hasOwnProperty(item)){continue;}
currentStore.idToState[item]=History.idToState[item];}
for(item in History.urlToId){if(!History.urlToId.hasOwnProperty(item)){continue;}
currentStore.urlToId[item]=History.urlToId[item];}
for(item in History.stateToId){if(!History.stateToId.hasOwnProperty(item)){continue;}
currentStore.stateToId[item]=History.stateToId[item];}
History.store=currentStore;History.normalizeStore();sessionStorage.setItem('History.store',JSON.stringify(currentStore));};History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));History.Adapter.bind(window,'beforeunload',History.onUnload);History.Adapter.bind(window,'unload',History.onUnload);}
if(!History.emulated.pushState){if(History.bugs.safariPoll){History.intervalList.push(setInterval(History.safariStatePoll,History.options.safariPollInterval));}
if(navigator.vendor==='Apple Computer, Inc.'||(navigator.appCodeName||'')==='Mozilla'){History.Adapter.bind(window,'hashchange',function(){History.Adapter.trigger(window,'popstate');});if(History.getHash()){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}}};History.init();})(window);(function(window,undefined){"use strict";var
History=window.History=window.History||{},jQuery=window.jQuery;if(typeof History.Adapter!=='undefined'){throw new Error('History.js Adapter has already been loaded...');}
History.Adapter={bind:function(el,event,callback){jQuery(el).bind(event,callback);},trigger:function(el,event,extra){jQuery(el).trigger(event,extra);},extractEventData:function(key,event,extra){var result=(event&&event.originalEvent&&event.originalEvent[key])||(extra&&extra[key])||undefined;return result;},onDomLoad:function(callback){jQuery(callback);}};if(typeof History.init!=='undefined'){History.init();}})(window);(function($)
{'use strict';$.fn.socialBar=function(url,title){var $this=$(this);$this.find('.jGoogleShare').attr('href','https://plus.google.com/share?url='+url);$this.find('.jTwitterShare').attr('href','https://twitter.com/intent/tweet/?text='+title+'&url='+url);$this.find('.jFacebookShare').attr('href','https://www.facebook.com/sharer/sharer.php?u='+url);}})(jQuery);(function($)
{$.expeertSearchEngine={type:{},currentSearch:{url:'',params:{}},init:function()
{$.expeertSearchEngine.initParams();$.expeertSearchEngine.type=$data.services.search.type;if($data.services.search.searchPage==true)
{History.Adapter.bind(window,'statechange stateinit',function()
{var state=History.getState(),params=[];$.expeertSearchEngine.currentSearch.params=state.data.params;$.expeertSearchEngine[state.data.func].apply(state.data.self,params);});$.expeertSearchEngine.initMark($.expeertSearchEngine.currentSearch.params.q);}
$('div#jSearchResults').on('click','a.jMore',$.expeertSearchEngine.moreResult);},initParams:function()
{var matchs=[],reg=/([^=|\?|&]+)=([^&]+)/g;while(matchs=reg.exec(window.location.search))
{(matchs[1]!='ui-state')&&($.expeertSearchEngine.currentSearch.params[matchs[1]]=matchs[2]);}},initMark:function(query)
{$('.jListResults a').mark(query);},moreResult:function(e)
{e.preventDefault();e.stopPropagation();var $this=$(this);$.ajax({type:'POST',url:$this.attr('url'),dataType:'json',data:{},success:function(html)
{$this.remove();$('ul.jListResults').append(html.h);}});}};$.fn.expeertSearchEngine=function(config)
{$.expeertSearchEngine.microTemplateInit();config=$.extend(true,{},{width:500,provider:function()
{if(!$data.expeert.home&&($data.expeert.group!=''))
{return $data.expeert.urlPrefixModule+'search';}
return $data.expeert.baseUrl+'/c/search';}},config);$.expeertSearchEngine.currentSearch.url=config.provider();$.expeertSearchEngine.initParams();return this.each(function()
{var
self=$(this),button=self.siblings('button.submit'),xhr;self.tryFn('addShortcut',function(e){$(this).focus();e.preventDefault();},{keyCode:70,ctrlKey:true,shiftKey:true}).tryFn('tipsy',{gravity:'n',delayIn:100,fade:false,opacity:0.75}).bind('focus',function()
{$(this).tryFn('tipsy','hide');});!self.hasClass('yamli')&&self.ccmComplete($.extend(true,{delay:200,minLength:2,preSelectFirst:false,autoFill:false,autoFocus:true,cache:true,fixed:true,dataType:"json",focus:function(e,item)
{$(this).attr('value',item.value);},select:function(e,item)
{window.location=item.item.url;e.preventDefault();e.stopPropagation();},open:function()
{$('div.box3 ul.ui-autocomplete').css({width:config.width}).parent().css({width:config.width});},source:function(request,response)
{$.profile&&(console.groupCollapsed('searchengine complete')||console.time('total'));$.ajaxSettings.discrete=true;$.profile&&console.time('search : ajax to success');xhr=$.ajax({url:config.provider(),cache:true,dataType:"json",localCache:true,storageName:'search',localCacheTimeout:2*60*60*1000,data:{q:$.trim(request.term.toLowerCase()),xhr:true},success:function(data)
{$.profile&&console.timeEnd('search : ajax to success');$.profile&&console.time('success ccmcomplete');if(data===null)
{response([]);}
else{var total=0,map=$.map(data.r,function(item)
{var cat=$.expeertSearchEngine.getTemplate($.expeertSearchEngine.type[item.ty]),ret;ret=[{label:'<div class="app_autocomplete__proposition">'
+(item.ti!==null?$.mark.markPureText(item.ti,request.term):'')
+'</div>'
+'<div class="app_autocomplete__category">'
+cat
+'</div>',value:request.term,url:item.url}];return ret;});map.push({label:$.expeertSearchEngine.getTemplate('<span>'+$.expeertSearchEngine.langs[$.expeertSearchEngine.lang].MORE,{total:data.x[1]}+'</span>'),value:request.term,url:config.provider()+'?q='+escape($.trim(request.term)),className:'app_autocomplete__more'});response(map);}
$.profile&&(console.timeEnd('success ccmcomplete')||console.timeEnd('total')||console.groupEnd());}});}},{}));button.bind('click',function(e)
{e.preventDefault();var term=$.halfEscape($.trim(self.val()));if(term==='')
{self.tryFn('extendedTipsy',{title:$.expeertSearchEngine.getTemplate('$l{TIP_EMPTY}'),timeout:2000});return;}
window.location=config.provider()+'?q='+term;});});};$.extend($.expeertSearchEngine,$.microTemplate);$(document).start(function()
{$.expeertSearchEngine.init();});})(jQuery);(function($)
{$.groups={boolAjax:false,templateGroup:'<li id="divGroup${groupId}">'
+'<div class="grid_line grid--norwd">'
+'<div class="grid_left">'
+'<figure>'
+'<a href="${groupUrl}" title="${groupName}"><img alt="" src="${groupImage}" border="0" width="100"></a>'
+'</figure>'
+'${modifyLink}'
+'</div>'
+'<div class="grid_last">'
+'<div class="app_content_options">'
+'<a home_url="${groupUrl}" class="${class} app_btn_action" data-aid="${actid}" actid="${actid}" data-tid="${groupId}" href="${href}" id="but${groupId}" data-icomoon="&#58974;" aria-hidden="true">${title}</a>'
+'</div>'
+'<a href="${catUrl}" class="app_groups__category">${catName}</a>'
+'<h2><a href="${groupUrl}" id="${groupId}" data-tid="${groupId}" class="tinyGroup app_infos__title">${groupName}</a></h2>'
+'<p id="nb${groupId}">${desc}</p>'
+'</div>'
+'</div>'
+'</li>',templateMore:'<a class="app_btn_1 app_btn_full" href="javascript:void();" actid="btnMore" id="btnMore" debut="${debut}" cat="${cat}" p="${profile}">$l{MORE}</a>',templateModifyLink:'<a href="javascript:void(0);" class="jGroupImgModify app_a--admin"  aria-hidden="true" data-icomoon="&#58885;">$l{MODIFY}</a>',idCacheProfile:'groupProfileL1',idCacheCat:'groupCatL1',idCacheSearch:'groupSearchL1',init:function($dataGroups)
{this.microTemplateInit();$(".jGroupImgModify").bind('click',this.modifyImg);$ec.on('click',this.onClick);var catcn=0;($.isArray($data.groups.catcn)&&(typeof $data.groups.catcn[0]!=="undefined"))&&(catcn=$data.groups.catcn[0]);$dataGroups&&this.displayListGroups($dataGroups,catcn);if($data.expeert.user.can.administrate)
{var $divGroup=$('.jDivGroup');$divGroup.displayIcon('.icoOptions');$divGroup.find('.icoOptions').dropDownBtn();$divGroup.on('click','.jGroupCatList a',function(e){var $this=$(this),data={id:$this.closest('.hasId').data('id'),catcn:$this.data('cat')};$.ajax({type:'POST',dataType:'json',url:$data.common.baseUrl+'/g/xhr_upd_group_cat',data:data,success:function(data){if(!data.success){$.note.warn($e.msgs[$e.lang].ajaxError);return;}
if(!$this.parent().hasClass('app_selected')){$this.parent().parent().find('.app_selected').removeClass('app_selected');$this.parent().addClass('app_selected');$this.closest('.jDivGroup').find('.jDisplayGroupCat').html(data.label);}}});});}},displayListGroups:function(data_groups,cat_cn)
{var list_groups=data_groups.list_groups;if(list_groups&&list_groups.length>0)
{var $ulListGroups=$('#ulListGroups');for(var i=0;i<list_groups.length;i++){$ulListGroups.append(this.displayNodeGroup(list_groups[i],$data.expeert.user.can.administrate));}
$data.expeert.user.can.administrate&&$ulListGroups.find(".jGroupImgModify").bind('click',this.modifyImg);this.displayLinkMore(data_groups.debut,cat_cn,data_groups.profile);}},modifyImg:function()
{var $this=$(this),groupId=$this.attr('data-id'),$img=$(this).parent().find('img'),$node=$.imageUploader.create({template:'<div></div>',onComplete:function(data)
{data.success&&data.media&&$img.attr('src',data.media);$('div.ui-dialog-content').dialog('close');},fieldsToAdd:[{type:'hidden',name:'groupId',value:groupId}],tabs:{gallery:{enabled:false},file:{controler:function(){return $data.expeert.baseUrl+'/g/xhr_img';}},url:{enabled:false}}});$node.find('form').append('<input type="hidden" name="groupId" value="'+groupId+'" />');$node.dialog({modal:true,resizable:false,width:400,buttons:{Cancel:function()
{$(this).dialog("close");},Ok:function()
{$(this).trigger('upload',this);}}});},displayLinkMore:function(debut,cat_cn,profile)
{$('#divMore').html('');if(debut!=0){var data=[];data['debut']=debut;data['cat']=cat_cn;data['profile']=profile;$('#divMore').html(this.getTemplate(this.templateMore,data));$('#btnMore').bind('click',this.onClick);}},displayNodeGroup:function($groupData,displayModifyLink)
{if($data.expeert.uid==0)
{$groupData.actid='';$groupData.title=$.groups.langs[$.groups.lang].FOLLOWGROUP;$groupData.href='/'+$data.expeert.lang+'/p/groups';}
else if($groupData.userFollowing)
{$groupData.actid='unfollowgroup';$groupData['class']='jFollowGroup';$groupData.title=$.groups.langs[$.groups.lang].UNFOLLOWGROUP;$groupData.href='javascript:void(0);';}
else
{$groupData.actid='followgroup';$groupData['class']='jFollowGroup';$groupData.title=$.groups.langs[$.groups.lang].FOLLOWGROUP;$groupData.href='javascript:void(0);';}
$groupData.modifyLink=(displayModifyLink)?this.templateModifyLink:' ';$groupData.desc=$.groups.display_description($groupData.nbMembers,$groupData.nbContents);(typeof $groupData.catName=='undefined'||!$groupData.catName)&&($groupData.catName='');return $(this.getTemplate(this.templateGroup,$groupData));},onClick:function(e)
{var _this=$(this),_actid=_this.attr('actid'),_value=_this.attr('value'),_total=_this.attr('total'),_id=_this.attr('groupId');if(!$.groups.boolAjax)
{return false;}
switch(_actid)
{case'btnAjaxSearch':e.stopPropagation();e.preventDefault();break;case'btnMore':e.stopPropagation();e.preventDefault();var _debut=_this.attr('debut'),_cat=_this.attr('cat'),_profile=_this.attr('p');if(_profile!=='')
{$.ajax({type:'POST',dataType:'json',url:$data.expeert.baseUrl+'/p/user/'+_profile+'/group?xhr&page='+_debut,data:{},dataType:"json",localCache:true,localStorage:true,localCacheTimeout:2*60*60*1000,storageName:$.groups.idCacheProfile,success:function(html){$('#divNoResult').hide();$('#listGroups').show();$.groups.displayListGroups(html,_cat);}});}
break;default:return true;break;}
return false;},display_description:function(nb_followers,nb_contents){var res='';if(nb_followers>0){var lib_f='';var lib_c='';if(nb_followers==1){lib_f=$.groups.langs[$.groups.lang]['NB_FOLLOWERS_SING']+' : <span>'+nb_followers+'</span>';}
else{lib_f=$.groups.langs[$.groups.lang]['NB_FOLLOWERS_PLUR']+' : <span>'+nb_followers+'</span>';}
if(nb_contents>0){if(nb_contents==1){lib_c=$.groups.langs[$.groups.lang]['NB_CONTENTS_SING']+nb_contents;}
else{lib_c=$.groups.langs[$.groups.lang]['NB_CONTENTS_PLUR']+nb_contents;}}
else{lib_c=$.groups.langs[$.groups.lang]['NO_CONTENT'];}
res=lib_f+' - '+lib_c+'';}
return res;},addRemoveLineToColRight:function(id_group,action,link)
{if(action==='followgroup')
{$('#ulGroupsList').prepend('<li id="liColRight'+id_group+'"><a data-aid="unfollowgroup" class="jFollowGroup icoClose floatRight" href="#" data-tid="'+id_group
+'"><span>Delete</span></a><a href="'+link+'"  data-tid="'+id_group+'" class="tinyGroup"">'+$('#'+id_group).text()+'</a></li>');}
else{$('#ulGroupsList').find('#liColRight'+id_group).remove();}}};$.extend($.groups,$.microTemplate);$(document).start(function()
{if((typeof $data!=='undefined')&&(typeof $data.groups!=='undefined'))
{$.groups.boolAjax=$data.groups.boolAjax;$data.groups.init&&$.groups.init($data.groups.list_groups);}});})(jQuery);(function($)
{$.tinyConfigs={usersOptions:{selector:'.tinyProfile',getSource:function(){return $data.expeert.users;},template:'<div class="intip app_tooltip">'
+'<figure>'
+'<img src="${img}" class="intip">'
+'</figure>'
+'<p class="intip app_tooltip__name">${pn}</p>'
+'<p class="intip app_tooltip__description">${des}</p>'
+'<p class="intip app_tooltip__email">${email}</p>'
+'<footer class="intip">'
+'${socialAction}'
+'${newMsg}'
+'</footer>'
+'</div>',templateSocialAction:'${follow_action}'
+'<span class="intip padL5" style="font-weight:normal">${followers}</span>',templateFollow:'<a class="intip app_btn_1 followUserTiny" data-username="${userName}" data-tid="${id}" data-aid="7" href="javascript:void(0);">$l{FOLLOWUSER}</a>',templateUnfollow:'<a class="intip app_btn_1 followUserTiny" data-username="${userName}" data-tid="${id}" data-aid="16" href="javascript:void(0);">$l{UNFOLLOWUSER}</a>',templateNewMessage:'<a class="intip right padR5" title="${newMsgLbl}" href="${baseUrl}/e/newThread?uid=${id}"><span class="icoMsg intip" title="${newMsgLbl}"></span></a>',getBody:function(tid,options,data){return $.tinyConfigs.getTemplate(options.template,$.extend(data,{followers:$.tinyConfigs.getTemplate((function(){switch(data.flw)
{case 0:return $.tinyConfigs.langs[$.tinyConfigs.lang].NOFOLLOWER;case 1:return $.tinyConfigs.langs[$.tinyConfigs.lang].FOLLOWER;default:return $.tinyConfigs.langs[$.tinyConfigs.lang].FOLLOWERS;}})(),data),img:data.img===''?$data.common.assetUrl+'/'+$data.common.assetDomain+'/skin/common/img/anonymousS.png':data.img,socialAction:($data.expeert.conf.showSocialAction&&$data.expeert.uid?$.tinyConfigs.getTemplate(options.templateSocialAction,{follow_action:(tid==$data.expeert.uid||$data.expeert.uid==0?'':$.tinyConfigs.getTemplate((data.fld?options.templateUnfollow:options.templateFollow),data))}):''),newMsg:$data.expeert.conf.enablePrivateMsg&&$data.expeert.uid&&tid!=$data.expeert.uid?$.tinyConfigs.getTemplate(options.templateNewMessage,$.extend(data,{baseUrl:$data.common.baseUrl,newMsgLbl:$e.msgs[$e.lang].newMsg})):''}));}},groupsOptions:{selector:'.tinyGroup',getSource:function(){return $data.expeert.groups;},template:'<div class="intip line">'
+'<div class="intip bloc padR5 padT5 ">'
+'<img src="${img}" class="intip floatLeft">'
+'</div>'
+'<div class="intip lastBloc" >'
+'<p class="intip txtL">${pn}</p>'
+'<p class="intip txtL em">${des}</p>'
+'</div>'
+'</div>'
+'${groupAction}',templateGroupAction:'<div class="txtL marT10 marB5 line intip">'
+'<span class="intip padL5" style="font-weight:normal">${followers}</span>'
+'</div>',getBody:function(tid,options,data)
{return $.tinyConfigs.getTemplate(options.template,$.extend(data,{img:data.img===''?'http://i-exc.ccm2.net/iex/50/1616097897/219.jpg':data.img,groupAction:($data.expeert.conf.showTagAction?$.tinyConfigs.getTemplate(options.templateGroupAction,{followers:$.tinyConfigs.getTemplate((function(){switch(data.flw)
{case 0:return $.tinyConfigs.langs[$.tinyConfigs.lang].NOFOLLOWER;case 1:return $.tinyConfigs.langs[$.tinyConfigs.lang].FOLLOWER;default:return $.tinyConfigs.langs[$.tinyConfigs.lang].FOLLOWERS;}})(),data)}):'')}));}}};$.extend($.tinyConfigs,$.microTemplate);$(document).start(function(){$.tinyConfigs.microTemplateInit();});})(jQuery);(function($)
{$.embed={embedContent:{},init:function(dataToStore){dataToStore&&($.embed.embedContent=dataToStore);}};$.fn.embed=function(){return $(this).bind('click',function(){var $this=$(this),id=$this.data('embedid');if(id&&$.embed.embedContent[id]){$this.after($.embed.embedContent[id]);$this.css('display','none');return false;}});};})(jQuery);(function($)
{'use strict';$.shareMail={config:{id:null},init:function()
{var $this=$(this);$.shareMail.microTemplateInit();$.shareMail.config.title=$this.attr('data-title');$.shareMail.config.url=$this.attr('data-url');$('<div>').addClass('form formError shareMailForm ccmcss_form ccmcss_form--w40').append($('<form>').submit(function(){return false;}).append($('<div>').addClass('ccmcss_form__line grid_line jFormLine').append($('<div>').addClass('grid_left').append($('<label>').attr({'for':'email'}).html($.shareMail.langs[$.shareMail.lang].DELIVERY_EMAIL)),$('<div>').addClass('grid_last').append($('<input>').attr({'type':'text','name':'email','id':'email','size':50,'placeholder':$.shareMail.langs[$.shareMail.lang].DEFAULT_EMAIL}).addClass('input'),$('<div>').attr({id:'errors'}).css({display:'none'}).addClass('errorMsg ccmcss_form__msg'))),(($data.expeert.uid===0)?($('<div>').addClass('ccmcss_form__line grid_line jFormLine').append($('<div>').addClass('grid_left').append($('<label>').attr({'for':'name'}).html($.shareMail.langs[$.shareMail.lang].SENDER_NAME)),$('<div>').addClass('grid_last').append($('<input>').attr({'type':'text','name':'name','id':'name','size':50}))),$('<div>').addClass('ccmcss_form__line grid_line jFormLine').append($('<div>').addClass('grid_left').append($('<label>').attr({'for':'from'}).html($.shareMail.langs[$.shareMail.lang].SENDER_EMAIL)),$('<div>').addClass('grid_last').append($('<input>').attr({'type':'text','name':'from','id':'from','size':50})))):''),$('<div>').addClass('ccmcss_form__line grid_line jFormLine').append($('<div>').addClass('grid_left').append($('<label>').attr({'for':'msg'}).html($.shareMail.langs[$.shareMail.lang].DELIVERY_MESSAGE)),$('<div>').addClass('grid_last').append($('<textarea>').attr({'name':'msg','cols':67,'id':'msg','rows':5}))))).dialog({modal:true,resizable:false,width:500,buttons:[{text:$.shareMail.langs[$.shareMail.lang].CANCEL,click:function()
{$(this).dialog("destroy");}},{text:$.shareMail.langs[$.shareMail.lang].SEND,click:function()
{$.shareMail.submit($(this));}}]});},submit:function($form)
{var $email=$form.find('#email'),$error=$form.find('#errors');$.ajax({type:'POST',dataType:'json',url:$data.expeert.baseUrl+'/c/sharemail/',data:{email:($email.val()!==$email.data('default'))?$email.val():'',msg:$form.find('#msg').val(),from:(typeof $form.find('#from')!=='undefined')?$form.find('#from').val():'',name:(typeof $form.find('#name')!=='undefined')?$form.find('#name').val():'',xhr:true,url:$.shareMail.config.url,title:$.shareMail.config.title},success:function(response)
{$error.empty().hide();if(typeof response.mailSend!=='undefined')
{if(response.mailSend===true)
{$form.dialog("destroy");}
else{$error.html(response.errors.msg).show()
$email.val(response.errors.notsend);}}}});return false;}};$.extend($.shareMail,$.microTemplate);$(document).start(function()
{$(document).on('click','.jShareMail',$.shareMail.init);});})(jQuery);(function($)
{'use strict';$.toggleBlock={init:function()
{var $this=$(this),dataBlock=$this.attr('data-block'),parent=$this.attr('data-parent')||'div';typeof dataBlock!='undefined'&&$this.closest(parent).find(dataBlock).toggle();}};$(document).start(function()
{$(document).on('click','.jDisplayBlock',$.toggleBlock.init);$('.jDisplayBlock').each(function(index,elt){var $elt=$(elt),dataBlock=$elt.attr('data-block'),parent=$elt.attr('data-parent')||'div';if($elt.attr('data-block-hide')=='true'){typeof dataBlock!='undefined'&&$elt.closest(parent).find(dataBlock).css('display','none');}});});})(jQuery);(function($)
{'use strict';var init=function()
{var	$this=$(this),self=this,$divName=$this.find('.divName'),$btn=$this.find('button');$.fn.nlCreateUser.microTemplateInit();$this.submit(function()
{return false;}).find('input[type=email]').bind('typeEmailValid',function()
{$divName.show();$btn.removeClass('app_btn__disabled');}).bind('typeEmailInvalid',function()
{$divName.hide();$btn.addClass('app_btn__disabled');});$btn.on('click',function(){submit.call(self);});},submit=function()
{var	$this=$(this),$btn=$this.find('button');$this.hideFormError();if(!$btn.hasClass('app_btn__disabled'))
{var getValue=function(name)
{var $input=$this.find(name);if($input.length!=0&&$input.data('default')!=$this.find(name).val()){return $input.val();}
return undefined;};$.ajax({type:'POST',dataType:'json',url:$data.expeert.baseUrl+'/u/_xhr_createUserFromHome/',data:{'email':getValue('.email'),'public_name':getValue('.public_name'),'first_name':getValue('.first_name'),'last_name':getValue('.last_name')},success:function(response)
{if(typeof response.errors!='undefined')
{for(var i in response.errors)
{$this.find('.'+i).showInputError(response.errors[i]);}}
else if(typeof response.success!='undefined')
{$this.replaceWith($.fn.nlCreateUser.getTemplate('$l{FIRSTSENTENCE}<br>$l{SECONDSENTENCE}<br>$l{THIRDSENTENCE}'));setTimeout(function()
{location.reload(true);},3000);}}});}
else{$this.find('.email').showInputError($.fn.nlCreateUser.langs[$.fn.nlCreateUser.lang].INCORRECTEMAIL);}
return false;};$.fn.nlCreateUser=function()
{if($data.expeert.uid==0)
{return this.each(function()
{if(this.tagName=='FORM')
{init.call(this);}
else{$.jet.env.dev&&console.warn('nlCreateUser can\'t be instanciated on something else than a form.');}});}};$.extend($.fn.nlCreateUser,$.microTemplate);}(jQuery));(function($)
{$.more={option:{ajaxParams:{xhr:1},isotope:false,pageParamName:'page'},noNextPage:function(el){el.remove();}};$.fn.more=function()
{return this.on('click',function(e)
{var $this=$(this),url=$this.attr('href'),ajaxData=$.more.option.ajaxParams;if(typeof url==='undefined')
{return true;}
e.preventDefault();e.stopPropagation();if(!$this.data('nextpage'))
{$this.data('nextpage',2);}
ajaxData[$.more.option.pageParamName]=$this.data('nextpage');$.ajax({type:'GET',url:$this.attr('href'),dataType:'json',data:ajaxData,success:function(data)
{var target=$this.data("target"),$target=false;if(data.error){$.note&&$.note.error(data.error);return;}
if(typeof target==='undefined'||($target=$(target)).length===0)
{$target=$this.parent();}
if($.more.option.isotope===true&&typeof data.items!=='undefined')
{var $elementList=$('<div>'),$children;for(var key in data.items){if(!data.items.hasOwnProperty(key)){continue;}
$elementList.append($(data.items[key]));}
$children=$elementList.children();$target.closest('.isotope').append($children).isotope('appended',$children);}
else{$target.before(data.html);}
if(typeof data.nextpage==='int'){$this.data('nextpage',data.nextpage);}else if((typeof data.nextpage==='boolean'&&data.nextpage===false)||typeof data.nextpage==='undefined'){$.more.noNextPage($this);}else{$this.data('nextpage',$this.data('nextpage')+1);}}});return true;});};})(jQuery);(function($)
{$.editUserDatas={init:function()
{$(document).on('click','.jChangeImg',$.editUserDatas.changeImgActions);},changeImgActions:function()
{var $this=$(this),imgUrl=$this.attr('src'),$container=$this.closest('label.jAvatarContainer');$('.jSelectedImg').removeClass('jSelectedImg');$container.addClass('jSelectedImg');setTimeout(function()
{$container.removeClass('jSelectedImg');},3000);$('.jUserPicture').attr('src',imgUrl);}};$(document).start(function()
{_$('$data.services.editUserDatas')._.start&&$.editUserDatas.init();});})(jQuery);(function($)
{'use strict';$.fn.ccmtabResponsiveTransformer=function()
{var $body=$('body');this.each(function()
{var onResize=function()
{$(document).unbind('resizedWindow',onResizedWindow);$self.off('resizeTabs',onResize);$navList.replaceWith($SavedList);$self.ccmtabResponsiveTransformer();},onResizedWindow=function()
{$self.trigger('resizeTabs');},$self=$(this).on('resizeTabs',onResize),selfWidth=$self.width(),$navList=$self.find('ul:not(.03)').first(),$SavedList=$navList.clone(true,true);$(document).bind('resizedWindow',onResizedWindow);$self.css('overflow','visible');if($navList.length>1)
{return;}
var tabsRealWidth=0;$navList.find('> li:not(.jDropdownlist, .app_nav_tab__more_btn)').each(function(index,value)
{tabsRealWidth+=$(value).outerWidth();});if(tabsRealWidth>selfWidth)
{var currentWidth=0,newWidth=0,$dropDownList=$('<li>').addClass('jDropdownlist app_nav_tab__more_box').append('<ul>').hide(),dropDownListHasItem=false,onBodyClicked=function()
{$dropDownList.hide();$body.off('click',onBodyClicked);},$btn=$('<a>').attr({'aria-hidden':'true','data-icon':'$'}).html('<span>Plus</span>').on('click',function(event)
{event.stopPropagation();if($dropDownList.css('display')=='none')
{$dropDownList.css({display:'inline-block'});}else{$dropDownList.css({display:'none'});$body.on('click',onBodyClicked);}}),$li=$('<li>').addClass('app_nav_tab__more_btn').append($btn),maxWidth=selfWidth;$navList.addClass('jResponsiveTab').append($li);maxWidth-=$li.outerWidth();$li.detach();$navList.children('li:not(.jDropdownlist, .app_nav_tab__more_btn)').each(function(index,value)
{newWidth=$(value).outerWidth()+currentWidth;if(dropDownListHasItem==true||newWidth>=maxWidth){$(value).detach().appendTo($dropDownList.find('ul').first()).find('a').on('click',function(){$dropDownList.hide();});dropDownListHasItem=true;}else{currentWidth=newWidth;}});$self.find('nav').css('overflow','hidden');if(dropDownListHasItem==true){$navList.append($li);$navList.append($dropDownList);}}});};})(jQuery);(function($){'use strict';$.fn.editDescUser=function(options){options=$.extend(true,{},$.fn.editDescUser.defaultOptions,options);return this.each(function(){var $this=$(this),$desc=$this.clone(),url=$this.attr('data-url');if(url!=='undefined'){$this.on('click',options.selector,function(){$.ajax({type:'POST',dataType:'json',url:url,success:function(data){if(typeof data.html!=='undefined'){$this.html(data.html);$this.find('.jButtonClose').on('click',function(e){e.preventDefault();e.stopPropagation();$(this).parents('form').html($desc);});}}});});}});};$.fn.editDescUser.defaultOptions={selector:'.jEditDescUserAction'};})(jQuery);(function($){$.fn.groupNotificationButton=function(){$(this).each(function(){var $button=$(this);$button.on('click',function(){$.ajax({url:'/g/xhr_toggleNotificationGroup?groupId='+$(this).attr('data-groupId'),data:{xhr:1},type:'json',success:function(data){if(data.status==='success'){var buttonAttrActivated=0,buttonLabel='',buttonClass='';if(data.activated===true){buttonAttrActivated=1;buttonLabel='Activated';buttonClass='app_btn_notification--on';}else{buttonAttrActivated=0;buttonLabel='Disabled';buttonClass='app_btn_notification--off';}
$button.attr('data-activated',buttonAttrActivated).removeClass('app_btn_notification--on').removeClass('app_btn_notification--off').addClass(buttonClass).children().text(buttonLabel)}else{$.note.error(data.msg);}}});});});};$(document).start(function(){$('.jUserGroupNotificationButton').groupNotificationButton();});})(jQuery);(function($)
{$.actionSocial={init:function()
{$.actionSocial.microTemplateInit();$('body').on('click','.jFollowUserDefault , .followUserSuggest, .followUserTiny',$.actionSocial.followUserDefault).on('click','.jFollowGroup, .jFollowGroupSelection',$.actionSocial.followGroupDefault);},socialAction:function(e,success,options)
{var $target=$(this),tid=$target.attr('data-tid'),aid=$target.attr('data-aid'),listType=$target.attr('data-listType');options=$.extend(true,{url:$data.expeert.baseUrl+'/p/_xhr_start_action',data:{xhr:1,action:aid,id:tid,listType:listType}},options);aid!==''&&tid!==''&&$.ajax({type:'post',url:options.url,data:options.data,dataType:'json',success:function(data){success.call($target,data,tid,aid,listType);}});},commonGroupFollow:function(tid,aid,data,listType)
{typeof $data.expeert.groups!=='undefined'&&typeof $data.expeert.groups[tid]!=='undefined'&&($data.expeert.groups[tid].fld=(aid==='followgroup'?1:0));var eventOptions={counterOptions:{from:this,to:'.counterGroups',value:(aid==='followgroup'?'+1':'-1')}},buttonClassG='app_btn_action--on',buttonClassE='app_btn_action--off';if(aid==='followgroup'||aid==='followgroups')
{eventOptions.noteOptions={text:$.actionSocial.getTemplate($.actionSocial.langs[$.actionSocial.lang].FOLLOWGROUP_SUGGEST,$.extend({},{url:($data.expeert.conf.enableUserProfile===true?$data.expeert.baseUrl+'/p/user/'+$data.expeert.user.username+'/group':''),name:data.name}))};$('a.jFollowGroup[data-tid='+tid+']').addClass(buttonClassG).removeClass(buttonClassE).attr('data-aid',data.newAction);$('a.jFollowGroup[data-tid='+tid+']').html($.actionSocial.langs[$.actionSocial.lang].UNFOLLOWGROUP);$('a.jFollowGroupSelection[data-tid='+tid+']').closest('li').show();}
else{$('a.jFollowGroup[data-tid='+tid+']').addClass(buttonClassE).removeClass(buttonClassG).attr('data-aid',data.newAction);$('a.jFollowGroup[data-tid='+tid+']').html($.actionSocial.langs[$.actionSocial.lang].FOLLOWGROUP);$('a.jFollowGroupSelection[data-tid='+tid+']').closest('li').hide();}
$(document).trigger('ccmUIEvent',['group_follow',eventOptions]);if(listType==='annuary'&&typeof data.related!=='undefined')
{aid==='followgroup'&&$('div#divGroup'+tid+' div.lastBloc').after(data.related);aid==='unfollowgroup'&&$('div#divGroup'+tid+' div.lastBloc').next().remove();}
if(window.document.URL.match(/\/p\/groups\//i)!==null)
{$.groups.addRemoveLineToColRight(tid,aid,$('a.tinyGroup[data-tid='+tid+']:first').attr('href'));var
$counter=$('#nb'+tid+' span'),counter=parseInt($counter.html());$counter.html((aid==='followgroup'?++counter:--counter));}
$.ajaxLocalCacheDefaultOptions.localStorage&&(localStorage.setItem('groupProfileL',JSON.stringify({})),localStorage.setItem('groupCatL',JSON.stringify({})),localStorage.setItem('groupSearchL',JSON.stringify({})));},followGroupDefault:function(e)
{e.preventDefault();$.actionSocial.socialAction.apply(this,[e,function(data,tid,aid,listType)
{$.actionSocial.commonGroupFollow.call(this,tid,aid,data,listType);},{url:$data.expeert.baseUrl+'/g/xhr/?xhr'}]);},followUserDefault:function(e)
{e.preventDefault();$.actionSocial.socialAction.apply(this,[e,function(json,tid)
{var fld=(json.newAction===16);typeof $data.expeert.users!=='undefined'&&typeof $data.expeert.users[tid]!=='undefined'&&($data.expeert.users[tid].fld=fld);if(json.ltext)
{$('.jFollowUserDefault[data-tid='+tid+'], .jFollowUser[data-tid='+tid+'], .followUserTiny[data-tid='+tid+'],.followUserSuggest[data-tid='+tid+']').toggleClass('app_btn_action--off app_btn_action--on').text(json.ltext).attr('data-aid',json.newAction).blur();}
$(document).trigger('ccmUIEvent',['following_add',{counterOptions:{from:this,to:'.counterFollowing',value:(json.newAction===16?'+1':'-1')}}]);if($data.expeert.actionActivatedByScreenType.tinyProfile===true){$('.tinyProfile[data-tid='+tid+']').data('tinyProfile',false);}}]);}};$.extend($.actionSocial,$.microTemplate);$(document).start(function()
{$.actionSocial.init();});})(jQuery);(function($)
{$(document).start(function()
{var socialAction=function(success,options)
{var $target=$(this),tid=$target.attr('data-tid'),aid=$target.attr('data-aid'),listType=$target.attr('data-listType');options=$.extend(true,{url:$data.expeert.baseUrl+'/p/_xhr_start_action',data:{xhr:1,action:aid,id:tid,listType:listType}},options);$.ajax({type:'post',url:options.url,data:options.data,dataType:'json',success:function(data){success.call($target,data,tid,aid,listType);}});};$('body').on('click','.jDeleteUser',function showModaleDeleteMember(){$.core.$fake[0]=this;$('#jConfirmDeleteUserModal_'+$.core.$fake.attr('data-tid')).fadeIn(150);}).on('click','.jCloseDeleteUserModal',function showModaleDeleteMember(){$.core.$fake[0]=this;$('#jConfirmDeleteUserModal_'+$.core.$fake.attr('data-tid')).fadeOut(150);}).on('click','.jConfirmDeleteUserModal',function deleteMember(){$.core.$fake[0]=this;$('#jConfirmDeleteUserModal_'+$.core.$fake.attr('data-tid')).fadeOut(150);socialAction.apply(this,[function(data){if(data.deleted===true){document.location.reload();}},{url:$data.expeert.baseUrl+'/p/xhr_toggle_del_user/?xhr',data:{tid:$.core.$fake.attr('data-tid')}}]);});});})(jQuery);(function($)
{$(document).start(function()
{$('.editorialMultiple').parent().dropDownBtn();$('body').on('click','button.saveDraft',function saveDraft(e){e.preventDefault();e.stopPropagation();$.core.$fake[0]=this;$.core.$fake.closest('.contentForm').trigger('draft');});$('body').on('click','.filterPending',function filterPending(e){e.preventDefault();e.stopPropagation();var self=$(this),_on=self.hasClass('filterOn');$.ajax({url:$data.expeert.urlPrefixModule,data:{xhr:1,fp:+!_on},dataType:'json',success:function(data){$('#topics').html(data.html);if(_on)
{self.removeClass('filterOn').find('a').html(self.attr('data-on'));}
else{self.addClass('filterOn').find('a').html(self.attr('data-off'));}}});});});})(jQuery);(function($)
{$(document).start(function()
{var timelineAction=function(e,success){var $target=$(this),$timelineAction=$target.closest('.tlAction'),aid=$target.attr('data-aid'),uid=$timelineAction.attr('data-uid'),cod=$timelineAction.attr('data-cod'),typ=$timelineAction.attr('data-typ'),sid=$timelineAction.attr('data-sid'),tid=$timelineAction.attr('data-tid');$.ajax({type:'post',url:$data.expeert.baseUrl+'/p/_xhr_setting',dataType:'json',data:({aid:aid,uid:uid,cod:cod,typ:typ,sid:sid,tid:tid}),success:function(data){success.apply($target,[data]);}});},refreshTimeline=function(json)
{if(!json){return;}
$('.tlList').html(json.html)&&$(document).trigger('refresh');if(json.cntha===null)
{$('.tlHidden').fadeOut(100);}else{if(json.cntha>0){if(json.cntha>=100){(json.cntha=100)&&($('.tlHiddenPlus').show());}
else{$('.tlHiddenPlus').hide();}
$('.counterTlHidden').html(json.cntha);$('.tlHidden').fadeIn(100);}}};$('body').on('click','#whatsNext .icoClose',function(){var $this=$(this);$.ajax({type:'post',url:$data.expeert.baseUrl+'/p/_xhr_setting',dataType:'json',data:({aid:9,notReturnWall:true}),success:function(){$this.parent().slideUp(150);}});});$('body').on('click','.tlFilter a',function applySetting(e){timelineAction.apply(this,[e,function(json){refreshTimeline(json);var $li=this.parent();if($li.hasClass('selected')){$li.removeClass('selected');}
else{$li.addClass('selected');}}]);e.preventDefault();});$('body').on('mouseenter','.tlAction',function dropDownOptionsShow()
{$(this).find('.icoOptions').show();});$('body').on('mouseleave','.tlAction',function dropDownOptionsHide()
{var $this=$(this);!$this.hasClass('deleted')&&$this.find('.icoOptions').hide().next().filter(':visible').toggle();});$(document).bind('refresh initTimeline',function(){$('div.tlFilterAction').dropDownBtn({beforeOpen:function dropDownOptionsOpen(container){container.html()===''&&container.html('<div class="pad5 txtC"><img src="'+$data.common.assetUrl+'/'+$data.common.assetDomain+'/skin/common/img/loadingS.gif"></div>');timelineAction.apply(this,[null,function(json){container.html(json.html).find('a').bind('click',function applySetting(e){timelineAction.apply(this,[e,function(json){refreshTimeline(json);}]);e.preventDefault();});}]);}});});$(document).trigger('initTimeline');});})(jQuery);(function($)
{var expeert={msgs:{},lang:'EN'};expeert.core={cbHandlers:[],init:function()
{$('body').on('click','a,button',this.onClick);$(document).ready(function()
{$('#globalmsg').ajaxStart(function()
{$ec._error=false;(!$.ajaxSettings.discrete)&&$(this).html('<span>'+$e.msgs[$e.lang].ajaxStart+'</span>').show();$.ajaxSettings.discrete=false;}).ajaxError($ec.formError).ajaxStop(function()
{(!$ec._error)&&$(this).delay(750).fadeOut();}).click(function()
{$(this).delay(100).fadeOut();});});},formError:function(event,xhr)
{$ec._error=true;$(this).html('<span class="error"><a href="#top">'+xhr.responseText+'</a></span>').show();},onClick:function(event)
{var $this=$(this),aid=$this.attr('actid'),aide=['tt'];if(!aid||$.inArray(aid,aide)>-1)
{return true;}
var _ret=false;switch(aid)
{default:if($ec.cbHandlers.click){for(var key in $ec.cbHandlers.click)
{_ret=$ec.cbHandlers.click[key].handler.call($this,event,aid,$ec.cbHandlers.click[key].data);}
$.debug(_ret);}else{_ret=true;}}
if(!_ret){event.preventDefault();}
return _ret;},on:function(eventType,handler,data){eventType=eventType||'click';if($.isFunction(handler)){this.cbHandlers[eventType]=this.cbHandlers[eventType]||[];return(this.cbHandlers[eventType].push({handler:handler,data:data})-1);}
return false;},off:function(eventType,id)
{if(typeof(this.cbHandlers[eventType])!=='undefined'&&typeof(this.cbHandlers[eventType][id])!=='undefined')
{return delete(this.cbHandlers[eventType][id]);}
return false;}};$e=expeert;$ec=$e.core;})(jQuery);(function($)
{try{$data.services.contents;}catch(e){typeof $data==='undefined'&&($data={});typeof $data.services==='undefined'&&($data.services={});typeof $data.services.contents==='undefined'&&($data.services.contents={});}
finally{$data.services.contents=$.extend({content:{common:{view:{start:true},form:{start:false},common:{start:false}},blog:{view:{start:false},form:{start:false},common:{start:false}}}},$data.services.contents);}
$.contents={init:function()
{this.microTemplateInit();},users:{settings:{AUTO_FOLLOW:'7',NEVER_FOLLOW:'8'}},type:{POST:'1',JSON:'10',COMMENT:'3'},counter:{FOLLOW:'3'},mode:{INSERT:'0',UPDATE:'1'},confs:{},fields:{},events:{}};$.extend($.contents,$.microTemplate);$.contentForm={defaultConfig:{fields:['title'],tagName:'FORM',mode:'0',onlyActive:false,anyHighlight:false,showTag:true,useDefaultTag:true,validateAnyActive:true,suggestFollowContent:false},forms:[],loadTimer:0,startLoader:function()
{$.contentForm.loadTimer=setTimeout(function()
{$('body').addClass('app_loader__overlay').prepend('<img class="app_loader__gif" src="'+$data.common.assetUrl+'/'+$data.common.assetDomain+'/skin/common/img/loading.gif">');},200);},stopLoader:function()
{$('body').removeClass('app_loader__overlay');$('.app_loader__gif').remove();clearTimeout($.contentForm.loadTimer);},form:function(element)
{this.config=null;this.ctype=null;this.titleMaxLength=150;this.$element=$(element);this.init=function()
{var self=this,$self=$(this);this.$element.on('click','button[actid],a[actid]',function(e)
{e.preventDefault();e.stopPropagation();var $this=$(this);$this.attr('disabled','disabled');self.$element.trigger($this.attr('actid'),[false,$this]);return false;}).on('click','.jButtonClose',function(e)
{e.preventDefault();e.stopPropagation();if(self.config.mode===$.contents.mode.UPDATE){self.restore(null);}else{self.close();}
$(this).attr('disabled','disabled');return false;}).on('click','.jButtonPreview',function(e)
{e.preventDefault();e.stopPropagation();if(self.validate(e)===false){return;}
$.ajax({type:'POST',url:$(this).attr('url')+'?xhr',data:self.oldToStructVal(self.$element),dataType:'json',success:function(html)
{$('div.jContentPreview').remove();var
$htmlPreview=$(html.preview).addClass('jContentPreview'),$formContainer=self.$element.closest('.jFormContainer');if($formContainer.length>0)
{$formContainer.before($htmlPreview);$.scrollTo($htmlPreview,{axis:'y',offset:{top:-100},duration:250});}
return false;}});return false;}).bind('save draft',function(e,data,$originalTarget)
{$.contentForm.startLoader();self.disable();if(!self.validate(e))
{self.enable();$('button[actid],a[actid]').removeAttr('disabled');$.contentForm.stopLoader();return false;}
self.$ccmPaginator&&$.extend(data,{orderedItems:self.$ccmPaginator.data('paginatorData').orderedItems});var postData=self.oldToStructVal(self.$element,true,data),urlAjax='',urlPost=self.$element.attr('action');if(!postData)
{$.contentForm.stopLoader();return false;}
urlAjax=(urlPost.indexOf('?')===-1)?urlPost+'?xhr&actid='+e.type:urlPost+'&xhr&actid='+e.type;$.ajax({type:'POST',url:urlAjax,data:postData,dataType:'json',error:function()
{$.contentForm.stopLoader();self.enable();},success:function(r)
{window.onbeforeunload=null;$.contentForm.stopLoader();switch(''+self.config.mode){case $.contents.mode.UPDATE:if(r.url){window.location=r.url;}else{if(typeof self.config.success==='function')
{self.config.success.call(self,r);}else{self.restore(r.html,r.id);r.t&&$('div.tagslist').html(r.t).css('visibility','visible');}}
break;case $.contents.mode.INSERT:switch(self.ctype){case $.contents.type.POST:case $.contents.type.JSON:if(r.url){window.location.href=r.url;}else{self.$element.html(r.str.success);}
break;case $.contents.type.COMMENT:if(typeof self.config.success==='function')
{self.config.success.call(self,r,$originalTarget.attr('acttgt'));}
else{self.close();if(typeof r.rating!==undefined){$('.jOpenCommentToRating').parent().html(r.rating);}
if(r.reload===true){window.location.reload();}
$("div#"+$originalTarget.attr('acttgt')).append(r.str.comment);$("a[actid='toggleCmt']").show();$("h3#nb_comments").show().html(r.str.nbcomment);}
$self.contentBindBehavior();break;}}
$(document).trigger('refresh');return false;}});return false;});$(window).on('beforeunload',function(){var wasEdited=false;if(typeof(CKEDITOR)!=='undefined')
{$.each(CKEDITOR.instances,function(k,v){if(v.getData().trim().length>0){wasEdited=true;}});}
$('[contenteditable=true]').each(function(k,v)
{if($(v).text().trim().length>0)
{wasEdited=true;}});if(wasEdited===true){if(confirm){return'';}}});self.enable();this.config.fields.push('ctype');this.ctype=this.$element.find('.ctype').val();if(typeof this.config.editing==='undefined')
{this.config.editing=this.$element.closest('.hasId');}
$("input[type=checkbox]").ccmCheckbox();for(var f in this.config.fields)
{var name=(typeof this.config.fields[f]==='object')?this.config.fields[f].name:this.config.fields[f];switch(name){case'tags':$.contents.fields.tags.init.call(this,this.config.fields[f]);break;case'title':$.contents.fields.title.init.call(this,this.config.fields[f]);break;case'contentCKEditor':$.contents.fields.contentCKEditor.init.call(this,this.config.fields[f]);break;case'ctype':break;default:typeof this.config.fields[f]==='object'&&typeof this.config.fields[f].init==='function'&&this.config.fields[f].init.call(this,this.config.fields[f]);break;}}};this.enable=function(){this.$element.find('[actid=save], button.jButtonPreview, button.saveDraft').removeClass('buttonSel');};this.disable=function(){this.$element.find('[actid=save],button.jButtonPreview, button.saveDraft').addClass('buttonSel');};this.close=function(){this.$element.contentFormRemove();this.config.editing.find(':visible').remove();(this.config.mode===$.contents.mode.INSERT)&&this.$element.closest('.editing:visible').remove();$("div.preview").remove();};this.restore=function(html,id)
{this.close();if(html!==null)
{if(this.config.editing.hasClass('sliderContainer')&&typeof id!=='undefined')
{this.config.editing.removeClass('editing').find('.slideItem[data-id='+id+']').html(html);this.config.editing.find(':hidden').show();}
else{this.config.editing.removeClass('editing').empty().html(html);}}
else{this.config.editing.removeClass('editing').children().show();}
this.config.editing.contentBindBehavior();};this.validate=function(data)
{data=this.oldToStructVal(this.$element,true,data);var errors=[],fields=this.config.fields.slice(0);for(var f in fields)
{var name=(typeof fields[f]==='object')?fields[f].name:fields[f];switch(name){case'tags':!$.contents.fields.tags.validate.call(this,fields[f])&&errors.push($.contents.fields.tags.validate);break;case'title':!$.contents.fields.title.validate.call(this,fields[f])&&errors.push($.contents.fields.title.validate);break;case'url_title':var $urlTitle=this.$element.find('[name=url_title]'),urlTitle=$.trim($urlTitle.val());if($urlTitle.length>0&&urlTitle==='')
{$urlTitle.css({border:'1px dashed #E01616'}).parent().parent().css({border:'1px solid #E01616'}).find('.titleError').show();errors.push('url_title');}
else
{$urlTitle.css({border:'1px dashed transparent'}).parent().parent().css({border:'1px solid transparent'}).find('.titleError').hide();}
break;case'contentCKEditor':!$.contents.fields.contentCKEditor.validate.call(this,fields[f])&&errors.push($.contents.fields.contentCKEditor.validate);break;default:if(typeof data[name]!=="undefined"){typeof fields[f]==='object'&&typeof fields[f].validate==='function'&&!fields[f].validate.call(this,fields[f])&&errors.push(fields[f].validate);}
break;}}
$.profile&&console.group('content.validate');$.profile&&console.info('Fields : ',fields);$.profile&&errors.length!==0&&console.warn('Invalid :',errors);$.profile&&console.groupEnd();return errors.length===0;};this.oldToStructVal=function(form,save,data){var cnt=[];if(typeof this.config.cnt==='function')
{cnt=this.config.cnt.call(this,form,data);if(cnt){return $.extend(true,data,cnt);}
return false;}
var ces=this.toStructElmt(form);return $.extend(true,{id:ces.id.val(),parentx:this.config.parentxupd||((ces.parentx.val()!=='')?ces.parentx.val():undefined),parent:ces.parent.val(),module_id:ces.module_id.val(),title:ces.title.val(),content:ces.contentCkEditor.val(),email:ces.email.val()!==''?ces.email.val():undefined,password:ces.password.val()!==''?ces.password.val():undefined,referer:ces.referer.val()!==''?ces.referer.val():undefined,content_type:ces.content_type.val(),url_final:ces.url_final.val(),url_title:ces.url_title.val(),url_resume:ces.url_resume.html()?ces.url_resume.html():undefined,publication_date:(ces.publication_date.val()!=='')?ces.publication_date.val():undefined,publication_time:(ces.publication_time.val()!=='')?ces.publication_time.val():undefined,url_image_src:ces.url_image_src.val(),urlNoImage:ces.urlNoImage.length,contentToken:(ces.contentToken.val()!=='')?ces.contentToken.val():undefined,screenName:(ces.screenName.val()!=='')?ces.screenName.val():undefined,sponsorship:(ces.sponsorship.val()!=='')?ces.sponsorship.val():undefined,player_html:(ces.player_html.val()!=='')?ces.player_html.val():undefined,player_height:(ces.player_height.val()!=='')?ces.player_height.val():undefined,player_width:(ces.player_width.val()!=='')?ces.player_width.val():undefined,player_url:(ces.player_url.val()!=='')?ces.player_url.val():undefined,player_provider:(ces.player_provider.val()!=='')?ces.player_provider.val():undefined,date_year_event:(ces.date_year_event.val()!=='')?ces.date_year_event.val():undefined,location_name:(ces.location_name.val()!=='')?ces.location_name.val():undefined,location_id:(ces.location_id.val()!=='')?ces.location_id.val():undefined,latitude:(ces.latitude.val()!=='')?ces.latitude.val():undefined,longitude:(ces.longitude.val()!=='')?ces.longitude.val():undefined,star1:(ces.star1.val()!==''&&ces.star1.val()!=='undefined')?ces.star1.val():undefined,comment:(ces.comment.val()!==''&&ces.comment.val()!=='undefined')?ces.comment.val():undefined,isbn:(ces.isbn.val()!==''&&ces.isbn.val()!=='undefined')?ces.isbn.val():undefined,bookName:(ces.bookName.val()!==''&&ces.bookName.val()!=='undefined')?ces.bookName.val():undefined},data);};this.toStructElmt=function($form)
{return({id:$form.find('[name=id]'),parentx:$form.find('.parentx'),parent:$form.find('.parent'),module_id:$form.find('.module_id'),title:$form.find('.title'),contentCkEditor:$form.find('[name=content]'),email:$form.find('.email'),password:$form.find('.password'),referer:$form.find('[name=referer]'),content_type:$form.find('.ctype'),tagsList:$form.find('input.tags'),publication_date:$form.find('.publicationDate'),publication_time:$form.find('.publicationTime'),url_final:$form.find('[name=url_final]'),url_title:$form.find('[name=url_title]'),url_resume:$form.find('[name=url_resume]'),url_image_src:$form.find('[name=url_image_src]:checked'),urlNoImage:$form.find('[name=urlNoImage]:checked'),contentToken:$form.find('[name=contentToken]'),screenName:$form.find('[name=screenName]'),sponsorship:$form.find('[name="sponsorship"]'),email:$form.find('[name=email]'),player_html:$form.find('[name=player_html]'),player_height:$form.find('[name=player_height]'),player_width:$form.find('[name=player_width]'),player_url:$form.find('[name=player_url]'),player_provider:$form.find('[name=player_provider]'),date_year_event:$form.find('[name=date_year_event]'),location_name:$form.find('[name=location_name]'),location_id:$form.find('[name=location_id]'),latitude:$form.find('[name=latitude]'),longitude:$form.find('[name=longitude]'),star1:$form.find('[name=star1]:checked'),comment:$form.find('[name=comment]'),isbn:$form.find('[name=isbn]'),bookName:$form.find('[name=bookName]')});};}};$.fn.contentFormRemove=function()
{return this.each(function()
{var self=$(this),id=self.attr('formid');if(typeof(id)!=='undefined')
{typeof $ec!=='undefined'&&$ec.off('click',$.contentForm.forms[id].idDelegation);delete($.contentForm.forms[id]);}});};$.fn.contentForm=function(config)
{var oConf=config;config=$.extend(true,{},$.contentForm.defaultConfig,config);if($.isArray(oConf.fields)&&oConf.fields.length===0){config.fields=[];}
$.evalOptions(config);return this.each(function()
{if(this.tagName===config.tagName)
{$.profile&&console.log('Start editor form',this);var id=$.contentForm.forms.push(new $.contentForm.form(this))-1;$(this).attr('formId',id);$.contentForm.forms[id].config=config;$.contentForm.forms[id].init();}else{$.profile&&console.warn('Tag does not match',this,config);}});};$.fn.contentCommonView=function()
{return this.each(function()
{var $this=$(this);$this.contentBindBehavior();$this.find('div.ui-pnotify-closer').bind('click',function(){$(this).closest('div.ui-pnotify').hide('slow');});var $editBtn=$('.editContent[data-id='+$this.attr('data-id')+']');if(!$editBtn.hasClass('binded')){$editBtn.bind('click',function()
{$.ajax({type:'POST',dataType:'json',url:$data.common.baseUrl+'/c/update',data:{ctype:0,id:$(this).attr('data-id'),xhr:1},success:function(data){$editBtn.hide();data.conf.mode=$.contents.mode.UPDATE;data.conf.success=function(res)
{$editBtn.show();$this.html(res.html);};data.conf=$.extend(true,{},$.contentForm.defaultConfig,data.conf);$this.html(data.html).find(data.conf.tagName).contentForm(data.conf);}});}).addClass('binded');}
$(document).bind('codeSnippetReady',function(){$this.find('pre').codeSnippet();}).trigger('contentCommonView',[$this]);});};$.fn.contentBindBehavior=function()
{return this.each(function()
{var $this=$(this);if(!$this.hasClass('contentBehavior'))
{$this.addClass('contentBehavior').on('click dblclick','.content a.edit',$.fn.contentBindBehavior.showForm).on('dblclick','.hasId[editable]',$.fn.contentBindBehavior.showForm).find('.hasId[editable], .content a.edit').tipsy({title:function(){return $.contents.langs[$.contents.lang].COMMON_DBLCLICK_TO_EDIT;},gravity:'s',delayIn:100,fade:false});$this.find('a.icoOptions[title]').tipsy({gravity:'s',delayIn:100,fade:false});}});};$.fn.contentBindBehavior.showForm=function(e)
{var mask=(function(){var $body=$('body');return $('<div class="disabled"></div>').css({position:'absolute',top:'0px',left:'0px',height:$body.css('height'),opacity:'0','background-color':'#fff'}).animate({opacity:0.5},100).appendTo($body);})(),$this=$(this),$editing=!$this.hasClass('hasId')?$this.closest('.hasId'):$this,lctype=$editing.attr('id').charAt(0),$target=$(e.target),ctype;if(!$this.hasClass('editing')&&!$target.hasClass('contenteditable'))
{$this.tipsy("hide");switch(lctype){case'p':ctype=$.contents.type.POST;$('div.tagslist').css('visibility','hidden');break;case'c':ctype=$.contents.type.COMMENT;break;}
$.ajax($.extend({type:'POST',url:$editing.attr('editable')+'?xhr&id='+($editing.attr('id').replace(/[^\d]/g,''))+'&ctype='+ctype,success:function(data)
{$editing.unbind().addClass('editing').children().hide();$.fn.contentBindBehavior.showForm.displayData.call(this,data,$editing);mask.stop().remove();}},$.fn.contentBindBehavior.showForm.ajaxOptions));return false;}};$.fn.contentBindBehavior.showForm.ajaxOptions={corePacket:false,dataType:'json'};$.fn.contentBindBehavior.showForm.displayData=function(data,$editing){$editing.append(data.html).find('.contentForm').contentForm($.extend(data.conf,{mode:$.contents.mode.UPDATE,editing:$editing}));};$.fn.contentCommonForm=function()
{return this.each(function()
{typeof $data.services.contents.content.common.form.options==='object'&&$(this).contentForm($data.services.contents.content.common.form.options);});};$.fn.contentCommonCommon=function()
{return this.each(function()
{var $this=$(this);$.contents.init();if($this.hasClass('contentCommonCommonReady')){return;}
$this.addClass('contentCommonCommonReady').on('click','button[actid],a[actid]',function(e)
{e.preventDefault();var $self=$(this);$.profile&&console.info('false actid on ',$self,$self.attr('actid'));$this.trigger($self.attr('actid'),[false,$self]);}).bind('nextpage prevpage',function(e,data,$target)
{$.contents.events.nextPrevPage(e,data,$target);}).bind('addcomment',function(e,data,$target)
{$.contents.events.addReplyComment($target);});$(document).trigger('contentCommonCommon',[$this]);});};$(document).bind('contentsLoaded',function(){$.core.tryOn('services.contents.content.common.common.start',function(){$data.services.contents.content.common.common.start===true&&typeof $data.services.contents.content.common.common.selector==='string'&&$data.services.contents.content.common.common.selector!==''&&$($data.services.contents.content.common.common.selector).contentCommonCommon();});$.core.tryOn('services.contents.content.common.view.start',function(){$data.services.contents.content.common.view.start===true&&typeof $data.services.contents.content.common.view.selector==='string'&&$data.services.contents.content.common.view.selector!==''&&$($data.services.contents.content.common.view.selector).contentCommonView();});$.core.tryOn('services.contents.content.common.form.start',function(){$data.services.contents.content.common.form.start===true&&typeof $data.services.contents.content.common.form.selector==='string'&&$data.services.contents.content.common.form.selector!==''&&$($data.services.contents.content.common.form.selector).contentCommonForm();});});})(jQuery);(function($)
{'use strict';$.fn.multipagemanagement=function(e,$affected)
{e.preventDefault();e.stopPropagation();var $id=$affected.attr('data-id'),$title=$affected.attr('data-title'),$urlHash=$affected.attr('data-hash'),$socialButton=$('.jSocialBar'),$diaporama=$('.jContainerDiapo'),$url=location.pathname,$oldUrl=$url+window.location.hash;if($diaporama.css('display')!=='block'){if(parseInt($id,10)>1){$url+='#'+$urlHash;}else{if($url!==$oldUrl){History.replaceState(null,$title,'first-page');}}
if($url!==$oldUrl){History.replaceState(null,$title,$url);}
$socialButton.socialBar(encodeURIComponent(window.location.origin+'/'+$url),encodeURIComponent($title));}};$(document).start(function()
{if($data.expeert.actionActivatedByScreenType.swiper===true)
{$.appear('.swiper-slide-active .jMultipageHeader');$(document.body).on('appear','.swiper-slide-active .jMultipageHeader',function(e){$.fn.multipagemanagement(e,$(this));});}
else{$.appear('.jMultipageHeader');$(document.body).on('appear','.jMultipageHeader',function(e){$.fn.multipagemanagement(e,$(this));});}});})(jQuery);(function($)
{$.contents.events.addReplyComment=function($this)
{if($this.hasClass('buttonSel')){return;}
var ctype=3,$tgt=$($this.attr('acttgt')),url=$this.attr('data-href')||$this.attr('href'),$toogleEl,urlOpen,$bt,$formComm=$('form.contentForm[id][ctype='+ctype+'][parentx='+$this.attr('parentx')+'][parent='+$this.attr('parent')+']'),scrollDelay=250,scrollOptions={axis:'y',over:-1};if(url&&$tgt&&($formComm.length===0))
{$this.addClass('buttonSel');$bt=$('a[actid=nextpage]');urlOpen='?xpd&complus&xhr';if($bt.length===0)
{$('div.nocomav').remove();$.ajax({type:'POST',url:url,data:{xhr:1,actid:'addcomment',ctype:ctype,acttgt:$this.attr('acttgt'),parentx:$this.attr('parentx'),parent:$this.attr('parent')},dataType:'json',success:function(data)
{var $formDiv=$('<div>').addClass('jReplyCnt app_comments__content__item--form').html(data.html).slideDown();$tgt.append($formDiv);if(typeof data.restartService!=="undefined"){$(document).trigger('refresh',[{services:data.restartService}]);if(typeof data.restartService.ckeditor!=="undefined"){$formDiv.find("textarea").ckeditor(data.restartService.ckeditor.options);}}
$toogleEl&&$toogleEl.show();var $form=$formDiv.find('form');typeof $.fn.contentForm==='function'&&$form.contentForm(data.conf);$form.bind('submit',function(){return false;});$.scrollTo($form,scrollDelay,scrollOptions);$this.removeClass('buttonSel');}});}
else
{$.ajax({type:'POST',url:urlOpen,dataType:'json',success:function(data)
{$tgt.html(data.html);$tgt.ajaxUpdate($this.attr('href'),'xhr&actid=addcomment&ctype='+ctype+'&parentx='+$this.attr('parentx')+'&parent='+$this.attr('parent'),{manip:'append',duration:0,dataType:'json',complete:function()
{$toogleEl&&$toogleEl.show();var contentFormConf={fields:['contentCKEditor']},$form=$tgt.find('form');typeof $.fn.contentForm==='function'&&$form.contentForm(contentFormConf);$form.bind('submit',function(){return false;});$.scrollTo($form,scrollDelay,scrollOptions);$this.removeClass('buttonSel');}});}});}}
else
{$.scrollTo($formComm,scrollDelay,scrollOptions);}};})(jQuery);(function($)
{$.contents.events.nextPrevPage=function(e,data,$target)
{if(!$target.hasClass('pageLoad'))
{var url=$target.attr('href'),$tgt=$target.parent().parent();if(url&&$tgt){$target.addClass('pageLoad');$tgt.ajaxUpdate(url,'xhr&actid='+e.type,{manip:(e.type==='prevpage')?'prepend':'append',error:$.note.info,scroll:false,anim:false,dataType:'json',beforeDomManip:function()
{$target.closest('div.mod').remove();},complete:function()
{$target.removeClass('pageLoad');$(document).trigger('refresh',[{services:{localScroll:{start:false}}}]);}});}}};})(jQuery);(function($){$.contents.fields.ccmPaginator={name:'ccmPaginator',selector:false,init:function()
{var self=this;this.$ccmPaginator=$.ccmPaginator($.extend(this.config.ccmPaginatorOptions,{onAdd:function()
{self.$element.trigger('save',[{addPage:true}]);},sortableOptions:{opacity:0.5,containment:'parent',tolerance:'pointer'},templateList:'<ol style="overflow:hidden"></ol>',sortable:true,updateMode:this.config.id==='new'?'store':'incremental'}));$('.ccmPaginator').append(this.$ccmPaginator);}};})(jQuery);(function($)
{$.contents.fields.contentCKEditor={name:'content',selector:'[name=content]',init:function(self)
{self.$textarea=this.$element.find(self.selector);if(typeof $.fn.ckeditor==='function'){self.postInit();}else{$(document).on('ckeditorReady',self.postInit.bind(self));}},postInit:function()
{var paramsCkeditor=$.extend(true,{},_$('$data.services.ckeditor')._.options,{entities:false,contentsCss:['//fonts.googleapis.com/css?family='+$data.expeert.cssFont,$data.common.assetUrl+'/'+$data.common.assetDomain+'/css/ckeditor?v='
+$.jet.env.packager.domains_expeertv2_com.timestamps.css.ckeditor]});if($data.services.ckeditor.extraPlugins){paramsCkeditor.extraPlugins+=','+$data.services.ckeditor.extraPlugins;}
$data.addImage3Ckeditor(paramsCkeditor,3);if($data.expeert.useCcmbgTagConvertor===true){$data.addTagConvertorCkeditor(paramsCkeditor);}
$data.addMagiklinksCkeditor(paramsCkeditor);this.$textarea.ckeditor(paramsCkeditor);},validate:function(self)
{var editor=self.$textarea.ckeditor().editor;return(typeof editor==='undefined'||editor.getData().length>0);}};})(jQuery);(function($){$.contents.fields.dateYearEvent={name:'dateYearEvent',validate:function()
{var $dateYearEvent=this.$element.find('#dateYearEvent');if($dateYearEvent.val()===''){$dateYearEvent.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);return false;}
$dateYearEvent.hideInputError();return true;}};})(jQuery);(function($){$.contents.fields.publicationTime={name:'publicationTime',id:'publication_time',selector:'.publicationTime',timePickerConf:{defaultTime:'hh:mm',hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5},showCloseButton:true,closeButtonText:'Done',showNowButton:true,nowButtonText:'Now',showDeselectButton:false,deselectButtonText:'Deselect'},init:function(conf){$(conf.selector).timepicker(conf.timePickerConf);},validate:function(self)
{var $publicationTime=$(self.selector);$publicationTime.hideInputError();if($publicationTime.val()===''||$publicationTime.val()==="hh:mm")
{$publicationTime.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);return false;}
if($publicationTime.val().match(/(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])/)===null)
{$publicationTime.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_INVALID_TIME);return false;}
return true;}};})(jQuery);(function($){$.contents.fields.publicationDate={name:'publicationDate',id:'publication_date',selector:'.publicationDate',datePickerConf:{altFormat:"dd/mm/yy",dateFormat:"dd/mm/yy",minDate:0,maxDate:"+1Y"},init:function(conf)
{$(conf.selector).datepicker(conf.datePickerConf);},validate:function(self)
{var matchDate=function(date)
{switch(self.datePickerConf.dateFormat.toLowerCase()){case'mm/dd/yy':return date.match(/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|30|31)\/([0-9]{4})/)!==null;default:return date.match(/(0[1-9]|[1-2][0-9]|30|31)\/(0[1-9]|1[0-2])\/([0-9]{4})/)!==null;}
return false;},$publicationDate=$('.publicationDate');$publicationDate.hideInputError();if($publicationDate.val()===''||$publicationDate.val()==='MM/DD/YY')
{$publicationDate.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);return false;}
if(!matchDate($publicationDate.val()))
{$publicationDate.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_INVALID_DATE);return false;}
return true;}};})(jQuery);(function($){$.contents.fields.tags={name:'genericTags',init:function()
{var self=this;this.$tags=this.$element.find('div.tagslistdiv');this.$tagsCloudSuggest=this.$element.find('.tagCloudSuggest');this.$tagsCloudEdito=this.$element.find('.tagCloudEdito');var
inputHiddenParam=this.$tags.find('input[type=hidden][name=paramtags]').val(),_source=this.config.source||$data.expeert.urlPrefixModule+'suggest_tags'||'/content/suggest_tags',_validateSource=this.config.validateSource||$data.expeert.urlPrefixModule+'validate_tags'||'/content/validate_tags',_highlightedSource=this.config.highlightedSource||_source+'?p=hs',_editoTagSource=this.config.editoTagSource||_source+'?p=nc',conf=this.config,mainTags=[],onTagUpdate=function(instance)
{mainTags=instance.orderedTags;var mainTag=mainTags[0],tagList=(function(){var r=[];for(var m=mainTags.length,i=0;i<m;++i){r.push(mainTags[i].name);}return r.join(',');})(),i;if(mainTag)
{if(conf.tagsCloudSuggest)
{setTimeout(function(){self.$tagsCloudSuggest.trigger('replaceItem',[tagList]);},100);}
if(conf.tagsCloudEdito)
{setTimeout(function(){self.$tagsCloudEdito.trigger('replaceItem',[tagList]);},100);}
$.profile&&console.log('update mainTag : ',mainTag.name);if(conf.tagsHighlightFirst&&!(mainTag.priority&&mainTag.priority==='HIGHLIGHT'))
{for(i in instance.orderedTags)
{var t=instance.orderedTags[i];if(t.display&&t.priority&&t.priority==='HIGHLIGHT')
{setTimeout(function()
{$.profile&&console.warn('new highlight tag moved : ',t);t.order=0;instance.$self.trigger('addTag',t);},1000);break;}}}}},config={source:function(){return _source;},validateSource:function(){return _validateSource;},profile:1,main:this.config.useDefaultTag?this.config.groupName||$data.expeert.groupName:'',onlyActive:this.config.onlyActive||false,sortable:typeof this.config.tagsSortable==='undefined'?true:this.config.tagsSortable,onChange:(this.config.tagsHighlightFirst||this.config.tagsCloudParent)?onTagUpdate:function(){},onStarted:(this.config.tagsHighlightFirst||this.config.tagsCloudParent)?onTagUpdate:function(){},sortableOptions:{tolerance:"pointer"}};inputHiddenParam.length!==0&&($.extend(config,(inputHiddenParam?$.parseJSON(inputHiddenParam):{})));this.$tags.inputTags(config);this.config.tagsCloudSuggest&&this.$tagsCloudSuggest.tagCloud({url:function(){return _highlightedSource;},paramName:'q',paramNameExclude:false,beforeTemplate:'',sortable:false,sortableOptions:{containment:'.divTagslist',connectWith:'.tagsList',delay:100},template:'<a class="tag app_tag valid ACTIVE ${priority}" href="javascript:void(0);" title="$l{TAG_CLOUD_ACCEPT}">'
+'${name}'
+'<span data-icomoon="&#59134;" aria-hidden="true" class="valid" title="$l{TAG_CLOUD_ACCEPT}" href="javascript:void(0);"></span>'
+'</a>',renderTag:function(tag,config)
{return $($.tagCloud.getTemplate(config.template,{name:tag.name,priority:tag.priority}));}}).bind('mousedown',function()
{var instanceId=self.$tags.attr('tagid');instanceId&&$.inputTags.showVisualDisplay(instanceId,true);}).trigger('registerClientNode',[this.$tags]);this.config.tagsCloudEdito&&this.$tagsCloudEdito.tagCloud({url:function(){return _editoTagSource;},paramName:'q',paramNameExclude:false,beforeTemplate:'',sortable:false,sortableOptions:{containment:'.divTagslist',connectWith:'.tagsList',delay:100},template:'<a class="tag app_tag valid ACTIVE" href="javascript:void(0);" title="$l{TAG_CLOUD_ACCEPT}">'
+'${name}'
+'<span data-icomoon="&#59134;" aria-hidden="true" class="valid" title="$l{TAG_CLOUD_ACCEPT}" href="javascript:void(0);"></span>'
+'</a>'}).bind('mousedown',function()
{var instanceId=self.$tags.attr('tagid');if(instanceId!=='undefined')
{$.inputTags.showVisualDisplay(instanceId,true);}}).trigger('registerClientNode',[this.$tags]);},validate:function()
{var valid=true,self=this;this.$tags.each(function()
{var $this=$(this);if(!self.config.validateAnyActive||$this.data('anyActive'))
{$this.hideInputError();}
else
{$this.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_ACTIVE_TAG_MISSING);valid=false;}
if(self.config.anyHighlight)
{if($this.data('anyHighlight'))
{$this.hideInputError();}
else
{$this.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_HIGHLIGHT_TAG_MISSING);valid=false;}}});return valid;}};})(jQuery);(function($)
{$.contents.fields.title={name:'genericTitle',init:function()
{var self=this,$title=self.$element.find('.title');$title.find('.title').trigger('focus',true).bind('keyup',function(){self.$ccmPaginator&&self.$ccmPaginator.trigger('updateItemContent',[self.config.id,$(this).val()]);}).keydown(function(event){var l=$(this).val().length;if((event.which||event.keyCode)!==8&&(event.which||event.keyCode)!==46&&(event.which||event.keyCode)!==37&&(event.which||event.keyCode)!==39&&(event.which||event.keyCode)!==35&&(event.which||event.keyCode)!==36){if(l>=self.titleMaxLength){$title.showInputError(self.titleMaxLength+$.contents.langs[$.contents.lang].COMMON_FORM_CHAR_MAX);return false;}}
if(l<=self.titleMaxLength){$title.hideInputError();}}).change(function(){var l=$(this).val().length;if(l>self.titleMaxLength){$(this).val($(this).val().substring(0,self.titleMaxLength));}
if(l<=self.titleMaxLength){$title.hideInputError();}}).blur(function(){$title.hideInputError();});},validate:function()
{var
$title=this.$element.find('.title'),title=$title.val();if(title===''||title===$title.data('default'))
{$title.showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);return false;}
$title.hideInputError();return true;}};})(jQuery);(function($)
{$.extend($.contents,{optionsDialog:{delegationDone:false,dialogDivSelector:'div.optionsDialogDiv',dialogDiv:null,init:function(id,self,act)
{this.currentId=id;this.self=self;this.menutype=='undefined'&&(this.menutype='shmodomenu');$.ajax({type:'POST',dataType:'json',url:$.contents.optionsDialog.getUrl(this.menutype),data:{ID:this.currentId,xhr:1,act:act},success:function(data)
{var pos=$.contents.optionsDialog.self.findPos(),left=pos.x;if(typeof $('.tipsy-n').css('left')!='undefined'){left=$('.tipsy-n').css('left');}
$.contents.optionsDialog.dialogDiv===null&&($.contents.optionsDialog.dialogDiv=$($.contents.optionsDialog.dialogDivSelector));if($.contents.optionsDialog.dialogDiv)
{($.contents.optionsDialog.dialogDiv.attr('init')!='true')&&$.contents.optionsDialog.dialogDiv.css('position','absolute').attr('init','true').bind('change',$.contents.optionsDialog.onChange).bind('click',$.contents.optionsDialog.onClick).bind('close',$.contents.optionsDialog.close);$.contents.optionsDialog.dialogDiv.css({top:(pos.y+20),left:left}).html(data.html).fadeIn(100).find('input[type=checkbox]').ccmCheckbox();if($.contents.optionsDialog.delegationDone===false){$.contents.optionsDialog.delegationDone=true;$('body').bind('click',$.contents.optionsDialog.closeHandler);}
$(document).trigger('refresh');}}});},getUrl:function(action)
{return $data.common.baseUrl+$data.services.contents.content.urlController+'/'+action;},onChange:function(e)
{var target=$(e.target),actId=target.attr('actid');if(typeof(actId)!='undefined')
{if(actId=='mod_selact')
{$.ajax({type:'POST',dataType:'json',url:$.contents.optionsDialog.getUrl('shmodomenu'),data:{ID:$.contents.optionsDialog.currentId,act:target.val(),xhr:1},success:function(data)
{if(!$.contents.optionsDialog.dialogDiv){return false;}
$.contents.optionsDialog.dialogDiv.html(data.html).find('input[type=checkbox]').ccmCheckbox();}});}}},onClick:function(e)
{var target=$(e.target),actId=target.attr('actid');if(typeof(actId)!='undefined')
{switch(actId){case'modnewreason':target.css('color','#555555');var title=target.attr('title')||target.attr('original-title');($('#frmactmod #tareason').val()==='')?$('#frmactmod #tareason').val('* '+title):$('#frmactmod #tareason').val($('#frmactmod #tareason').val()+'\n\n* '+title);break;case'closemodomenu':$.contents.optionsDialog.dialogDiv.trigger('close');break;case'ofempty':break;case'modsubmit':$.ajax({type:'POST',dataType:'json',url:$.contents.optionsDialog.getUrl('postmodomenu'),data:{ID:$.contents.optionsDialog.currentId,act:$('#frmactmod #mod_selact').val(),nom:$('#frmactmod input[name="nom"]').val(),email:$('#frmactmod input[name="email"]').val(),reason:$('#frmactmod #tareason').val(),silence:($('#frmactmod #checkSilence').attr('checked'))?1:0,xhr:1},success:function(ret)
{if(ret.res){window.location.reload();}else{if(ret.msgs)
{$('div#info_msg').css({visibility:'visible',display:'block'}).addClass('error').html('<p>'+ret.msgs+'</p>');}}}});break;default:break;}}},close:function(){var $this=$(this);$this.fadeOut(100,function(){$this.html();});$.contents.optionsDialog.self.removeClass('icoOptionsSel');},closeHandler:function(e){if($(e.target).closest('.optionsDialogDiv').length===0){$('body').unbind('click',$.contents.optionsDialog.closeHandler);$.contents.optionsDialog.delegationDone=false;$.contents.optionsDialog.dialogDiv&&$.contents.optionsDialog.dialogDiv.trigger('close');}}}});$(document).bind('contentCommonCommon',function(e,$node){$node.bind('shmodomenu',function(e,data,$this,act)
{var hasId=$this.closest('.hasId');if(hasId.length===0)
{if($this.hasClass('icoOptionsSel')===false)
{$.contents.optionsDialog.menutype='shmodomenu';$.contents.optionsDialog.init($this.parent().parent().siblings('.hasId').attr('id').replace(/[^\d]/g,''),$this,act);$this.addClass('icoOptionsSel');}else
{$.contents.optionsDialog.dialogDiv&&$.contents.optionsDialog.dialogDiv.trigger('close');}}else
{if(hasId.find('.icoOptions').hasClass('icoOptionsSel')===false)
{$.contents.optionsDialog.menutype='shmodomenu';$.contents.optionsDialog.init(hasId.attr('id').replace(/[^\d]/g,''),$this,act);hasId.find('.icoOptions').addClass('icoOptionsSel');}else
{$.contents.optionsDialog.dialogDiv&&$.contents.optionsDialog.dialogDiv.trigger('close');}}}).bind('statechange',function(e,data,$this)
{$.ajax({type:'POST',dataType:'json',url:$.contents.optionsDialog.getUrl('postmodomenu'),data:{ID:$this.attr('id'),act:$this.attr('act'),xhr:1},success:function(ret){$('span#st-'+$this.attr('s')+'-'+$this.attr('id')).html(ret.html);}});});});})(jQuery);(function($)
{$.fn.counterAction=function(config)
{if(typeof $.fn.counterAction.selectors[this.selector]==='undefined')
{$.fn.counterAction.selectors[this.selector]=true;$('body').on('click',this.selector,function(e)
{e.preventDefault();config=$.extend({},$.fn.counterAction.defaultConfig,config);var $self=$(this),counterActionInfos=$.parseJSON($self.attr(config.dataName));$.ajax({type:'POST',url:config.actionUrl,data:{id:counterActionInfos.id,cid:counterActionInfos.cid,parentx:counterActionInfos.parentx,src:counterActionInfos.src,icon:typeof counterActionInfos.icon!=='undefined'&&counterActionInfos.icon,xhr:'xhr'},dataType:'json',success:function(r){config.success.call(this,r,$self);}});});}
return this;};$.fn.counterAction.selectors={};$.fn.counterAction.defaultConfig={actionUrl:'/content/update_counter',dataName:'data-counteraction',success:function(r,$self)
{if(r.counter.html){$.each(r.counter.html,function(selector,html){r.counter.inc&&$self.closest('div.content').trigger('helpfulChange',[r.counter.inc[selector],r]);html&&$(selector).html(html);});}}};$.toggleCounterAction=function(id,cid,$elt,mt,but)
{var px;try{px=$('.parentx.hasId').attr('id').replace(/[^\d]/g,'');}catch(e){px=id;}
var urlAddParam='';if(typeof $data.common.api!=='undefined'&&typeof $data.common.api.facebook!=='undefined'&&typeof $data.common.api.facebook.force!=='undefined'&&$data.common.api.facebook.force===true){urlAddParam='&facebookTest';}
$elt.addClass('buttonSel');$.post($elt.attr('acturl')+'postupd/?xhr'+urlAddParam,{id:id,parentx:px,cid:cid,src:$elt.attr('asrc'),but:but},function(j)
{$elt.removeClass('buttonSel');if(j&&j.id&&(j.id===id)&&j.counter){$elt.tipsy("hide");if(j.counter.html){var $element=$("#cu-"+cid+"-"+id),_f=function(){$element.parent().toggle($element.css('display')!=='none'||$("#cmts-"+id).css('display')!=='none');};$.each(j.counter.html,function(sel,v){j.counter.inc&&$elt.closest('div.content').trigger('helpfulChange',j.counter.inc[sel]);var $sel=$(sel);if(v){$sel.html(v).slideDown('fast',_f);}
else
{var cmtLine=$sel.closest('div.cuser').siblings('div.cmtline');if(cmtLine.children('div#c0').length!==0||cmtLine.children('div.line').length!==0)
{$sel.slideUp('fast',function()
{$sel.empty().hide().hide();});}else{$sel.parent().slideUp('fast',function()
{$sel.empty().hide().parent().hide();});}}});}else{if(but===1){$elt.replaceWith(j.html);}else{if(mt!==undefined){var elmicoCt=$('div#p'+px).find('a[class*="icoCt"][cid="'+cid+'"]');if(elmicoCt.length===0){elmicoCt=$('a[class*="icoCt"][cid="'+cid+'"]');}
var $elParent=elmicoCt.parent();if($elParent.hasClass('undo')){$elParent.siblings('span.icoCt[cid="'+cid+'"]').remove();$elParent.replaceWith(j.html);}else{elmicoCt.siblings('span.nbElm[cid="'+cid+'"]').remove();elmicoCt.replaceWith(j.html);}}else{$elt.attr('class',j.counter.css+' nover').attr('title',j.title).tipsy('show');}}}}},'json');};$(document).bind('contentCommonView',function(e,$this)
{$this.bind('updcounter',function(e,data,$this)
{$.toggleCounterAction($this.closest('.hasId').attr('id').replace(/[^\d]/g,''),$this.attr('cid'),$this);}).bind('updcountershow',function(e,data,$this)
{var id,cid=$this.attr('cid'),but=0;if($this.closest('div.line').hasClass('hasId')){id=$this.closest('.hasId').attr('id').replace(/[^\d]/g,'');}
else{id=$('.hasId').attr('id').replace(/[^\d]/g,'');}
if($this.hasClass('buttonS-E')||$this.hasClass('buttonS-G')){but=1;}
$.toggleCounterAction(id,cid,$this,1,but);}).find('.counterBtn').counterAction();});})(jQuery);(function($)
{'use strict';var itemToTrigger='.jToLogin',redirectToLogin=function($item){window.location=$item.attr('href')+'?txtUrl='+encodeURI(window.location.pathname);};$.fn.cleanLogin=function()
{$(itemToTrigger).bind('click',function(e){e.preventDefault();e.stopPropagation();redirectToLogin($(this));});};$(document).start(function()
{$.fn.cleanLogin();});})(jQuery);(function($)
{var triggerValue=$.getParamFromUrl('open_comment');if(typeof triggerValue!=='undefined')
{$.contents.events.addReplyComment($('[actid=addcomment]'));if(typeof MutationObserver!=="undefined"){var observations={childList:true},srcObserver=new MutationObserver(function(){$.contents.events.addReplyComment($('[actid=addcomment]'));});srcObserver.observe($('.layout_main')[0],observations);setTimeout(function()
{srcObserver.disconnect();},3000);}}
$('.jOpenCommentToRating').click(function(e)
{if($data.expeert.uid===0)
{e.stopPropagation();e.preventDefault();document.location.href='/p/join?txtUrl='+$data.expeert.selfurl+'?open_comment=1';return;}
$.contents.events.addReplyComment($('[actid=addcomment]'));});})(jQuery);(function($){$.tagsForm={config:{ccmeditorConf:{actions:['bold','italic'],discreteToolbar:false,history:true,defaultValue:true,magicLinks:{support:false}}}},$.fn.tagsForm=function(config)
{$.extend(true,$.tagsForm.config,config);return this.each(function(){var $self=$(this);$self.find('.modify').remoteContentForm({contentFormConf:{cnt:[{$reference:function(){return $self.find('.desc');},getContent:function(form){var $this=$(this);return{id:$self.find('[name=id]').val(),desc:$this.html()};}}],fields:[{name:'desc',$nodes:$self.find('.desc'),init:function(conf){$self.find('.desc').ccmEditor($.tagsForm.config.ccmeditorConf);$('div#groupDescForm').addClass('editing');},validate:function(conf){var form=this,valid=true;conf.$nodes.each(function(){$.core.$fake[0]=this;var description=$.core.$fake.html();description=description.replace(/<\/?(?!\!)[^>]*>/gi,'');if(description===''){$.core.$fake.showInputError('empty field');valid=false;}else{if(description.length>200){$.core.$fake.showInputError('char max');valid=false;}else{$.core.$fake.hideInputError();}}});return valid;}}],mode:$.contents.mode.UPDATE},url:$self.attr('url')});});};$(document).bind('contentsLoaded',function(){$.core.tryOn('services.contents.tag.common.start',function(){$data.services.contents.tag.common.start===true&&typeof $data.services.contents.tag.common.selector=='string'&&$data.services.contents.tag.common.selector!==''&&$($data.services.contents.tag.common.selector).tagsForm($data.services.contents.tag.common.config);});});})(jQuery);(function($){$.tagCloud={defaultConfig:{url:{},beforeTemplate:'<a class="buttonS-T mar5 validAll"><span class="icoValid-2"></span>&nbsp;$l{TAG_CLOUD_ACCEPT_ALL}</a>',template:'<a class="tag tagS mar5 valid" href="javascript:void(0);" title="$l{TAG_CLOUD_ACCEPT}">'
+'${name}'
+'<span class="marL5 valid icoValid-3" title="$l{TAG_CLOUD_ACCEPT}" href="javascript:void(0);"></span>'
+'<span class="marL5 cancel icoCancel-3" title="$l{TAG_CLOUD_REFUSE}" href="javascript:void(0);"></span>'
+'</a>',selectorAcceptAllTag:'.validAll',selectorAcceptTag:'.valid',selectorRejectTag:'.cancel',paramName:'listWords',paramNameExclude:'excludeWords',deleteTagOnValidate:true,onTagRendered:function(tags,excludedTags,config,$clientNodes){},onSortStart:function(e,ui){},localCache:false,sortable:false,sortableOptions:{items:'.tag'},parseExcludeData:function(data){var ret=[],k;for(k in data)
{ret.push(data[k].name);}
return ret.join(',');},parseTagSended:function(tag)
{!tag.order&&(tag.order=0);tag.display=true;tag.validated=true;return tag;},renderTag:function(tag,config){return $($.tagCloud.getTemplate(config.template,{'name':tag.name}));}},getTagByName:function(name,tags)
{for(var i in tags)
{if(tags[i].name==name){return tags[i];}}
return false;},removeTagByName:function(name,tags)
{for(var i in tags)
{if(tags[i].name==name){delete tags[i];break;}}
return tags;}};$.extend($.tagCloud,$.microTemplate);$.fn.tagCloud=function(config)
{config=$.extend(true,{},$.tagCloud.defaultConfig,config);$.tagCloud.microTemplateInit();return this.each(function()
{var
$clientNodes=[],tags=[],excludedTags=false,triggerToClients=function(eventName,options)
{for(var i=0;i<$clientNodes.length;++i)
{$clientNodes[i].trigger(eventName,options);}},$self=$(this).bind('replaceItem addItem',function(e,data)
{var dataObject={};switch(typeof data)
{case'object':dataObject=data;break;default:case'string':dataObject[config.paramName]=data;}
config.paramNameExclude&&excludedTags&&(dataObject[config.paramNameExclude]=config.parseExcludeData(excludedTags));data&&$.ajax({type:'POST',async:true,data:dataObject,url:config.url(),localCache:config.localCache,dataType:'json',success:function(json)
{if(json)
{tags=json;$self.trigger('renderTags');}}});}).bind('renderTags',function()
{var $this=$(this),i;$this.empty();!$.isEmptyObject(tags)&&$this.append($.tagCloud.getTemplate(config.beforeTemplate),{});for(i in tags)
{$this.append(config.renderTag.call($this,tags[i],config));}
config.onTagRendered.call(this,tags,excludedTags,config,$clientNodes);}).bind('removeItem',function(e,tagName)
{!excludedTags&&(excludedTags=[]);var tag=$.tagCloud.getTagByName(tagName,tags);if(tag)
{excludedTags.push(tag);tags=$.tagCloud.removeTagByName(tagName,tags);$self.trigger('renderTags');}}).bind('sortstart',config.onSortStart).delegate(config.selectorRejectTag,'click',function(e)
{e.stopPropagation();$self.trigger('removeItem',[$.trim($(e.target).closest(config.selectorAcceptTag).text())]);}).delegate(config.selectorAcceptTag,'click',function()
{var
$this=$(this),name=$.trim($this.hasClass('.tag')?$this.text():$this.closest('.tag').text()),tag=$.tagCloud.getTagByName(name,tags);if(tag){tag=config.parseTagSended(tag);triggerToClients('addTag',tag);$this.trigger('renderTags');config.deleteTagOnValidate&&$self.trigger('removeItem',[tag.name]);}}).delegate(config.selectorAcceptAllTag,'click',function()
{var
$this=$(this),tag,i;for(i in tags)
{triggerToClients('addTag',config.parseTagSended(tags[i]));config.deleteTagOnValidate&&$self.trigger('removeItem',[tags[i].name]);}
$this.trigger('renderTags');}).bind('registerClientNode',function(e,$clientNode){$clientNodes.push($clientNode);}).bind('transfert',function(e,$clientNode,name,order)
{var tag=$.tagCloud.getTagByName(name,tags);if(tag){tag.order=order;$clientNode.trigger('addTag',[config.parseTagSended(tag)]);config.deleteTagOnValidate&&$self.trigger('removeItem',[name]);}});config.sortable&&$self.sortable(config.sortableOptions);});};})(jQuery);(function($){$.contents.fields.ccmPaginator={name:'ccmPaginator',selector:false,init:function(conf){var self=this;this.$ccmPaginator=$.ccmPaginator($.extend(this.config.ccmPaginatorOptions,{onAdd:function(e){self.$element.trigger('save',[{addPage:true}]);},sortable:true,updateMode:this.config.id=='new'?'store':'incremental'}));$('.ccmPaginator').append(this.$ccmPaginator);}}})(jQuery);(function($,undefined){$.extend($.ui,{timepicker:{version:"0.2.9"}});var PROP_NAME='timepicker';var tpuuid=new Date().getTime();function Timepicker(){this.debug=true;this._curInst=null;this._isInline=false;this._disabledInputs=[];this._timepickerShowing=false;this._inDialog=false;this._dialogClass='ui-timepicker-dialog';this._mainDivId='ui-timepicker-div';this._inlineClass='ui-timepicker-inline';this._currentClass='ui-timepicker-current';this._dayOverClass='ui-timepicker-days-cell-over';this.regional=[];this.regional['']={hourText:'Hour',minuteText:'Minute',amPmText:['AM','PM'],closeButtonText:'Done',nowButtonText:'Now',deselectButtonText:'Deselect'};this._defaults={showOn:'focus',button:null,showAnim:'fadeIn',showOptions:{},appendText:'',beforeShow:null,onSelect:null,onClose:null,timeSeparator:':',periodSeparator:' ',showPeriod:false,showPeriodLabels:true,showLeadingZero:true,showMinutesLeadingZero:true,altField:'',defaultTime:'now',myPosition:'left top',atPosition:'left bottom',onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5},rows:4,showHours:true,showMinutes:true,optionalMinutes:false,showCloseButton:false,showNowButton:false,showDeselectButton:false};$.extend(this._defaults,this.regional['']);this.tpDiv=$('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>');}
$.extend(Timepicker.prototype,{markerClassName:'hasTimepicker',log:function(){if(this.debug)
console.log.apply('',arguments);},_widgetTimepicker:function(){return this.tpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachTimepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute('time:'+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}
var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=='div'||nodeName=='span');if(!target.id){this.uuid+=1;target.id='tp'+this.uuid;}
var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=='input'){this._connectTimepicker(target,inst);this._setTimeFromField(inst);}else if(inline){this._inlineTimepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,'\\\\$1');return{id:id,input:target,inline:inline,tpDiv:(!inline?this.tpDiv:$('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'))};},_connectTimepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.timepicker",function(event,key){return this._get(inst,key);});$.data(target,PROP_NAME,inst);},_doKeyDown:function(event){var inst=$.timepicker._getInst(event.target);var handled=true;inst._keyEvent=true;if($.timepicker._timepickerShowing){switch(event.keyCode){case 9:$.timepicker._hideTimepicker();handled=false;break;case 13:$.timepicker._updateSelectedValue(inst);$.timepicker._hideTimepicker();return false;break;case 27:$.timepicker._hideTimepicker();break;default:handled=false;}}
else if(event.keyCode==36&&event.ctrlKey){$.timepicker._showTimepicker(this);}
else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyUp:function(event){var inst=$.timepicker._getInst(event.target);$.timepicker._setTimeFromField(inst);$.timepicker._updateTimepicker(inst);},_attachments:function(input,inst){var appendText=this._get(inst,'appendText');var isRTL=this._get(inst,'isRTL');if(inst.append){inst.append.remove();}
if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+'</span>');input[isRTL?'before':'after'](inst.append);}
input.unbind('focus.timepicker',this._showTimepicker);if(inst.trigger){inst.trigger.remove();}
var showOn=this._get(inst,'showOn');if(showOn=='focus'||showOn=='both'){input.bind("focus.timepicker",this._showTimepicker);}
if(showOn=='button'||showOn=='both'){var button=this._get(inst,'button');$(button).bind("click.timepicker",function(){if($.timepicker._timepickerShowing&&$.timepicker._lastInput==input[0]){$.timepicker._hideTimepicker();}
else{$.timepicker._showTimepicker(input[0]);}
return false;});}},_inlineTimepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))
return;divSpan.addClass(this.markerClassName).append(inst.tpDiv).bind("setData.timepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.timepicker",function(event,key){return this._get(inst,key);});$.data(target,PROP_NAME,inst);this._setTimeFromField(inst);this._updateTimepicker(inst);inst.tpDiv.show();},_showTimepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!='input'){input=$('input',input.parentNode)[0];}
if($.timepicker._isDisabledTimepicker(input)||$.timepicker._lastInput==input){return;}
$.timepicker._hideTimepicker();var inst=$.timepicker._getInst(input);if($.timepicker._curInst&&$.timepicker._curInst!=inst){$.timepicker._curInst.tpDiv.stop(true,true);}
var beforeShow=$.timepicker._get(inst,'beforeShow');extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));inst.lastVal=null;$.timepicker._lastInput=input;$.timepicker._setTimeFromField(inst);if($.timepicker._inDialog){input.value='';}
if(!$.timepicker._pos){$.timepicker._pos=$.timepicker._findPos(input);$.timepicker._pos[1]+=input.offsetHeight;}
var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css('position')=='fixed';return!isFixed;});if(isFixed&&$.browser.opera){$.timepicker._pos[0]-=document.documentElement.scrollLeft;$.timepicker._pos[1]-=document.documentElement.scrollTop;}
var offset={left:$.timepicker._pos[0],top:$.timepicker._pos[1]};$.timepicker._pos=null;inst.tpDiv.css({position:'absolute',display:'block',top:'-1000px'});$.timepicker._updateTimepicker(inst);if((!inst.inline)&&(typeof $.ui.position=='object')){inst.tpDiv.position({of:inst.input,my:$.timepicker._get(inst,'myPosition'),at:$.timepicker._get(inst,'atPosition'),collision:'flip'});var offset=inst.tpDiv.offset();$.timepicker._pos=[offset.top,offset.left];}
inst._hoursClicked=false;inst._minutesClicked=false;offset=$.timepicker._checkOffset(inst,offset,isFixed);inst.tpDiv.css({position:($.timepicker._inDialog&&$.blockUI?'static':(isFixed?'fixed':'absolute')),display:'none',left:offset.left+'px',top:offset.top+'px'});if(!inst.inline){var showAnim=$.timepicker._get(inst,'showAnim');var duration=$.timepicker._get(inst,'duration');var postProcess=function(){$.timepicker._timepickerShowing=true;var borders=$.timepicker._getBorders(inst.tpDiv);inst.tpDiv.find('iframe.ui-timepicker-cover').css({left:-borders[0],top:-borders[1],width:inst.tpDiv.outerWidth(),height:inst.tpDiv.outerHeight()});};inst.tpDiv.css('zIndex',$.timepicker._getZIndex(input)+1);if($.effects&&$.effects[showAnim]){inst.tpDiv.show(showAnim,$.timepicker._get(inst,'showOptions'),duration,postProcess);}
else{inst.tpDiv[showAnim||'show']((showAnim?duration:null),postProcess);}
if(!showAnim||!duration){postProcess();}
if(inst.input.is(':visible')&&!inst.input.is(':disabled')){inst.input.focus();}
$.timepicker._curInst=inst;}},_getZIndex:function(target){var elem=$(target),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}},_updateTimepicker:function(inst){inst.tpDiv.empty().append(this._generateHTML(inst));this._rebindDialogEvents(inst);},_rebindDialogEvents:function(inst){var borders=$.timepicker._getBorders(inst.tpDiv),self=this;inst.tpDiv.find('iframe.ui-timepicker-cover').css({left:-borders[0],top:-borders[1],width:inst.tpDiv.outerWidth(),height:inst.tpDiv.outerHeight()}).end().find('.ui-timepicker-minute-cell').unbind().bind("click",{fromDoubleClick:false},$.proxy($.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:true},$.proxy($.timepicker.selectMinutes,this)).end().find('.ui-timepicker-hour-cell').unbind().bind("click",{fromDoubleClick:false},$.proxy($.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:true},$.proxy($.timepicker.selectHours,this)).end().find('.ui-timepicker td a').unbind().bind('mouseout',function(){$(this).removeClass('ui-state-hover');if(this.className.indexOf('ui-timepicker-prev')!=-1)$(this).removeClass('ui-timepicker-prev-hover');if(this.className.indexOf('ui-timepicker-next')!=-1)$(this).removeClass('ui-timepicker-next-hover');}).bind('mouseover',function(){if(!self._isDisabledTimepicker(inst.inline?inst.tpDiv.parent()[0]:inst.input[0])){$(this).parents('.ui-timepicker-calendar').find('a').removeClass('ui-state-hover');$(this).addClass('ui-state-hover');if(this.className.indexOf('ui-timepicker-prev')!=-1)$(this).addClass('ui-timepicker-prev-hover');if(this.className.indexOf('ui-timepicker-next')!=-1)$(this).addClass('ui-timepicker-next-hover');}}).end().find('.'+this._dayOverClass+' a').trigger('mouseover').end().find('.ui-timepicker-now').bind("click",function(e){$.timepicker.selectNow(e);}).end().find('.ui-timepicker-deselect').bind("click",function(e){$.timepicker.deselectTime(e);}).end().find('.ui-timepicker-close').bind("click",function(e){$.timepicker._hideTimepicker();}).end();},_generateHTML:function(inst){var h,m,row,col,html,hoursHtml,minutesHtml='',showPeriod=(this._get(inst,'showPeriod')==true),showPeriodLabels=(this._get(inst,'showPeriodLabels')==true),showLeadingZero=(this._get(inst,'showLeadingZero')==true),showHours=(this._get(inst,'showHours')==true),showMinutes=(this._get(inst,'showMinutes')==true),amPmText=this._get(inst,'amPmText'),rows=this._get(inst,'rows'),amRows=0,pmRows=0,amItems=0,pmItems=0,amFirstRow=0,pmFirstRow=0,hours=Array(),hours_options=this._get(inst,'hours'),hoursPerRow=null,hourCounter=0,hourLabel=this._get(inst,'hourText'),showCloseButton=this._get(inst,'showCloseButton'),closeButtonText=this._get(inst,'closeButtonText'),showNowButton=this._get(inst,'showNowButton'),nowButtonText=this._get(inst,'nowButtonText'),showDeselectButton=this._get(inst,'showDeselectButton'),deselectButtonText=this._get(inst,'deselectButtonText'),showButtonPanel=showCloseButton||showNowButton||showDeselectButton;for(h=hours_options.starts;h<=hours_options.ends;h++){hours.push(h);}
hoursPerRow=Math.ceil(hours.length/rows);if(showPeriodLabels){for(hourCounter=0;hourCounter<hours.length;hourCounter++){if(hours[hourCounter]<12){amItems++;}
else{pmItems++;}}
hourCounter=0;amRows=Math.floor(amItems/hours.length*rows);pmRows=Math.floor(pmItems/hours.length*rows);if(rows!=amRows+pmRows){if(amItems&&(!pmItems||!amRows||(pmRows&&amItems/amRows>=pmItems/pmRows))){amRows++;}else{pmRows++;}}
amFirstRow=Math.min(amRows,1);pmFirstRow=amRows+1;hoursPerRow=Math.ceil(Math.max(amItems/amRows,pmItems/pmRows));}
html='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>';if(showHours){html+='<td class="ui-timepicker-hours">'+'<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+
hourLabel+'</div>'+'<table class="ui-timepicker">';for(row=1;row<=rows;row++){html+='<tr>';if(row==amFirstRow&&showPeriodLabels){html+='<th rowspan="'+amRows.toString()+'" class="periods" scope="row">'+amPmText[0]+'</th>';}
if(row==pmFirstRow&&showPeriodLabels){html+='<th rowspan="'+pmRows.toString()+'" class="periods" scope="row">'+amPmText[1]+'</th>';}
for(col=1;col<=hoursPerRow;col++){if(showPeriodLabels&&row<pmFirstRow&&hours[hourCounter]>=12){html+=this._generateHTMLHourCell(inst,undefined,showPeriod,showLeadingZero);}else{html+=this._generateHTMLHourCell(inst,hours[hourCounter],showPeriod,showLeadingZero);hourCounter++;}}
html+='</tr>';}
html+='</tr></table>'+'</td>';}
if(showMinutes){html+='<td class="ui-timepicker-minutes">';html+=this._generateHTMLMinutes(inst);html+='</td>';}
html+='</tr>';if(showButtonPanel){var buttonPanel='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">';if(showNowButton){buttonPanel+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all" '
+' data-timepicker-instance-id="#'+inst.id.replace(/\\\\/g,"\\")+'" >'
+nowButtonText+'</button>';}
if(showDeselectButton){buttonPanel+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all" '
+' data-timepicker-instance-id="#'+inst.id.replace(/\\\\/g,"\\")+'" >'
+deselectButtonText+'</button>';}
if(showCloseButton){buttonPanel+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all" '
+' data-timepicker-instance-id="#'+inst.id.replace(/\\\\/g,"\\")+'" >'
+closeButtonText+'</button>';}
html+=buttonPanel+'</div></td></tr>';}
html+='</table>';html+=($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-timepicker-cover" frameborder="0"></iframe>':'');return html;},_updateMinuteDisplay:function(inst){var newHtml=this._generateHTMLMinutes(inst);inst.tpDiv.find('td.ui-timepicker-minutes').html(newHtml);this._rebindDialogEvents(inst);},_generateHTMLMinutes:function(inst){var m,row,html='',rows=this._get(inst,'rows'),minutes=Array(),minutes_options=this._get(inst,'minutes'),minutesPerRow=null,minuteCounter=0,showMinutesLeadingZero=(this._get(inst,'showMinutesLeadingZero')==true),onMinuteShow=this._get(inst,'onMinuteShow'),minuteLabel=this._get(inst,'minuteText');if(!minutes_options.starts){minutes_options.starts=0;}
if(!minutes_options.ends){minutes_options.ends=59;}
for(m=minutes_options.starts;m<=minutes_options.ends;m+=minutes_options.interval){minutes.push(m);}
minutesPerRow=Math.round(minutes.length/rows+0.49);if(onMinuteShow&&(onMinuteShow.apply((inst.input?inst.input[0]:null),[inst.hours,inst.minutes])==false)){for(minuteCounter=0;minuteCounter<minutes.length;minuteCounter+=1){m=minutes[minuteCounter];if(onMinuteShow.apply((inst.input?inst.input[0]:null),[inst.hours,m])){inst.minutes=m;break;}}}
html+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+
minuteLabel+'</div>'+'<table class="ui-timepicker">';minuteCounter=0;for(row=1;row<=rows;row++){html+='<tr>';while(minuteCounter<row*minutesPerRow){var m=minutes[minuteCounter];var displayText='';if(m!==undefined){displayText=(m<10)&&showMinutesLeadingZero?"0"+m.toString():m.toString();}
html+=this._generateHTMLMinuteCell(inst,m,displayText);minuteCounter++;}
html+='</tr>';}
html+='</table>';return html;},_generateHTMLHourCell:function(inst,hour,showPeriod,showLeadingZero){var displayHour=hour;if((hour>12)&&showPeriod){displayHour=hour-12;}
if((displayHour==0)&&showPeriod){displayHour=12;}
if((displayHour<10)&&showLeadingZero){displayHour='0'+displayHour;}
var html="";var enabled=true;var onHourShow=this._get(inst,'onHourShow');if(hour==undefined){html='<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';return html;}
if(onHourShow){enabled=onHourShow.apply((inst.input?inst.input[0]:null),[hour]);}
if(enabled){html='<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+inst.id.replace(/\\\\/g,"\\")+'" data-hour="'+hour.toString()+'">'+'<a class="ui-state-default '+
(hour==inst.hours?'ui-state-active':'')+'">'+
displayHour.toString()+'</a></td>';}
else{html='<td>'+'<span class="ui-state-default ui-state-disabled '+
(hour==inst.hours?' ui-state-active ':' ')+'">'+
displayHour.toString()+'</span>'+'</td>';}
return html;},_generateHTMLMinuteCell:function(inst,minute,displayText){var html="";var enabled=true;var onMinuteShow=this._get(inst,'onMinuteShow');if(onMinuteShow){enabled=onMinuteShow.apply((inst.input?inst.input[0]:null),[inst.hours,minute]);}
if(minute==undefined){html='<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';return html;}
if(enabled){html='<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+inst.id.replace(/\\\\/g,"\\")+'" data-minute="'+minute.toString()+'" >'+'<a class="ui-state-default '+
(minute==inst.minutes?'ui-state-active':'')+'" >'+
displayText+'</a></td>';}
else{html='<td>'+'<span class="ui-state-default ui-state-disabled" >'+
displayText+'</span>'+'</td>';}
return html;},_enableTimepicker:function(target){var $target=$(target),target_id=$target.attr('id'),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
var nodeName=target.nodeName.toLowerCase();if(nodeName=='input'){target.disabled=false;inst.trigger.filter('button').each(function(){this.disabled=false;}).end();}
else if(nodeName=='div'||nodeName=='span'){var inline=$target.children('.'+this._inlineClass);inline.children().removeClass('ui-state-disabled');}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target_id?null:value);});},_disableTimepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
var nodeName=target.nodeName.toLowerCase();if(nodeName=='input'){target.disabled=true;inst.trigger.filter('button').each(function(){this.disabled=true;}).end();}
else if(nodeName=='div'||nodeName=='span'){var inline=$target.children('.'+this._inlineClass);inline.children().addClass('ui-state-disabled');}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs[this._disabledInputs.length]=$target.attr('id');},_isDisabledTimepicker:function(target_id){if(!target_id){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target_id){return true;}}
return false;},_checkOffset:function(inst,offset,isFixed){var tpWidth=inst.tpDiv.outerWidth();var tpHeight=inst.tpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,'isRTL')?(tpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+tpWidth>viewWidth&&viewWidth>tpWidth)?Math.abs(offset.left+tpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+tpHeight>viewHeight&&viewHeight>tpHeight)?Math.abs(tpHeight+inputHeight):0);return offset;},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,'isRTL');while(obj&&(obj.type=='hidden'||obj.nodeType!=1)){obj=obj[isRTL?'previousSibling':'nextSibling'];}
var position=$(obj).offset();return[position.left,position.top];},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value;};return[parseFloat(convert(elem.css('border-left-width'))),parseFloat(convert(elem.css('border-top-width')))];},_checkExternalClick:function(event){if(!$.timepicker._curInst){return;}
var $target=$(event.target);if($target[0].id!=$.timepicker._mainDivId&&$target.parents('#'+$.timepicker._mainDivId).length==0&&!$target.hasClass($.timepicker.markerClassName)&&!$target.hasClass($.timepicker._triggerClass)&&$.timepicker._timepickerShowing&&!($.timepicker._inDialog&&$.blockUI))
$.timepicker._hideTimepicker();},_hideTimepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return;}
if(this._timepickerShowing){var showAnim=this._get(inst,'showAnim');var duration=this._get(inst,'duration');var postProcess=function(){$.timepicker._tidyDialog(inst);this._curInst=null;};if($.effects&&$.effects[showAnim]){inst.tpDiv.hide(showAnim,$.timepicker._get(inst,'showOptions'),duration,postProcess);}
else{inst.tpDiv[(showAnim=='slideDown'?'slideUp':(showAnim=='fadeIn'?'fadeOut':'hide'))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
var onClose=this._get(inst,'onClose');if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():''),inst]);}
this._timepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:'absolute',left:'0',top:'-100px'});if($.blockUI){$.unblockUI();$('body').append(this.tpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.tpDiv.removeClass(this._dialogClass).unbind('.ui-timepicker');},_getInst:function(target){try{return $.data(target,PROP_NAME);}
catch(err){throw'Missing instance data for this timepicker';}},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setTimeFromField:function(inst){if(inst.input.val()==inst.lastVal){return;}
var defaultTime=this._get(inst,'defaultTime');var timeToParse=defaultTime=='now'?this._getCurrentTimeRounded(inst):defaultTime;if((inst.inline==false)&&(inst.input.val()!='')){timeToParse=inst.input.val()}
if(timeToParse instanceof Date){inst.hours=timeToParse.getHours();inst.minutes=timeToParse.getMinutes();}else{var timeVal=inst.lastVal=timeToParse;if(timeToParse==''){inst.hours=-1;inst.minutes=-1;}else{var time=this.parseTime(inst,timeVal);inst.hours=time.hours;inst.minutes=time.minutes;}}
$.timepicker._updateTimepicker(inst);},_optionTimepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=='string'){return(name=='defaults'?$.extend({},$.timepicker._defaults):(inst?(name=='all'?$.extend({},inst.settings):this._get(inst,name)):null));}
var settings=name||{};if(typeof name=='string'){settings={};settings[name]=value;}
if(inst){if(this._curInst==inst){this._hideTimepicker();}
extendRemove(inst.settings,settings);this._updateTimepicker(inst);}},_setTimeTimepicker:function(target,time){var inst=this._getInst(target);if(inst){this._setTime(inst,time);this._updateTimepicker(inst);this._updateAlternate(inst,time);}},_setTime:function(inst,time,noChange){var origHours=inst.hours;var origMinutes=inst.minutes;var time=this.parseTime(inst,time);inst.hours=time.hours;inst.minutes=time.minutes;if((origHours!=inst.hours||origMinutes!=inst.minuts)&&!noChange){inst.input.trigger('change');}
this._updateTimepicker(inst);this._updateSelectedValue(inst);},_getCurrentTimeRounded:function(inst){var currentTime=new Date(),currentMinutes=currentTime.getMinutes(),adjustedMinutes=Math.round(currentMinutes/5)*5;currentTime.setMinutes(adjustedMinutes);return currentTime;},parseTime:function(inst,timeVal){var retVal=new Object();retVal.hours=-1;retVal.minutes=-1;var timeSeparator=this._get(inst,'timeSeparator'),amPmText=this._get(inst,'amPmText'),showHours=this._get(inst,'showHours'),showMinutes=this._get(inst,'showMinutes'),optionalMinutes=this._get(inst,'optionalMinutes'),showPeriod=(this._get(inst,'showPeriod')==true),p=timeVal.indexOf(timeSeparator);if(p!=-1){retVal.hours=parseInt(timeVal.substr(0,p),10);retVal.minutes=parseInt(timeVal.substr(p+1),10);}
else if((showHours)&&(!showMinutes||optionalMinutes)){retVal.hours=parseInt(timeVal,10);}
else if((!showHours)&&(showMinutes)){retVal.minutes=parseInt(timeVal,10);}
if(showHours){var timeValUpper=timeVal.toUpperCase();if((retVal.hours<12)&&(showPeriod)&&(timeValUpper.indexOf(amPmText[1].toUpperCase())!=-1)){retVal.hours+=12;}
if((retVal.hours==12)&&(showPeriod)&&(timeValUpper.indexOf(amPmText[0].toUpperCase())!=-1)){retVal.hours=0;}}
return retVal;},selectNow:function(e){var id=$(e.target).attr("data-timepicker-instance-id"),$target=$(id),inst=this._getInst($target[0]);var currentTime=new Date();inst.hours=currentTime.getHours();inst.minutes=currentTime.getMinutes();this._updateSelectedValue(inst);this._updateTimepicker(inst);this._hideTimepicker();},deselectTime:function(e){var id=$(e.target).attr("data-timepicker-instance-id"),$target=$(id),inst=this._getInst($target[0]);inst.hours=-1;inst.minutes=-1;this._updateSelectedValue(inst);this._hideTimepicker();},selectHours:function(event){var $td=$(event.currentTarget),id=$td.attr("data-timepicker-instance-id"),newHours=$td.attr("data-hour"),fromDoubleClick=event.data.fromDoubleClick,$target=$(id),inst=this._getInst($target[0]),showMinutes=(this._get(inst,'showMinutes')==true);if($.timepicker._isDisabledTimepicker($target.attr('id'))){return false}
$td.parents('.ui-timepicker-hours:first').find('a').removeClass('ui-state-active');$td.children('a').addClass('ui-state-active');inst.hours=newHours;var onMinuteShow=this._get(inst,'onMinuteShow');if(onMinuteShow){this._updateMinuteDisplay(inst);}
this._updateSelectedValue(inst);inst._hoursClicked=true;if((inst._minutesClicked)||(fromDoubleClick)||(showMinutes==false)){$.timepicker._hideTimepicker();}
return false;},selectMinutes:function(event){var $td=$(event.currentTarget),id=$td.attr("data-timepicker-instance-id"),newMinutes=$td.attr("data-minute"),fromDoubleClick=event.data.fromDoubleClick,$target=$(id),inst=this._getInst($target[0]),showHours=(this._get(inst,'showHours')==true);if($.timepicker._isDisabledTimepicker($target.attr('id'))){return false}
$td.parents('.ui-timepicker-minutes:first').find('a').removeClass('ui-state-active');$td.children('a').addClass('ui-state-active');inst.minutes=newMinutes;this._updateSelectedValue(inst);inst._minutesClicked=true;if((inst._hoursClicked)||(fromDoubleClick)||(showHours==false)){$.timepicker._hideTimepicker();return false;}
return false;},_updateSelectedValue:function(inst){var newTime=this._getParsedTime(inst);if(inst.input){inst.input.val(newTime);inst.input.trigger('change');}
var onSelect=this._get(inst,'onSelect');if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[newTime,inst]);}
this._updateAlternate(inst,newTime);return newTime;},_getParsedTime:function(inst){if(inst.hours==-1&&inst.minutes==-1){return'';}
if((inst.hours<0)||(inst.hours>23)){inst.hours=12;}
if((inst.minutes<0)||(inst.minutes>59)){inst.minutes=0;}
var period="",showPeriod=(this._get(inst,'showPeriod')==true),showLeadingZero=(this._get(inst,'showLeadingZero')==true),showHours=(this._get(inst,'showHours')==true),showMinutes=(this._get(inst,'showMinutes')==true),optionalMinutes=(this._get(inst,'optionalMinutes')==true),amPmText=this._get(inst,'amPmText'),selectedHours=inst.hours?inst.hours:0,selectedMinutes=inst.minutes?inst.minutes:0,displayHours=selectedHours?selectedHours:0,parsedTime='';if(showPeriod){if(inst.hours==0){displayHours=12;}
if(inst.hours<12){period=amPmText[0];}
else{period=amPmText[1];if(displayHours>12){displayHours-=12;}}}
var h=displayHours.toString();if(showLeadingZero&&(displayHours<10)){h='0'+h;}
var m=selectedMinutes.toString();if(selectedMinutes<10){m='0'+m;}
if(showHours){parsedTime+=h;}
if(showHours&&showMinutes&&(!optionalMinutes||m!=0)){parsedTime+=this._get(inst,'timeSeparator');}
if(showMinutes&&(!optionalMinutes||m!=0)){parsedTime+=m;}
if(showHours){if(period.length>0){parsedTime+=this._get(inst,'periodSeparator')+period;}}
return parsedTime;},_updateAlternate:function(inst,newTime){var altField=this._get(inst,'altField');if(altField){$(altField).each(function(i,e){$(e).val(newTime);});}},_getTimeTimepicker:function(input){var inst=this._getInst(input);return this._getParsedTime(inst);},_getHourTimepicker:function(input){var inst=this._getInst(input);if(inst==undefined){return-1;}
return inst.hours;},_getMinuteTimepicker:function(input){var inst=this._getInst(input);if(inst==undefined){return-1;}
return inst.minutes;}});$.fn.timepicker=function(options){if(!$.timepicker.initialized){$(document).mousedown($.timepicker._checkExternalClick).find('body').append($.timepicker.tpDiv);$.timepicker.initialized=true;}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=='string'&&(options=='getTime'||options=='getHour'||options=='getMinute'))
return $.timepicker['_'+options+'Timepicker'].apply($.timepicker,[this[0]].concat(otherArgs));if(options=='option'&&arguments.length==2&&typeof arguments[1]=='string')
return $.timepicker['_'+options+'Timepicker'].apply($.timepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options=='string'?$.timepicker['_'+options+'Timepicker'].apply($.timepicker,[this].concat(otherArgs)):$.timepicker._attachTimepicker(this,options);});};function extendRemove(target,props){$.extend(target,props);for(var name in props)
if(props[name]==null||props[name]==undefined)
target[name]=props[name];return target;};$.timepicker=new Timepicker();$.timepicker.initialized=false;$.timepicker.uuid=new Date().getTime();$.timepicker.version="0.2.9";window['TP_jQuery_'+tpuuid]=$;})(jQuery);(function($){'use strict';$.googleAnalyticsEvents=function(options)
{options=$.extend({},$.googleAnalyticsEvents.defaultOptions,options);var eventName='',data='',dataObject=_$(options.pathGAEvents)._,i=0,l=0,targets=[],uaObject=options.uaObject;dataObject=$.evalOptions(dataObject);for(eventName in dataObject)
{targets=[];if(typeof dataObject[eventName].length!=='undefined')
{for(i=0,l=dataObject[eventName].length;i<l;++i){typeof dataObject[eventName][i].target!='undefined'&&targets.push(dataObject[eventName][i].target);}}else
{typeof dataObject[eventName].target!='undefined'&&targets.push(dataObject[eventName].target);}
$(document).on(eventName,targets.join(','),function(e)
{var $target=$(e.target),push=function(eventName,conf)
{var etype=function(e){return e.type+'';};conf=$.extend({category:etype,action:etype,label:etype,value:0,noninteraction:false,complete:null,preventDefault:false,type:'ga'},conf);if(typeof conf.complete=='function')
{var callBackDone=0,callBackNeeded=($.isArray(conf.type)?conf.type.length:1),callBackResponded=false,allBackFunction=function(target,e)
{callBackDone++;if(callBackDone==callBackNeeded)
{!callBackResponded&&conf.complete.call(target,e);callBackResponded=true;}};setTimeout(function()
{!callBackResponded&&conf.complete.call(e.target,e);},options.timeout);}
if(conf.type=='ga'||($.isArray(conf.type)&&conf.type.indexOf('ga')!=-1))
{if(typeof _gaq!=='undefined')
{if(typeof conf.complete=='function')
{_gaq.push(['_set','hitCallback',function()
{allBackFunction(e.target,e);}]);}else
{_gaq.push(['_set','hitCallback',false]);}
_gaq.push([eventName,(typeof conf.category=='function'?conf.category.call(e.target,e,conf):conf.category).toString(),(typeof conf.action=='function'?conf.action.call(e.target,e,conf):conf.action).toString(),(typeof conf.label=='function'?conf.label.call(e.target,e,conf):conf.label).toString(),parseInt((typeof conf.value=='function'?conf.value.call(e.target,e,conf):conf.value),10),!!(typeof conf.noninteraction=='function'?conf.noninteraction.call(e.target,e,conf):conf.noninteraction)]);conf.preventDefault&&e.preventDefault();}}
if(conf.type=='ua'||($.isArray(conf.type)&&conf.type.indexOf('ua')!=-1))
{if(typeof uaObject=='function')
{uaObject('send','event',(typeof conf.category=='function'?conf.category.call(e.target,e,conf):conf.category).toString(),(typeof conf.action=='function'?conf.action.call(e.target,e,conf):conf.action).toString(),(typeof conf.label=='function'?conf.label.call(e.target,e,conf):conf.label).toString(),parseInt((typeof conf.value=='function'?conf.value.call(e.target,e,conf):conf.value),10),(typeof conf.complete=='function'?{'hitCallback':function(){allBackFunction(e.target,e);}}:conf.noninteraction));conf.preventDefault&&e.preventDefault();}}};for(i=0,l=dataObject[e.type].length;i<l;++i)
{if($target.is(dataObject[e.type][i].target))
{push('_trackEvent',dataObject[e.type][i]);if((typeof ua_supp)!='undefined')
{for(var key in ua_supp)
{ua_supp.hasOwnProperty(key)&&push(key+'._trackEvent',dataObject[e.type][i]);}}}}});}};$.googleAnalyticsEvents.pushEvent=function(app,action,label){$.jet.dev&&console.warn('$.googleAnalyticsEvents.pushEvent is deprecated. Please use $.googleEvents.send (with the same parameters)');$.googleEvents.send(app,action,label);};$.googleAnalyticsEvents.defaultOptions={pathGAEvents:'$data.common.GAEvents',uaObject:undefined,timeout:2e3};}(jQuery));(function($){$.initMainMenuEditorial=function()
{$('#nav > ul > li').mouseenter(function(){$(this).children('.sbnav').css({'display':'block','z-index':'350'});}).mouseleave(function(){$(this).children('ul').css('display','none');$(this).children('.sbnav').css('z-index','200');});$('#nav li .sbnav').mouseenter(function(){$(this).parent().addClass('hover');}).mouseleave(function(){$(this).parent().removeClass('hover');});};})(jQuery);(function($)
{$(document).start(function(){$.initMainMenuEditorial();var direction=$('html').attr('dir');$.inputTags.defaultConfig.direction=direction;if($data.expeert.actionActivatedByScreenType.slider==true&&$data.services.slideEdito)
{$data.services.slideEditoOptions=$.extend({fade:false,crossFade:false,continuous:true,auto:true,direction:direction,ease:'linear',speed:400,bindKeys:true,controlsShow:false,prevNext:true,miniature:true,miniatureOnHoverGo:true,pause:'6000'},$data.services.slideEditoOptions);$('.slideEdito').sudoSlider($data.services.slideEditoOptions);}
if($data.expeert.actionActivatedByScreenType.slider==true&&$data.services.slideMultipage)
{$data.services.slideMultipageOptions=$.extend({autowidth:false,autoheight:false,slideCount:4,moveCount:1,speed:400,direction:direction,prevNext:true,controlsShow:true,overflow:false},$data.services.slideMultipageOptions);$data.services.slideMultipageInstance=$('.slideMultipage').sudoSlider($data.services.slideMultipageOptions);}
if($data.expeert.actionActivatedByScreenType.slider==true&&$data.services.slideBigBanner){$data.services.slideBigBannerOptions={continuous:true,autowidth:false,autoheight:false,slideCount:1,moveCount:1,auto:true,direction:direction}
$('.slideBigBanner').sudoSlider($data.services.slideBigBannerOptions);}
if($data.expeert.actionActivatedByScreenType.slider==true&&$data.services.slideDefault)
{var firstPage=true,indicatorTimeout=0,displayButtons=function()
{clearTimeout(indicatorTimeout);$('.jContainerDiapo').removeClass('app_btn_disabled--nolink');},hidebuttons=function()
{clearTimeout(indicatorTimeout);$('.jContainerDiapo').addClass('app_btn_disabled--nolink');indicatorTimeout=setTimeout(displayButtons,800);};$data.services.slideDefaultOptions=$.extend({direction:direction,overflow:true,selector:'.slider',history:true,prevNext:false,beforeAniFunc:function()
{if(typeof $data.services.slideMultipageInstance!='undefined'){var $this=$(this),relId=parseInt($this.attr('data-rel'),10),nbSlide=parseInt($this.closest('ul.sliderCt').attr('data-nbslide'),10);if(((nbSlide-relId)>1)&&(relId>2)){$data.services.slideMultipageInstance.goToSlide(direction=='rtl'?relId-2:relId+2);}
else{if(direction=='rtl'){$data.services.slideMultipageInstance.goToSlide((relId<=2)?'first':'last');}
else{$data.services.slideMultipageInstance.goToSlide((relId<=2)?'last':'first');}}}},afterAniFunc:function()
{var $this=$(this),newId=$this.attr('data-id'),newUrl=$this.attr('data-url'),newTitle=$this.find('h2').text(),hasAds=typeof asl!=='undefined'&&Object.keys(asl.conf.positions||{}).length>0;hasAds&&hidebuttons();$('.sliderContainer').attr('id','p'+newId);$('.jContentOptions').attr('id','p'+newId);if(typeof newUrl!='undefined')
{if(firstPage==false){if(typeof ga!=='undefined'){ga('send','pageview',newUrl);}
hasAds&&$(document).trigger('reloadAdverts');}
else{firstPage=false;}
$('.jSocialBar').socialBar(encodeURIComponent(newUrl),encodeURIComponent(newTitle));}
if(typeof $data.services.slideDefaultList!=='undefined'&&typeof $data.services.slideDefaultList[newId]!=='undefined'){var prevData,nextData,$prevElement,$nextElement;if(typeof $data.services.slideDefaultList[newId].prev!=='undefined'){prevData=$data.services.slideDefaultList[$data.services.slideDefaultList[newId].prev];}
if(typeof $data.services.slideDefaultList[newId].next!=='undefined'){nextData=$data.services.slideDefaultList[$data.services.slideDefaultList[newId].next];}
if(typeof prevData!='undefined')
{if(direction=='rtl')
{$prevElement=$('.jTrackMultipageNext');}else{$prevElement=$('.jTrackMultipagePrev');}
$prevElement.attr({'href':prevData.url,'title':prevData.title});}
if(typeof nextData!='undefined')
{if(direction=='rtl')
{$nextElement=$('.jTrackMultipagePrev');}else{$nextElement=$('.jTrackMultipageNext');}
$nextElement.attr({'href':nextData.url,'title':nextData.title});}}
$('.jSliderContainer').attr('id','p'+newId);$('.jContentOptions').attr('id','p'+newId);$('.jIcoEditor').attr('id','p'+newId);$(document).trigger('loadEditoCoverImage');}},$.evalOptions($data.services.slideDefaultOptions));$($data.services.slideDefaultOptions.selector).sudoSlider($data.services.slideDefaultOptions);$(document).on('advertsReloaded',displayButtons);}},{name:'startEditorial'});})(jQuery);(function($)
{$(document).start(function()
{$(document).bind('loadEditoCoverImage',function()
{$('div.isDropDownPopup').each(function()
{var $dropDownPopup=$(this);if($dropDownPopup.length>0)
{$dropDownPopup.replaceWith($dropDownPopup.children('.jIcoEditor').removeClass('isDropDownBtn isDropDownPopup'));}});var postForm=function(action,$request,pictureUrl,$node)
{$.ajax({type:'post',dataType:'json',url:$data.common.baseUrl+$data.services.contents.content.urlController+'/posteditmenu',data:$.extend(true,{src:pictureUrl,act:action,xhr:1},$request),success:function(response)
{if(response.res)
{$node.click();$node.addClass('dropDownRefresh');var $content=$node.parents('.slideItem').first().find('div.hasId');if($content.length===1)
{$content.find('a.slideImg').first().remove();$content.prepend(response.details);}}else
{if(response.msg)
{alert(response.msg);}}}});};$('a.jIcoEditor').dropDownPopup({ajax:{url:$data.common.baseUrl+$data.services.contents.content.urlController+'/'+'sheditmenu/?xhr',data:{id:$('.jIcoEditor').attr('id')},success:function(data)
{this.$node.html(data.html);this.$this.trigger('popupLoad',this);typeof this.options.onLoad==='function'&&this.options.onLoad.call(this);}},onLoad:function()
{this.$node.find('input[type=checkbox]').ccmCheckbox();this.$node.find('.imgChoser').imageSelector();this.$node.find('#options').accordion({autoHeight:false,icons:false});},onShow:function()
{$(this).addClass('jIcoEditorSel');},onHide:function()
{$(this).parent().find('#uploadImage, .imgChoser, #downloadImage').hideInputError();$(this).removeClass('jIcoEditorSel');},onSubmit:function($context)
{var $jIcoEditor=$('.jIcoEditor'),$contextNode=$jIcoEditor.siblings('div');if($('#main_media_no_picture').attr('checked')==='checked')
{postForm.apply(this,['cover_remove',{id:$jIcoEditor.attr('id')},null,$jIcoEditor]);}else{var tab=$contextNode.find('#options').accordion('option','active');switch(tab)
{case 0:var src=$contextNode.find('.imgChoser img').attr("src");if(src&&src!=='undefined'){postForm.apply(this,['cover_select',{id:$jIcoEditor.attr('id')},src,$jIcoEditor]);}else{$contextNode.find('.imgChoser').showInputError('Select a picture');}
break;case 1:if($contextNode.find('#uploadImage').val()===''){$contextNode.find('#uploadImage').showInputError('Select a picture');}else{$contextNode.find('#formUpload').ajaxSubmit({url:$data.expeert.baseUrl+'/m/_xhr_upload_image/?xhr',dataType:'json',success:function(res){if(res[0].code===1){postForm.apply($context,['cover_link',{id:$jIcoEditor.attr('id')},res[0].resultat,$jIcoEditor]);}else{$contextNode.find('#uploadImage').showInputError(res[0].resultat);}}});}
break;case 2:if($contextNode.find('#downloadImage').ccmInputIsEmpty()){$contextNode.find('#downloadImage').showInputError('Select a picture');}else{postForm.apply(this,['cover_link',{id:$jIcoEditor.attr('id')},$contextNode.find('#downloadImage').val(),$jIcoEditor]);}
break;}}
return false;}});}).trigger('loadEditoCoverImage');},{name:'editoImage',refresh:true});})(jQuery);(function($)
{$.contentBlogForm={pendingUploads:0};$.contents.fields.mandatory={validate:function(self)
{var $mandatory=this.$element.find(self.selector);if($mandatory.ccmInputIsEmpty())
{$(self.name).showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);return false;}
$.profile&&console.log('ok',self.name);$(self.name).hideInputError();return true;}};$.contents.fields.mandatoryAnonymous={validate:function(self)
{var $screenName=this.$element.find('#screen_name'),$password=this.$element.find('#password'),$pattern=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);if($(self.selector).ccmInputIsEmpty())
{$(self.selector).showInputError($.contents.langs[$.contents.lang].COMMON_FORM_FIELD_FILLED);return false;}
if(self.selector.indexOf("mail")>0){if(!$pattern.test($(self.selector).val())){$(self.selector).showInputError($.fn.nlCreateUser.langs[$.contents.lang].INCORRECTEMAIL);return false;}else{$(self.selector).hideInputError();}}
if($screenName.is(':visible'))
{return $.contents.fields.mandatory.validate.call(this,{name:'ScreenName',selector:'#screen_name'});}
if($password.is(':visible'))
{return $.contents.fields.mandatory.validate.call(this,{name:'password',selector:'#password'});}
$.profile&&console.log('ok',self.name);$(self.name).hideInputError();return true;}};$.contents.fields.email={name:'email',id:'email',selector:'#email',validate:$.contents.fields.mandatoryAnonymous.validate};$.contents.confs.dynamic={tagName:'DIV',cnt:function(form,event)
{var
$form=$(form),$self=this.$element,index=0,result={content_type:$form.find('.ctype').val(),module_id:$form.find('.module_id').val(),contentToken:$form.find('#contentToken').val(),content:''};$form.hideFormError();(!result.module_id||result.module_id=='')&&(result.module_id=4);$.profile&&console.log('Blog content : ',this);for(var key in this.config.fields)
{key=this.config.fields[key];var selector=null;if(typeof key=='object')
{if(typeof key.selector!='undefined')
{selector=key.selector;}
if(key.id)
{if(selector==null)
{selector='#'+key.id;}
key=key.id;}else if(key.name){if(selector==null)
{selector='.'+key.name;}
key=key.name;}}else{selector='.'+key;}
if(selector)
{var $input=$form.find(selector),value=null;$.profile&&console.log(selector);if($input.length>0)
{value=($input[0].tagName==='DIV')?$input.html():$input.val();}
result[key]=value;}
index++;}
index=0;var $items=$form.find('.content-item');if($items.length>0)
{result.content={};$items.each(function()
{switch(this.tagName)
{case'LI':var item={};$(this).find('.content-property').each(function()
{item[$(this).attr('id')]=$(this).val();});$.profile&&console.log('- found',item);result.content[index]=item;index++;break;case'INPUT':if($(this).attr('type')!=='file')
{if($(this).attr('type')==='checkbox'){result.content[$(this).attr('id')]=$(this).is(':checked');}else{result.content[$(this).attr('id')]=$(this).val();}
break;}
if($(this).val()!='')
{$.contentBlogForm.pendingUploads+=1;var $this=$(this),$uploadForm=$this.parents('form.formUpload').first(),$target=$uploadForm.find('input.content-item[type=hidden]');if($target.length==0)
{$target=$uploadForm.append('<input type="hidden" id="'
+$this.attr('id')
+'" class="content-item" />').find('input.content-item[type=hidden]');}
var callbackTrigger='save';if(event.type){callbackTrigger=event.type;}
$.profile&&console.log(event);$this.attr('name',$this.attr('id')).removeClass('content-item');$.contentForm.startLoader();$uploadForm.ajaxSubmit({url:$uploadForm.attr('action'),dataType:'json',success:function(r)
{var ref=r;if(typeof r[0]!='undefined')
{ref=r[0];}
$.contentForm.stopLoader();$.contentBlogForm.pendingUploads-=1;switch(ref.code)
{case 0:$this.showInputError(ref.detail_erreur);$(document).scrollTo($this,0,{axis:'y',offset:-50});break;case 1:$.profile&&console.log('Got picture',r);$target.val(ref.resultat);if($.contentBlogForm.pendingUploads==0)
{$self.trigger(callbackTrigger,[{},$form.find('button[actid='+callbackTrigger+']')]);}
break;}}});$.profile&&console.log($form);}
break;default:result.content[$(this).attr('id')]=$(this).val();}});}
var $parentx=$form.find('.parentx');result.parentx=this.config.parentxupd||(($parentx.val()!='')?$parentx.val():undefined);if(this.config.mode==$.contents.mode.UPDATE)
{result.id=$form.find('[name=id]').val();result.parent=$form.find('.parent').val();}
var toStructElmt=function($form){return({id:$form.find('[name=id]'),parentx:$form.find('.parentx'),parent:$form.find('.parent'),module_id:$form.find('.module_id'),title:$form.find('.title'),content:$form.find('.content'),email:$form.find('.email'),password:$form.find('.password'),referer:$form.find('[name=referer]'),content_type:$form.find('.ctype'),tagsList:$form.find('input.tags'),publication_date:$form.find('.publicationDate'),publication_time:$form.find('.publicationTime'),url_final:$form.find('[name=url_final]'),url_title:$form.find('[name=url_title]'),url_resume:$form.find('[name=url_resume]'),url_image_src:$form.find('[name=url_image_src]:checked'),urlNoImage:$form.find('[name=urlNoImage]:checked'),contentToken:$form.find('[name=contentToken]'),screenName:$form.find('[name=screenName]'),email:$form.find('[name=email]'),sponsorship:$form.find('[name=sponsorship]'),player_html:$form.find('[name=player_html]'),player_height:$form.find('[name=player_height]'),player_width:$form.find('[name=player_width]'),player_url:$form.find('[name=player_url]'),player_provider:$form.find('[name=player_provider]'),date_year_event:$form.find('[name=date_year_event]'),location_name:$form.find('[name=location_name]'),location_id:$form.find('[name=location_id]'),star1:$form.find('[name=star1]:checked'),latitude:$form.find('[name=latitude]'),longitude:$form.find('[name=longitude]'),isbn:$form.find('[name=isbn]'),bookName:$form.find('[name=bookName]')});};var ces=toStructElmt(form),tagsData='',nbInput=ces.tagsList.length;if(nbInput!==0)
{if(nbInput===1)
{tagsData=ces.tagsList.val();}
else{tagsData={};ces.tagsList.each(function(){var $this=$(this),idCat=$this.closest('div.input').attr('data-cat');typeof idCat==='undefined'&&(idCat=-1);tagsData[idCat]=$this.val();});}}
result.tagsList=tagsData;if(ces.sponsorship.val()!==''){result.sponsorship=ces.sponsorship.val();}
if(ces.star1.val()!==''){result.star1=ces.star1.val();}
if(ces.isbn.val()!==''){result.isbn=ces.isbn.val();}
if(ces.bookName.val()!==''){result.bookName=ces.bookName.val();}
if(ces.email.val()!==''){result.email=ces.email.val();}
if(ces.screenName.val()!==''){result.screenName=ces.screenName.val();}
$.profile&&console.log('Post data : ',result);if($.contentBlogForm.pendingUploads)
{$.contentForm.stopLoader();return false;}
return result;}};$(document).bind('contentsLoaded',function(){$.core.tryOn('services.contents.content.blog.form.start',function(){$data.services.contents.content.blog.form.start===true&&typeof $data.services.contents.content.common.form.selector=='string'&&$data.services.contents.content.common.form.selector!==''&&$($data.services.contents.content.common.form.selector).contentForm($.extend(true,$.contents.confs.dynamic,$data.services.contents.content.common.form.options));});});$.fn.contentBlogForm=function(options)
{options=$.extend(true,$data.services.contents.content.common.form.options,(options.active||($data.services.contents.content.blog&&$data.services.contents.content.blog.form.start)?$.contents.confs.dynamic:{}),options);$.profile&&console.log('Start content blog',options,this);return this.contentForm(options);;};if($.fn.contentBindBehavior)
{$.fn.contentBindBehavior.showForm.displayData=function(data,$editing)
{data&&data.$data&&$.extend(true,$data,data.$data);$.profile&&console.log('Append HTML as blog',$data.services.contents.content.blog);$editing.append(data.html).find('.contentForm').contentBlogForm($.extend(data.conf,{mode:$.contents.mode.UPDATE,editing:$editing}));$('.jRecipeForm').length===1&&$('.jRecipeForm').formRecipe();$('.jBeautyForm').length===1&&$('.jBeautyForm').formBeauty();$('.jMaternityForm').length===1&&$('.jMaternityForm').formMaternity();if(typeof data.restartService!=="undefined"&&typeof data.restartService.ckeditor!=="undefined"){$editing.find('.contentForm textarea[name="content"]').ckeditor(data.restartService.ckeditor.options);}
if((typeof data.restartService==="undefined"||typeof data.restartService.ckeditor==="undefined")&&$.jet.started==true&&$data.services.ckeditor.start==true){$(document).trigger('refresh',{services:{ckeditor:{start:true,options:$data.services.ckeditor.options}}});}};}})(jQuery);(function($)
{$.fn.imageSelector=function(options)
{options=$.extend({},options);return this.each(function()
{var $this=$(this),$sel,list=$this.find('input[type=radio]'),container=$this,selected=0,sliding=false,previous=function(){if(sliding){return;}
if(selected===0){selected=list.length;}
selected--;select(selected);},next=function(){if(sliding){return;}
if(selected===list.length-1){selected=-1;}
selected++;select(selected);},select=function(i){$sel&&$sel.children('.position').html(i+1);$(list[i]).attr("checked","checked");var $ctn=$(container),$img=$ctn.find('img');if($img.length>=1)
{sliding=true;var pos=$img.position();$img.stop().css({position:"relative",top:0,left:0}).after($('<img src="'+$(list[i]).attr('value')+'" style="display:none;max-width:100px;max-height:100px;">').css({position:"absolute",top:pos.top,left:pos.left}).fadeIn(250,function(){$(this).css({position:'inherit',top:'auto',left:'auto'});})).fadeOut(250,function(){$(this).remove();sliding=false;});}
else{$('<img src="'+$(list[i]).attr('value')+'" style="display:none;max-width:100px;max-height:100px;">').prependTo($ctn).fadeIn();}};$(list).css('display','none');select(0);(list.length>1)&&($sel=$('<div></div>').append($('<a href="javascript:void(0);" class="icoUp"></a>').bind('click',function(){previous();}),$('<a href="javascript:void(0);" class="icoDown"></a>').bind('click',function(){next();}),'&nbsp;&nbsp;<span class="position ft85">1</span>/<span class="total ft75">'+list.length+'</span>').prependTo($this));});};})(jQuery);(function($)
{$.profileActions={$formEdit:$('#frmEditInfos'),init:function()
{$.profileActions.$formEdit.ajaxForm({type:'POST',dataType:'json',data:{xhr:1},success:function(json)
{if(typeof json.error!=='undefined')
{for(var key in json.error)
{var $elementKey=$('#'+key);if($elementKey.length===0){$.note(json.error[key]);}else{$elementKey.showInputError(json.error[key]);}}}
var action=$.profileActions.$formEdit.attr('action');typeof json.success!=='undefined'&&(window.location=action+(action.indexOf('?')===-1)?'?':'&'+'success');}});$.profileActions.$formEdit.find('select[name="gender"]').change(function(){$.profileActions.displayAvatarFromGender($(this).val());});if($('#editAvatar')){$.profileActions.displayAvatarBox();}
typeof $ec!=='undefined'&&$ec.on('click',this.onClick);$('#btnSubmit').click(this.onClick);},resetFormErrors:function()
{var divMail=$('#divEmail'),divErrorMail=$('#divErrorMail'),divChooseNick=$('#divChooseNick');divMail.removeClass('ccmcss_form__line--error');divErrorMail.hide();$('#divPass').removeClass('ccmcss_form__line--error');$('#divPassConf').removeClass('ccmcss_form__line--error');$('#divErrorPass').hide();divChooseNick.removeClass('ccmcss_form__line--error');$('#divErrorNick').hide();},onClick:function(e)
{var _this=$(this),_actid=_this.attr('actid'),_value=_this.attr('value');switch(_actid){case'submitForm':$.profileActions.sendForm();e.stopPropagation();e.preventDefault();break;case'change_image':$('#divImageLink').hide();$.profileActions.displayAvatarFromGender($.profileActions.$formEdit.find('select[name="gender"]').val());e.stopPropagation();e.preventDefault();break;case'showDivInfos':if($('#edit_tabs_profile').length===0)
{return true;}
$.profileActions.toggleProfileDivs(_value);e.stopPropagation();e.preventDefault();break;}},toggleProfileDivs:function(value)
{var divs=['lastactivity','group','following','followed','contents','followedcontents'],arrLen=divs.length;for(var i=0;i<arrLen;i++)
{if(divs[i]===value)
{$('#'+divs[i]).show();$('#li'+divs[i]).toggleClass("app_selected");$('#menu'+divs[i]).toggleClass("txt");}
else{$('#'+divs[i]).hide();$('#li'+divs[i]).removeClass("app_selected");$('#menu'+divs[i]).removeClass("txt");}}},sendForm:function()
{this.resetFormErrors();var customProfile={},$formAccount=$('#frmAccount');if($('#jCustomProfil input')!=='undefined'){$.each($('#jCustomProfil input').serializeArray(),function(){customProfile[this.name]=this.value;});}
$.ajax({type:'POST',dataType:'json',url:'//'+window.location.hostname+$data.expeert.baseUrl+'/p/_xhr_validate_user/',data:({nick:$formAccount.find('#txtNickName').val(),pass:$formAccount.find('#pwdPass').val(),passConf:$formAccount.find('#pwdPassConf').val(),email:$formAccount.find('#txtMail').val(),public_name:$formAccount.find('#txtPublicName').val(),first_name:$formAccount.find('#txtFirstName').val(),last_name:$formAccount.find('#txtLastName').val(),url:$formAccount.find('#txtUrl').val(),gender:$formAccount.find('[name="gender"]').val(),customProfile:customProfile}),success:function(response)
{var json=response;if(parseInt(json.uid))
{window.location=json.url;}
else
{$.each(json.err,function(k,v){switch(k){case'email':$('#divEmail').addClass('ccmcss_form__line--error');$('#divErrorMail').html(v).show();if(json.cod&16){$('#divErrorMail').append('<a href="/i/forgot_password">'+$e.msgs[$e.lang].recoverPassword+'.</a>');}
break;case'username':if($('#divChooseNick').is(":visible")){$('#divChooseNick').addClass('ccmcss_form__line--error');$('#divErrorNick').html(v).show();}
break;case'password':$('#divPass').addClass('ccmcss_form__line--error');$('#divErrorPass').html(v).show();break;case'gender':$('#divGender').addClass('ccmcss_form__line--error');$('#divErrorGender').html(v).show();break;}});}}});return false;},displayAvatarFromGender:function(gender)
{$('#divImageField').show();var $avatarMale=$('.jAvatarMale'),$avatarFemale=$('.jAvatarFemale'),$avatarOther=$('.jAvatarOther');switch(gender){case'M':$avatarMale.show();$avatarFemale.hide();$avatarOther.hide();break;case'F':$avatarFemale.show();$avatarMale.hide();$avatarOther.hide();break;default:$avatarFemale.show();$avatarMale.show();$avatarOther.show();break;}
return this;},displayAvatarBox:function()
{$('.jEditAvatarAction').on('click',function(e)
{e.preventDefault();$('#editAvatar').slideToggle('slow');});return this;}};$(document).start(function()
{_$('$data.services.editUserDatas')._.start&&$.profileActions.init();var $editProfile=$('#edit_tabs_ctn'),_isloaded={};if($editProfile.length===1)
{$editProfile.ccmUITabs({ajaxOptions:{dataType:'html',getParsedData:function(data){return data;}},tabHandlers:{load:{invites:function()
{var _f=$('#invite_frm');if(!_f[0]||_isloaded.invites)
{return;}
_f.contentForm({fields:["tags"],mode:"0",source:$data.expeert.baseUrl+'/c/suggest_tags',validateSource:$data.expeert.baseUrl+'c/validate_tags',onlyActive:true});var $pmsg=_f.find('#personal_msg').maxLength().bind('warnlengthin',function(){$reminder.css('color','#E01616');}).bind('warnlengthout',function(){$reminder.css('color','');}).bind('keyup maxlength pasted',function(){$total.html(limit-$(this).val().length);}),limit=parseInt($pmsg.attr('maxlength')),$reminder=_f.find('.reminder'),$total=_f.find('.total');setTimeout(function()
{var _frame=$('#mail_frame');if(_frame[0]&&InviteMailPreview)
{try{$('body',_frame[0].contentWindow.document).html(InviteMailPreview);$('#mail_preview').show();var _nh=_frame[0].contentWindow.document.body.offsetHeight+20;_frame[0].style.height=_nh+'px';$('#mail_wrap').height(Math.round(_nh*0.7)+'px');}catch(e){}}},350);_isloaded.invites=true;}}},cache:true});$('#edit_tabs_ctn ul li a').click(function()
{return false;});}});})(jQuery);(function($)
{$("input[type=checkbox]").ccmCheckbox();var checkPassword=function(typeField){var inputName='pss'+typeField+'Password',mainDivName='linePss'+typeField+'Password',errorDivName='divError'+typeField+'Passwd',errorMessage='passwordNotEmpty';if(typeField!==''){errorMessage='password_'+typeField.toLowerCase()+'_not_empty';}
if($('#frmEditPwd input#'+inputName).val()===''){$('div#'+mainDivName).addClass('ccmcss_form__line--error');$('div#'+errorDivName).html($e.msgs[$e.lang][errorMessage]).css('display','block');return false;}else{$('div#'+mainDivName).removeClass('ccmcss_form__line--error');$('div#'+errorDivName).html('').css('display','none');return true;}},$privacy=$("#privacy");$('#frmEditPwd input#btnSubmit').bind('click',function(){if(checkPassword('')&&checkPassword('Old')&&checkPassword('Conf')){$('#frmEditPwd').submit();}});$privacy.parent().find('.checked,.nocheck,label[for='+$privacy.attr('id')+']').bind('click',function(){var $firstname=$("#first_name"),$lastname=$("#last_name");if($(this).hasClass('checked')){$firstname.val('');$firstname.parent().addClass('disabled');$lastname.val('');$lastname.parent().addClass('disabled');}else{$firstname.parent().removeClass('disabled');$lastname.parent().removeClass('disabled');}});$('#jDeleteProfil').bind('click',function(){$('#jConfirmDeleteProfil').fadeIn(150);return false;});$('.jCloseProfileConfirm').bind('click',function(){$('#jConfirmDeleteProfil').fadeOut(150);return false;});})(jQuery);(function($){var $window=$(window),selectors=[],privor_visibles=[],defaults={interval:250,force_process:false,bypass_visibility:false},opts,throttle_interval=250,finalProcessTimerInterval=250;function process(){selectors.forEach(function(selector){$(selector).each(function(){var element=this
var was_visible=$.inArray(element,privor_visibles)!==-1
var is_visible=$(element).is(':appeared')
if(was_visible!==is_visible){$(element).trigger(is_visible?'appear':'disappear',[$(element)])
if(is_visible){privor_visibles.push(element);}else{privor_visibles=privor_visibles.filter(function(prior_visible){return prior_visible!==element;})}}})})}
var throttled_process=throttle(process,throttle_interval,finalProcessTimerInterval);function throttle(callback,limit,finalProcessLimit){var wait=false,finalProcessTimer=0;return function(){clearTimeout(finalProcessTimer);finalProcessTimer=setTimeout(function()
{callback.call();},finalProcessLimit);if(!wait){callback.call();wait=true;setTimeout(function(){wait=false;},limit);}};}
$.expr[':']['appeared']=function(element){var $element=$(element);if(opts.bypass_visibility===false&&!$element.is(':visible')){return false;}
var window_left=$window.scrollLeft();var window_top=$window.scrollTop();var offset=$element.offset();var left=offset.left;var top=offset.top;var status=top+$element.height()>=window_top&&top-($element.data('appear-top-offset')||0)<=window_top+$window.height()&&left+$element.width()>=window_left&&left-($element.data('appear-left-offset')||0)<=window_left+$window.width()
return status;};$.extend({appear:function(selector,options){opts=$.extend({},defaults,options||{});if($.inArray(selectors,selector)===-1){selectors.push(selector);}
once(function(){$(window).scroll(throttled_process).resize(throttled_process);})()
if(opts.force_process){throttled_process();}
return $(selector);}});$.extend({force_appear:function(){var hasSelectors=!!selectors.length
if(hasSelectors){process();}
return hasSelectors;},set_appear_throttle_interval:function(interval){throttle_interval=interval},});$.extend({appear_privor_visibles:function(){return privor_visibles}})
var once=function(fn){var called=false;return function(){if(called){return}
called=true;fn();}}
setInterval(function(){privor_visibles.forEach(function(element,index){if(!$.contains(document.body,element)){privor_visibles.splice(index,1)}})},1000*60*30)})(function(){if(typeof module!=='undefined'){return require('jquery');}else{return jQuery;}}());(function(window){var ua=navigator.userAgent;if(window.HTMLPictureElement&&((/ecko/).test(ua)&&ua.match(/rv\:(\d+)/)&&RegExp.$1<41)){addEventListener("resize",(function(){var timer;var dummySrc=document.createElement("source");var fixRespimg=function(img){var source,sizes;var picture=img.parentNode;if(picture.nodeName.toUpperCase()==="PICTURE"){source=dummySrc.cloneNode();picture.insertBefore(source,picture.firstElementChild);setTimeout(function(){picture.removeChild(source);});}else if(!img._pfLastSize||img.offsetWidth>img._pfLastSize){img._pfLastSize=img.offsetWidth;sizes=img.sizes;img.sizes+=",100vw";setTimeout(function(){img.sizes=sizes;});}};var findPictureImgs=function(){var i;var imgs=document.querySelectorAll("picture > img, img[srcset][sizes]");for(i=0;i<imgs.length;i++){fixRespimg(imgs[i]);}};var onResize=function(){clearTimeout(timer);timer=setTimeout(findPictureImgs,99);};var mq=window.matchMedia&&matchMedia("(orientation: landscape)");var init=function(){onResize();if(mq&&mq.addListener){mq.addListener(onResize);}};dummySrc.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(/^[c|i]|d$/.test(document.readyState||"")){init();}else{document.addEventListener("DOMContentLoaded",init);}
return onResize;})());}})(window);(function(window,document,undefined){"use strict";document.createElement("picture");var warn,eminpx,alwaysCheckWDescriptor,evalId;var pf={};var noop=function(){};var image=document.createElement("img");var getImgAttr=image.getAttribute;var setImgAttr=image.setAttribute;var removeImgAttr=image.removeAttribute;var docElem=document.documentElement;var types={};var cfg={algorithm:""};var srcAttr="data-pfsrc";var srcsetAttr=srcAttr+"set";var ua=navigator.userAgent;var supportAbort=(/rident/).test(ua)||((/ecko/).test(ua)&&ua.match(/rv\:(\d+)/)&&RegExp.$1>35);var curSrcProp="currentSrc";var regWDesc=/\s+\+?\d+(e\d+)?w/;var regSize=/(\([^)]+\))?\s*(.+)/;var setOptions=window.picturefillCFG;var baseStyle="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)";var fsCss="font-size:100%!important;";var isVwDirty=true;var cssCache={};var sizeLengthCache={};var DPR=window.devicePixelRatio;var units={px:1,"in":96};var anchor=document.createElement("a");var alreadyRun=false;var regexLeadingSpaces=/^[ \t\n\r\u000c]+/,regexLeadingCommasOrSpaces=/^[, \t\n\r\u000c]+/,regexLeadingNotSpaces=/^[^ \t\n\r\u000c]+/,regexTrailingCommas=/[,]+$/,regexNonNegativeInteger=/^\d+$/,regexFloatingPoint=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;var on=function(obj,evt,fn,capture){if(obj.addEventListener){obj.addEventListener(evt,fn,capture||false);}else if(obj.attachEvent){obj.attachEvent("on"+evt,fn);}};var memoize=function(fn){var cache={};return function(input){if(!(input in cache)){cache[input]=fn(input);}
return cache[input];};};function isSpace(c){return(c==="\u0020"||c==="\u0009"||c==="\u000A"||c==="\u000C"||c==="\u000D");}
var evalCSS=(function(){var regLength=/^([\d\.]+)(em|vw|px)$/;var replace=function(){var args=arguments,index=0,string=args[0];while(++index in args){string=string.replace(args[index],args[++index]);}
return string;};var buidlStr=memoize(function(css){return"return "+replace((css||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/ig,"")+";";});return function(css,length){var parsedLength;if(!(css in cssCache)){cssCache[css]=false;if(length&&(parsedLength=css.match(regLength))){cssCache[css]=parsedLength[1]*units[parsedLength[2]];}else{try{cssCache[css]=new Function("e",buidlStr(css))(units);}catch(e){}}}
return cssCache[css];};})();var setResolution=function(candidate,sizesattr){if(candidate.w){candidate.cWidth=pf.calcListLength(sizesattr||"100vw");candidate.res=candidate.w/candidate.cWidth;}else{candidate.res=candidate.d;}
return candidate;};var picturefill=function(opt){var elements,i,plen;var options=opt||{};if(options.elements&&options.elements.nodeType===1){if(options.elements.nodeName.toUpperCase()==="IMG"){options.elements=[options.elements];}else{options.context=options.elements;options.elements=null;}}
elements=options.elements||pf.qsa((options.context||document),(options.reevaluate||options.reselect)?pf.sel:pf.selShort);if((plen=elements.length)){pf.setupRun(options);alreadyRun=true;for(i=0;i<plen;i++){pf.fillImg(elements[i],options);}
pf.teardownRun(options);}};warn=(window.console&&console.warn)?function(message){console.warn(message);}:noop;if(!(curSrcProp in image)){curSrcProp="src";}
types["image/jpeg"]=true;types["image/gif"]=true;types["image/png"]=true;function detectTypeSupport(type,typeUri){var image=new window.Image();image.onerror=function(){types[type]=false;picturefill();};image.onload=function(){types[type]=image.width===1;picturefill();};image.src=typeUri;return"pending";}
types["image/svg+xml"]=document.implementation.hasFeature("http://wwwindow.w3.org/TR/SVG11/feature#Image","1.1");function updateMetrics(){isVwDirty=false;DPR=window.devicePixelRatio;cssCache={};sizeLengthCache={};pf.DPR=DPR||1;units.width=Math.max(window.innerWidth||0,docElem.clientWidth);units.height=Math.max(window.innerHeight||0,docElem.clientHeight);units.vw=units.width/100;units.vh=units.height/100;evalId=[units.height,units.width,DPR].join("-");units.em=pf.getEmValue();units.rem=units.em;}
function chooseLowRes(lowerValue,higherValue,dprValue,isCached){var bonusFactor,tooMuch,bonus,meanDensity;if(cfg.algorithm==="saveData"){if(lowerValue>2.7){meanDensity=dprValue+1;}else{tooMuch=higherValue-dprValue;bonusFactor=Math.pow(lowerValue-0.6,1.5);bonus=tooMuch*bonusFactor;if(isCached){bonus+=0.1*bonusFactor;}
meanDensity=lowerValue+bonus;}}else{meanDensity=(dprValue>1)?Math.sqrt(lowerValue*higherValue):lowerValue;}
return meanDensity>dprValue;}
function applyBestCandidate(img){var srcSetCandidates;var matchingSet=pf.getSet(img);var evaluated=false;if(matchingSet!=="pending"){evaluated=evalId;if(matchingSet){srcSetCandidates=pf.setRes(matchingSet);pf.applySetCandidate(srcSetCandidates,img);}}
img[pf.ns].evaled=evaluated;}
function ascendingSort(a,b){return a.res-b.res;}
function setSrcToCur(img,src,set){var candidate;if(!set&&src){set=img[pf.ns].sets;set=set&&set[set.length-1];}
candidate=getCandidateForSrc(src,set);if(candidate){src=pf.makeUrl(src);img[pf.ns].curSrc=src;img[pf.ns].curCan=candidate;if(!candidate.res){setResolution(candidate,candidate.set.sizes);}}
return candidate;}
function getCandidateForSrc(src,set){var i,candidate,candidates;if(src&&set){candidates=pf.parseSet(set);src=pf.makeUrl(src);for(i=0;i<candidates.length;i++){if(src===pf.makeUrl(candidates[i].url)){candidate=candidates[i];break;}}}
return candidate;}
function getAllSourceElements(picture,candidates){var i,len,source,srcset;var sources=picture.getElementsByTagName("source");for(i=0,len=sources.length;i<len;i++){source=sources[i];source[pf.ns]=true;srcset=source.getAttribute("srcset");if(srcset){candidates.push({srcset:srcset,media:source.getAttribute("media"),type:source.getAttribute("type"),sizes:source.getAttribute("sizes")});}}}
function parseSrcset(input,set){function collectCharacters(regEx){var chars,match=regEx.exec(input.substring(pos));if(match){chars=match[0];pos+=chars.length;return chars;}}
var inputLength=input.length,url,descriptors,currentDescriptor,state,c,pos=0,candidates=[];function parseDescriptors(){var pError=false,w,d,h,i,candidate={},desc,lastChar,value,intVal,floatVal;for(i=0;i<descriptors.length;i++){desc=descriptors[i];lastChar=desc[desc.length-1];value=desc.substring(0,desc.length-1);intVal=parseInt(value,10);floatVal=parseFloat(value);if(regexNonNegativeInteger.test(value)&&(lastChar==="w")){if(w||d){pError=true;}
if(intVal===0){pError=true;}else{w=intVal;}}else if(regexFloatingPoint.test(value)&&(lastChar==="x")){if(w||d||h){pError=true;}
if(floatVal<0){pError=true;}else{d=floatVal;}}else if(regexNonNegativeInteger.test(value)&&(lastChar==="h")){if(h||d){pError=true;}
if(intVal===0){pError=true;}else{h=intVal;}}else{pError=true;}}
if(!pError){candidate.url=url;if(w){candidate.w=w;}
if(d){candidate.d=d;}
if(h){candidate.h=h;}
if(!h&&!d&&!w){candidate.d=1;}
if(candidate.d===1){set.has1x=true;}
candidate.set=set;candidates.push(candidate);}}
function tokenize(){collectCharacters(regexLeadingSpaces);currentDescriptor="";state="in descriptor";while(true){c=input.charAt(pos);if(state==="in descriptor"){if(isSpace(c)){if(currentDescriptor){descriptors.push(currentDescriptor);currentDescriptor="";state="after descriptor";}}else if(c===","){pos+=1;if(currentDescriptor){descriptors.push(currentDescriptor);}
parseDescriptors();return;}else if(c==="\u0028"){currentDescriptor=currentDescriptor+c;state="in parens";}else if(c===""){if(currentDescriptor){descriptors.push(currentDescriptor);}
parseDescriptors();return;}else{currentDescriptor=currentDescriptor+c;}}else if(state==="in parens"){if(c===")"){currentDescriptor=currentDescriptor+c;state="in descriptor";}else if(c===""){descriptors.push(currentDescriptor);parseDescriptors();return;}else{currentDescriptor=currentDescriptor+c;}}else if(state==="after descriptor"){if(isSpace(c)){}else if(c===""){parseDescriptors();return;}else{state="in descriptor";pos-=1;}}
pos+=1;}}
while(true){collectCharacters(regexLeadingCommasOrSpaces);if(pos>=inputLength){return candidates;}
url=collectCharacters(regexLeadingNotSpaces);descriptors=[];if(url.slice(-1)===","){url=url.replace(regexTrailingCommas,"");parseDescriptors();}else{tokenize();}}}
function parseSizes(strValue){var regexCssLengthWithUnits=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i;var regexCssCalc=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;var i;var unparsedSizesList;var unparsedSizesListLength;var unparsedSize;var lastComponentValue;var size;function parseComponentValues(str){var chrctr;var component="";var componentArray=[];var listArray=[];var parenDepth=0;var pos=0;var inComment=false;function pushComponent(){if(component){componentArray.push(component);component="";}}
function pushComponentArray(){if(componentArray[0]){listArray.push(componentArray);componentArray=[];}}
while(true){chrctr=str[pos];if(chrctr===undefined){pushComponent();pushComponentArray();return listArray;}else if(inComment){if((chrctr==="*")&&(str[pos+1]==="/")){inComment=false;pos+=2;pushComponent();continue;}else{pos+=1;continue;}}else if(isSpace(chrctr)){if((str[pos-1]&&isSpace(str[pos-1]))||(!component)){pos+=1;continue;}else if(parenDepth===0){pushComponent();pos+=1;continue;}else{chrctr=" ";}}else if(chrctr==="("){parenDepth+=1;}else if(chrctr===")"){parenDepth-=1;}else if(chrctr===","){pushComponent()
pushComponentArray();pos+=1;continue;}else if((chrctr==="/")&&(str[pos+1]==="*")){inComment=true;pos+=2;continue;}
component=component+chrctr;pos+=1;}}
function isValidNonNegativeSourceSizeValue(s){if(regexCssLengthWithUnits.test(s)&&(parseFloat(s)>=0)){return true;}
if(regexCssCalc.test(s)){return true;}
if((s==="0")||(s==="-0")||(s==="+0")){return true;}
return false;}
unparsedSizesList=parseComponentValues(strValue);unparsedSizesListLength=unparsedSizesList.length;for(i=0;i<unparsedSizesListLength;i++){unparsedSize=unparsedSizesList[i];lastComponentValue=unparsedSize[unparsedSize.length-1];if(isValidNonNegativeSourceSizeValue(lastComponentValue)){size=lastComponentValue;unparsedSize.pop();}else{continue;}
if(unparsedSize.length===0){return size;}
unparsedSize=unparsedSize.join(" ");if(!(pf.matchesMedia(unparsedSize))){continue;}
return size;}
return"100vw";}
pf.ns=("pf"+new Date().getTime()).substr(0,9);pf.supSrcset="srcset"in image;pf.supSizes="sizes"in image;pf.selShort="picture>img,img[srcset]";pf.sel=pf.selShort;pf.cfg=cfg;if(pf.supSrcset){pf.sel+=",img["+srcsetAttr+"]";}
pf.DPR=(DPR||1);pf.u=units;pf.types=types;alwaysCheckWDescriptor=pf.supSrcset&&!pf.supSizes;pf.setSize=noop;pf.makeUrl=memoize(function(src){anchor.href=src;return anchor.href;});pf.qsa=function(context,sel){return context.querySelectorAll(sel);};pf.matchesMedia=function(){if(window.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches){pf.matchesMedia=function(media){return!media||(matchMedia(media).matches);};}else{pf.matchesMedia=pf.mMQ;}
return pf.matchesMedia.apply(this,arguments);};pf.mMQ=function(media){return media?evalCSS(media):true;};pf.calcLength=function(sourceSizeValue){var value=evalCSS(sourceSizeValue,true)||false;if(value<0){value=false;}
return value;};pf.supportsType=function(type){return(type)?types[type]:true;};pf.parseSize=memoize(function(sourceSizeStr){var match=(sourceSizeStr||"").match(regSize);return{media:match&&match[1],length:match&&match[2]};});pf.parseSet=function(set){if(!set.cands){set.cands=parseSrcset(set.srcset,set);}
return set.cands;};pf.getEmValue=function(){var body;if(!eminpx&&(body=document.body)){var div=document.createElement("div"),originalHTMLCSS=docElem.style.cssText,originalBodyCSS=body.style.cssText;div.style.cssText=baseStyle;docElem.style.cssText=fsCss;body.style.cssText=fsCss;body.appendChild(div);eminpx=div.offsetWidth;body.removeChild(div);eminpx=parseFloat(eminpx,10);docElem.style.cssText=originalHTMLCSS;body.style.cssText=originalBodyCSS;}
return eminpx||16;};pf.calcListLength=function(sourceSizeListStr){if(!(sourceSizeListStr in sizeLengthCache)||cfg.uT){var winningLength=pf.calcLength(parseSizes(sourceSizeListStr));sizeLengthCache[sourceSizeListStr]=!winningLength?units.width:winningLength;}
return sizeLengthCache[sourceSizeListStr];};pf.setRes=function(set){var candidates;if(set){candidates=pf.parseSet(set);for(var i=0,len=candidates.length;i<len;i++){setResolution(candidates[i],set.sizes);}}
return candidates;};pf.setRes.res=setResolution;pf.applySetCandidate=function(candidates,img){if(!candidates.length){return;}
var candidate,i,j,length,bestCandidate,curSrc,curCan,isSameSet,candidateSrc,abortCurSrc;var imageData=img[pf.ns];var dpr=pf.DPR;curSrc=imageData.curSrc||img[curSrcProp];curCan=imageData.curCan||setSrcToCur(img,curSrc,candidates[0].set);if(curCan&&curCan.set===candidates[0].set){abortCurSrc=(supportAbort&&!img.complete&&curCan.res-0.1>dpr);if(!abortCurSrc){curCan.cached=true;if(curCan&&isSameSet&&curCan.res>=dpr){bestCandidate=curCan;}}}
if(!bestCandidate){candidates.sort(ascendingSort);length=candidates.length;bestCandidate=candidates[length-1];for(i=0;i<length;i++){candidate=candidates[i];if(candidate.res>=dpr){j=i-1;if(candidates[j]&&(abortCurSrc||curSrc!==pf.makeUrl(candidate.url))&&chooseLowRes(candidates[j].res,candidate.res,dpr,candidates[j].cached)){bestCandidate=candidates[j];}else{bestCandidate=candidate;}
break;}}}
if(bestCandidate){candidateSrc=pf.makeUrl(bestCandidate.url);imageData.curSrc=candidateSrc;imageData.curCan=bestCandidate;if(candidateSrc!==curSrc){pf.setSrc(img,bestCandidate);}
pf.setSize(img);}};pf.setSrc=function(img,bestCandidate){var origWidth;img.src=bestCandidate.url;if(bestCandidate.set.type==="image/svg+xml"){origWidth=img.style.width;img.style.width=(img.offsetWidth+1)+"px";if(img.offsetWidth+1){img.style.width=origWidth;}}};pf.getSet=function(img){var i,set,supportsType;var match=false;var sets=img[pf.ns].sets;for(i=0;i<sets.length&&!match;i++){set=sets[i];if(!set.srcset||!pf.matchesMedia(set.media)||!(supportsType=pf.supportsType(set.type))){continue;}
if(supportsType==="pending"){set=supportsType;}
match=set;break;}
return match;};pf.parseSets=function(element,parent,options){var srcsetAttribute,imageSet,isWDescripor,srcsetParsed;var hasPicture=parent&&parent.nodeName.toUpperCase()==="PICTURE";var imageData=element[pf.ns];if(imageData.src===undefined||options.src){imageData.src=getImgAttr.call(element,"src");if(imageData.src){setImgAttr.call(element,srcAttr,imageData.src);}else{removeImgAttr.call(element,srcAttr);}}
if(imageData.srcset===undefined||options.srcset||!pf.supSrcset||element.srcset){srcsetAttribute=getImgAttr.call(element,"srcset");imageData.srcset=srcsetAttribute;srcsetParsed=true;}
imageData.sets=[];if(hasPicture){imageData.pic=true;getAllSourceElements(parent,imageData.sets);}
if(imageData.srcset){imageSet={srcset:imageData.srcset,sizes:getImgAttr.call(element,"sizes")};imageData.sets.push(imageSet);isWDescripor=(alwaysCheckWDescriptor||imageData.src)&&regWDesc.test(imageData.srcset||"");if(!isWDescripor&&imageData.src&&!getCandidateForSrc(imageData.src,imageSet)&&!imageSet.has1x){imageSet.srcset+=", "+imageData.src;imageSet.cands.push({url:imageData.src,d:1,set:imageSet});}}else if(imageData.src){imageData.sets.push({srcset:imageData.src,sizes:null});}
imageData.curCan=null;imageData.curSrc=undefined;imageData.supported=!(hasPicture||(imageSet&&!pf.supSrcset)||isWDescripor);if(srcsetParsed&&pf.supSrcset&&!imageData.supported){if(srcsetAttribute){setImgAttr.call(element,srcsetAttr,srcsetAttribute);element.srcset="";}else{removeImgAttr.call(element,srcsetAttr);}}
if(imageData.supported&&!imageData.srcset&&((!imageData.src&&element.src)||element.src!==pf.makeUrl(imageData.src))){if(imageData.src===null){element.removeAttribute("src");}else{element.src=imageData.src;}}
imageData.parsed=true;};pf.fillImg=function(element,options){var imageData;var extreme=options.reselect||options.reevaluate;if(!element[pf.ns]){element[pf.ns]={};}
imageData=element[pf.ns];if(!extreme&&imageData.evaled===evalId){return;}
if(!imageData.parsed||options.reevaluate){pf.parseSets(element,element.parentNode,options);}
if(!imageData.supported){applyBestCandidate(element);}else{imageData.evaled=evalId;}};pf.setupRun=function(){if(!alreadyRun||isVwDirty||(DPR!==window.devicePixelRatio)){updateMetrics();}};if(window.HTMLPictureElement){picturefill=noop;pf.fillImg=noop;}else{(function(){var isDomReady;var regReady=window.attachEvent?/d$|^c/:/d$|^c|^i/;var run=function(){var readyState=document.readyState||"";timerId=setTimeout(run,readyState==="loading"?200:999);if(document.body){pf.fillImgs();isDomReady=isDomReady||regReady.test(readyState);if(isDomReady){clearTimeout(timerId);}}};var timerId=setTimeout(run,document.body?9:99);var debounce=function(func,wait){var timeout,timestamp;var later=function(){var last=(new Date())-timestamp;if(last<wait){timeout=setTimeout(later,wait-last);}else{timeout=null;func();}};return function(){timestamp=new Date();if(!timeout){timeout=setTimeout(later,wait);}};};var onResize=function(){isVwDirty=true;pf.fillImgs();};on(window,"resize",debounce(onResize,99));on(document,"readystatechange",run);types["image/webp"]=detectTypeSupport("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==");})();}
pf.picturefill=picturefill;pf.fillImgs=picturefill;pf.teardownRun=noop;picturefill._=pf;window.picturefillCFG={pf:pf,push:function(args){var name=args.shift();if(typeof pf[name]==="function"){pf[name].apply(pf,args);}else{cfg[name]=args[0];if(alreadyRun){pf.fillImgs({reselect:true});}}}};while(setOptions&&setOptions.length){window.picturefillCFG.push(setOptions.shift());}
window.picturefill=picturefill;if(typeof module==="object"&&typeof module.exports==="object"){module.exports=picturefill;}else if(typeof define==="function"&&define.amd){define("picturefill",function(){return picturefill;});}})(window,document);(function($){$.imageUploader={defaultOptions:{mainTemplate:'<ul>',tabTemplate:'<li>',onComplete:function(){},onError:function(){},onValidate:function(){},tabs:{gallery:{template:'<form><div></div></form>',enabled:true,controler:function(){return'/';}},file:{template:'<form id="formUpload">'
+'<div>'
+'<input type="file" name="uploadImage" id="uploadImage" class="uploadImage" />'
+'<div class="msg"></div>'
+'</div>'
+'</form>',enabled:true,controler:function(){return'/';}},url:{template:'<form><div>'
+'<input type="text" id="downloadImage" name="downloadImage"'
+'class="inputTxt downloadImage" width="238px" default="http://" />'
+'</div></form>',enabled:true,controler:function(){return'/';}},preview:{template:'<div></div>',enabled:true,controler:function(){return'/';}}}},create:function(options){options=$.extend(true,{},$.imageUploader.defaultOptions,options);var self=this,$node=$(options.template);for(tab in options.tabs){options.tabs[tab].enabled&&$node.append(options.tabs[tab].template);}
return $node.bind('preview',function(e){}).bind('uploadUrl',function(e){}).bind('uploadFile',function(e){self.callController($(this),'#formUpload',options.tabs.file.controler(),options.onError,options.onComplete);}).bind('uploadGallery',function(e){}).bind('upload',function(e){$(this).trigger('uploadFile',this);});},callController:function($context,selector,ctl,onError,onComplete){$context.find(selector).ajaxSubmit({url:ctl,dataType:'json',success:function(data){if(data.errors){onError(data);}else{onComplete(data);}}});}};})(jQuery);(function($)
{$.counter={defaultOptions:{speed:250,countSpeed:25,from:null,value:'incr',limit:{min:null,max:null},limitState:{min:false,max:false},getValue:function()
{match=this.html().match(/[^\d]*(\d+)[^\d]*/);if(match!==null&&match.length>1)
{return parseInt(match[1]);}
return 0;},onLimit:null,afterChange:function(valueBefore,valueAfter,options)
{options.onLimit&&(options.limitState.min||options.limitState.max)&&options.onLimit.apply(this,[valueBefore,valueAfter,options]);$.core.$fake[0]=this;$.core.$fake.effect('pulsate',{times:2},options.speed);},beforeChange:function(valueBefore,valueAfter,options)
{var $this=$(this);if(options.from!==null)
{var $from=$(options.from);if($from.length===0||$from.length>1)
{console.warn('From is empty or contain more than one node so it can\'t be executed correctly');}
else{$from.effect('transfer',{to:$this,className:"ui-effects-transfer"},options.speed,function()
{$this.trigger('doChange',[valueBefore,valueAfter,options]);});}}
else{$this.trigger('doChange',[valueBefore,valueAfter,options]);}}},doChange:function(e,valueBefore,valueAfter,options)
{e.stopPropagation();var
$this=$(this),html=$this.html(),self=this,value=valueBefore,labelSingle=$this.attr('data-label-single'),labelMulti=$this.attr('data-label-multi'),changeValue=function()
{if(value!=valueAfter)
{value=(valueAfter>value?value+1:value-1);$this.data('counterValue',value);if(labelSingle&&labelMulti)
{$this.html(value>1?value+' '+labelMulti:value+' '+labelSingle);}
else{$this.html(html.replace(/\d+/,value));}
if(value!=valueAfter)
{return setTimeout(changeValue,options.countSpeed);}
options.afterChange.apply(self,[valueBefore,valueAfter,options]);}
$this.trigger('counterChanged',[valueBefore,valueAfter,options]);};changeValue();},beforeChange:function(e,options)
{e.stopPropagation();options.limitState={min:false,max:false};$.core.$fake[0]=this;options=$.extend({},$.core.$fake.data('counterOptions'),options);var valueBefore=options.getValue.apply($.core.$fake),valueAfter;if(typeof valueBefore=='number'&&!isNaN(valueBefore))
{valueAfter=(function(){switch(options.value)
{case'incr':case'+1':case'++':return valueBefore+1;case'decr':case'--':case'-1':return valueBefore-1;default:return options.value;}})();options.limit.min!==null&&valueAfter<=options.limit.min&&(valueAfter=options.limit.min,options.limitState.min=true);options.limit.max!==null&&valueAfter>=options.limit.max&&(valueAfter=options.limit.max,options.limitState.max=true);}
options.beforeChange.apply(this,[valueBefore,valueAfter,options]);}};$.fn.counter=function(options)
{options=$.extend({},$.counter.defaultOptions,options);return this.data('counterOptions',options).bind('counterChange',$.counter.beforeChange).bind('doChange',$.counter.doChange).each(function(){$.core.$fake[0]=this;$.core.$fake.data('counterValue',options.getValue.apply($.core.$fake));});};$.fn.counterValue=function()
{return this.first().data('counterValue');};})(jQuery);(function($)
{if(typeof $.ui=='undefined'){return;}
$.widget("custom.ccmTabs",$.ui.tabs,{unload:function(index)
{$(this.anchors.eq(this._getIndex(index))[0]).removeData("cache.tabs");return this;},getPosition:function(name)
{typeof name!='undefined'&&(name.substr(0,1)!='#')&&(name='#'+name);var anchors=this.anchors,i;for(i in anchors)
{if(anchors.hasOwnProperty(i)&&!isNaN(parseInt(i))&&typeof $(anchors[i]).attr('href')!='undefined'&&$(anchors[i]).attr('href')==name)
{return parseInt(i);}}
return;},getContainerByPosition:function(position)
{if(typeof position=='undefined')
{position=this.options.selected;}
return $(this.panels[position]);},getPositionByContainer:function(element)
{for(var key in this.panels)
{if(!this.panels.hasOwnProperty(key)){continue;}
if($(this.panels[key])[0]==element[0])
{return key;}}
return null;},getAnchorByPosition:function(position)
{if(typeof position=='undefined')
{position=this.options.selected;}
return $(this.anchors[position]);},getContainerByDataKey:function(dataKey)
{var position=this.getPositionByDataKey(dataKey);if(typeof position=='undefined')
{return null;}
return this.getContainerByPosition(position);},getPositionByDataKey:function(dataKey)
{return this.getPosition(this.element.find('a[data-key="'+dataKey+'"]').attr('href'));},selectByDataKey:function(dataKey)
{this.select(this.getPositionByDataKey(dataKey));},load:function(index,event)
{index=this._getIndex(index);if($.ui.version.split('.')[1]<9)
{var self=this,o=this.options,a=this.anchors.eq(index)[0],url=$.data(a,"load.tabs");this.abort();if(!url||this.element.queue("tabs").length!==0&&$.data(a,"cache.tabs")){this.element.dequeue("tabs");return;}
this.lis.eq(index).addClass("ui-state-processing");if(o.spinner){var span=$('span',a),$clone;if(span.is(':visible')){$clone=span.css({display:'inline-block'}).clone(false,false).css({opacity:0.3});span.data('label.tabs',span.html()).empty().append($clone).spin(o.spinnerOptions);}}
this.xhr=$.ajax($.extend({},{global:false,url:url.indexOf('xhr')==-1?(url.indexOf('?')==-1?url+'?xhr':url+'&xhr'):url,success:function(r,s){typeof o.ajaxOptions.getParsedData==='function'&&(r=o.ajaxOptions.getParsedData.call(this,r));self.element.find(self._sanitizeSelector(a.hash)).html(r);self._cleanup();if(o.cache){$.data(a,"cache.tabs",true);}
self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.success(r,s);}
catch(e){}
self.element.dequeue("tabs");},error:function(xhr,s,e){self._cleanup();self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.error(xhr,s,index,a);}
catch(e){}
self.element.dequeue("tabs");}},o.ajaxOptions));return this;}}});$.ccmUITabs={historyBind:false,historyDelay:100,historyLastTimestamp:null,defaultOptions:{cache:true,tabHandlers:{load:{}},spinner:true,history:false,spinnerOptions:{width:2,radius:4,length:4},ajaxOptions:{dataType:'json',getParsedData:function(data)
{return data.html;}}},initTabs:function(options)
{var $self=$(this),_getSelected=function(){return parseInt($self.children('ul').attr('data-selected'),10);},_a=(location.hash.match(/#/)!==null?(function(){return $self.find(location.hash).length<1?_getSelected():location.hash.substr(1);})():_getSelected()),functionHandler;$self.ccmTabs(options);typeof _a!=="undefined"&&$self.ccmTabs('option','selected',_a);$.each(options.tabHandlers,function(eventName,values)
{$.each(values,function(tabId,functionUser)
{if(typeof functionUser=='function')
{var $divToHand=$self.ccmTabs('getContainerByDataKey',tabId);if($divToHand!=null&&$divToHand.length!==0)
{var paramId=tabId,tabId=$divToHand.attr('id');switch(eventName)
{case'load':$.trim($divToHand.html())!==''&&typeof options.tabHandlers[eventName][tabId]==='function'&&options.tabHandlers[eventName][tabId].call($divToHand[0],{type:'ccmtabsload'},eventName,options);$self.bind('ccmtabsload',function(e,panelObjet){$.ccmUITabs._handlerBindActions(e,panelObjet,eventName,options,tabId,paramId);});break;case'select':$self.bind('ccmtabsselect',function(e,panelObjet){panelObjet.panel==$divToHand[0]&&$.ccmUITabs._handlerBindActions(e,panelObjet,eventName,options,tabId,paramId);});break;case'show':$self.bind('ccmtabsshow',function(e,panelObjet){panelObjet.panel==$divToHand[0]&&$.ccmUITabs._handlerBindActions(e,panelObjet,eventName,options,tabId,paramId);});break;default:console.warn('this event is not yet handled !');}}}});});},_handlerBindActions:function(e,panelObject,type,options,tabId,paramId)
{$.core.$fake[0]=panelObject.panel;$.core.$fake.is('#'+tabId)&&(function(){var functionHandler=options.tabHandlers[type][paramId]||function(){};typeof functionHandler==='function'&&functionHandler.call(panelObject.panel,e,type,options);})();}};$.fn.ccmUITabs=function(options)
{options=$.extend(true,{},$.ccmUITabs.defaultOptions,options);var selector=this.selector;return this.each(function()
{$.ccmUITabs.initTabs.call(this,options);var $self=$(this),tabClass=$self.find('.ui-tabs-nav').attr('data-tabclass');typeof tabClass!="undefined"&&$self.find('div.ui-tabs-panel').addClass(tabClass);$self.bind('ccmtabsselect',function(e,ui)
{var $selTab=$(ui.tab);if(typeof $selTab.attr('data-directlink')!='undefined')
{window.location=$selTab.attr('data-url');return false;}
e.stopPropagation();}).find('.ui-tabs-nav:first li a[data-url]').each(function()
{var $this=$(this),url=$this.attr('data-url');$this.data('href.tabs',url).data('load.tabs',url).data('cache.tabs',true);});if(options.history==true)
{$.ccmUITabs.historyBind==false&&($.ccmUITabs.historyBind=true)&&History.Adapter.bind(window,'statechange',function(e)
{var State=History.getState();if(e.timeStamp-State.data.timestamp>$.ccmUITabs.historyDelay)
{$.ccmUITabs.historyLastTimestamp=e.timeStamp;$('.ui-tabs li a[data-key="'+State.data.dataKey+'"]').closest('.ui-tabs').ccmTabs('selectByDataKey',State.data.dataKey);}});var $actualTab=$self.ccmTabs('getAnchorByPosition');History.replaceState({timestamp:new Date().getTime(),dataKey:$actualTab.attr('data-key')},History.options.initialTitle,decodeURIComponent(window.location.pathname+window.location.search));$self.bind('ccmtabsselect',function(e,a)
{var $sTab=$(a.tab);e.stopPropagation();if(($.ccmUITabs.historyLastTimestamp==null)||(e.timeStamp-$.ccmUITabs.historyLastTimestamp)>$.ccmUITabs.historyDelay)
{History.pushState({timestamp:new Date().getTime(),dataKey:$sTab.attr('data-key')},History.options.initialTitle+' - '+$sTab.attr('title'),$sTab.data('load.tabs'));$.ccmUITabs.historyLastTimestamp=null;}});};});};})(jQuery);(function($)
{'use strict';$.fn.showPassword=function()
{this.each(function(index,element){$(element).on('click',function(event){var
$target=$(event.target),$clearInput=$('input[data-password-link-to='+$target.data('password-link')+']'),$cryptedInput=$('input[data-password-link-from='+$target.data('password-link')+']');if($target.data('show')===$target.attr('data-icomoon')){$clearInput.val($cryptedInput.val()).show();$cryptedInput.hide();$target.attr('data-icomoon',$target.data('hide'));}else{$cryptedInput.val($clearInput.val()).show();$clearInput.hide();$target.attr('data-icomoon',$target.data('show'));}});var
$passwordLink=$(element).data('password-link'),$clearInput=$('input[data-password-link-to='+$passwordLink+']');$clearInput.on('blur',function(){$('input[data-password-link-from='+$passwordLink+']').val($clearInput.val());});});return this;};$(document).start(function()
{$('.jShowPassword').showPassword();});})(jQuery);(function($){$.extend(true,$.tagCloud.langs,{'AR':{'TAG_CLOUD_ACCEPT':'Accepter ce tag','TAG_CLOUD_ACCEPT_ALL':'Tout accepter','TAG_CLOUD_REFUSE':'Supprimer ce tag'}});})(jQuery);(function($)
{$.extend(true,$e.msgs,{AR:{ajaxStart:'Loading ...',ajaxError:'Request error: click here for more informations',fieldFilled:'This field must be filled',recoverPassword:'Recover password',passwordNotEmpty:'The password is empty',newMsg:' '}});$.extend(true,$.inputTags.langs,{AR:{enter_tags:'   (Tags)   ',enter_tags_short:'Enter groups here',modify_tags:'Modify the groups list',edit_tag:'Edit the group',delete_tag:'Delete the group',create_tag:'Submit the group',no_tag:'No matching group',max_tag_tipsy:'Maximum number of groups exceeded',main_tag:'This is the main group'}});$.extend(true,$.actionSocial.langs,{AR:{UNFOLLOWUSER:' ',FOLLOWUSER:'',UNFOLLOWGROUP:'   ',FOLLOWGROUP:'  ',FOLLOWGROUP_SUGGEST:'         <a href="${url}">  . </a>.'}});$e.lang='AR';})(jQuery);(function($){$.extend(true,$.contents.langs,{AR:{COMMON_FORM_FIELD_FILLED:"This field must be filled",COMMON_FORM_INVALID_DATE:"This date is invalid",COMMON_FORM_INVALID_TIME:"This time is invalid",COMMON_FORM_URL_INVALID:"Invalid URL",COMMON_FORM_CHAR_MAX:" characters maximum",COMMON_DBLCLICK_TO_EDIT:"Double-click to edit",COMMON_FORM_FIELD_ACTIVE_TAG_MISSING:"   ",COMMON_FORM_FIELD_HIGHLIGHT_TAG_MISSING:"At least one valid tag is needed",COMMON_FORM_POPUP_FOLLOW_ACTION:'Do you want to follow that topic ?<br>'
+'<div class="marT15"><input type="checkbox" name="chk_dont_ask" id="chk_dont_ask"> <label for="chk_dont_ask">Don\'t ask anymore</label></div>'
+'<div class="marT15 txtR">'
+'<a class="followNo marR5" href="javascript:void(0);">No</a>'
+'<button asrc="answer" class="follow_yes buttonS-B">Yes</button>'
+'</div>',COMMON_FORM_POPUP_FOLLOW_INFO:'You can automaticaly follow the contents that you publish<br><br>'
+'If you want to activate this functionality, <a href="/fr/p/edit">click here</a>'}});})(jQuery);(function($){$.extend(true,$.expeertSearchEngine.langs,{'AR':{'TIP_EMPTY':'Type a query first','MORE':'View the ${total} results &hellip;'}});})(jQuery);(function($)
{'use strict';$.extend(true,$.fn.nlCreateUser.langs,{'AR':{'FIRSTSENTENCE':'       .','SECONDSENTENCE':'            .','THIRDSENTENCE':'      !','INCORRECTEMAIL':'    '}});})(jQuery);(function($)
{'use strict';$.extend(true,$.shareMail.langs,{'AR':{'CANCEL':'','SEND':'','SENDER_NAME':'','SENDER_EMAIL':' ','DELIVERY_EMAIL':' ','DELIVERY_MESSAGE':'','DEFAULT_EMAIL':'";"    '}});})(jQuery);(function($){$.extend(true,$.groups.langs,{'AR':{'NB_FOLLOWERS_SING':'       ','NB_FOLLOWERS_PLUR':'       ','NB_CONTENTS_SING':'   ','NB_CONTENTS_PLUR':'   ','NO_CONTENT':'no content','FOLLOWGROUP':'','UNFOLLOWGROUP':' ','MORE':'','MODIFY':'Modify'}});})(jQuery);(function($){$.extend(true,$.tinyConfigs.langs,{'AR':{'NOFOLLOWER':'   ','FOLLOWER':'${flw} ','FOLLOWERS':'${flw} ','FOLLOWUSER':'','UNFOLLOWUSER':' ','FOLLOWTAG':'','UNFOLLOWTAG':' ','LVL':'Lvl','PROPOSAL_SHORT':'Proposal','PROPOSAL_LONG':'This group is actually only a proposal so you can\'t follow it yet'}});})(jQuery);(function($){$.extend(true,$.ccmEditor.langs,{'AR':{'TT_BOLD':'Bold','TT_ITALIC':'Italic','TT_UNDERLINE':'Underline','TT_STRIKE':'Strike','TT_LEGEND':'Legend','TT_CODE':'Code snippet','TT_UL':'Unordered list','TT_OL':'Ordered list','TT_FORMAT':'Text size','TT_COLORS':'Text color','TT_URL':'Insert or edit a link','TT_SOURCE':'Edit the source','TT_IMAGE':' ','TT_VIDEO':'Insert a video','TT_VIDEO_BLOC':'Insert an Ooyala video','TT_INDEX':'Insert a summary','TT_URL_LINKTO':'Type the link here (example : http://expeert.com )','TT_URL_LINKNAME':'Type the link name here (example : expeert )','TT_URL_INSERT':'Insert that link','TT_SOURCE_CANCEL':'Apply modifications','TT_CLOSE':'Close this window','TT_CANCEL':'Cancel changements','TT_QUIZZ':'Inserer un quiz','TB_IMG_UPDATE':'Update','TB_IMG_DELETE':'Delete','TB_IMG_SIZE_UP':'Enlarge','TB_IMG_SIZE_DOWN':'Decrease','ALIGN_LEFT':'Align to left','ALIGN_RIGHT':'Align to right','ALIGN_CENTER':'Center','ALIGN_FULL':'Full size','FORMAT_NORMAL':'Normal','FORMAT_TITLE':'Title','URL_DISPLAY':'Text to display ','URL_LINK':'Link to ','URL_TITLE':'Add a link','URL_ERROR_URL':'A link is required','URL_ERROR_URL_SHAPE':'URL is malformed (example : http://expeert.com/ )','URL_TOO_MUCH_WORDS':'Your selection contain too much words (${current}), please select a maximum of ${max} words','URL_TOO_MUCH_WORDS_SIMPLE':'Please use less than ${max} words','URL_REMOVE':'Remove','URL_REMOVE_LEGEND':'Remove the link but keep the text','URL_DELETE':'Delete','URL_DELETE_LEGEND':'Completly delete the link','URL_VISIT':'Test','URL_VISIT_LEGEND':'Open a window to the link destination','URL_EDIT':'Modify','URL_VIDEO':'Insert a video','URL_EDIT_LEGEND':'Open the dialog to edit the link','URL_WARN_READONLY':'Your selection contain HTML so you will only be able to modifiy the first link url contained','URL_WARN_LINKONLY':'Your selection already contain a link and then have been reduced to this one','SOURCE_TITLE':'Source','BUTTON_INSERT':'Insert','BUTTON_ACCEPT':'Accept','BUTTON_CANCEL':'Cancel','INDEX_INSERT':'Insert a summary','INDEX_BTN_INSERT':'Insert the summary','INDEX_TITLE':'The summary title','INDEX_ALIGN':'Alignement','INDEX_TITLE_HINT':'Define the summary title or leave it blank','IMAGE_PREVIEW':'','IMAGE_INSERT':' ','IMAGE_UPLOAD':'','IMAGE_ALIGN':'Alignement','IMAGE_LEGEND':'Caption','IMAGE_LEGEND_INPUT':'Caption of picture','IMAGE_CREDITS_INPUT':'Credits','IMAGE_GETURL':'By Using an image from the web','IMAGE_UPLOAD_ADVICE':'Put an image file from your computer','IMAGE_DOWNLOAD_ADVICE':'Your URL here...','IMAGE_DOWNLOAD_ERROR_EMPTY':'Please enter an URL','IMAGE_DOWNLOAD_ERROR_TYPE':'Please choose an image in one of the supported formats (jpeg, gif, png)','IMAGE_UPLOAD_ERROR_EMPTY':'Please send a file','IMAGE_UPLOAD_ERROR_TYPE':'Please send an image in one of the supported formats (jpeg, gif, png)','IMAGE_BTN_INSERT':' ','IMAGE_CHOOSE_PART_1':'   ','IMAGE_CHOOSE_PART_2':'  ','IMAGE_OPTIONS_PART_1':'  ','IMAGE_OPTIONS_PART_2':' ','CODE_TWICE':'Hit Enter twice to leave code block','IMAGE_IN_BATCH':'This image is a part of a batch','IMAGE_IN_BATCH_TITLE':'After insertion image will be selected or not the way you can insert multiple files or simply use that one','QUIZZ_TITLE':'Ajoutez un quiz','QUIZZ_DISPLAY':'Quizz code','QUIZZ_TT_INSERT':'Insert the quizz','VIDEOBLOC_TITLE':'Insert an Ooyala video player','VIDEOBLOC_DISPLAY':'Insert a video player','VIDEOBLOC_TT_INSERT':'Insert the player code'}});}(jQuery));(function($){$.extend(true,$.magicLinks.langs,{'AR':{'ACCEPT_ALL':'Accept all','CANCEL_ALL':'Cancel all','TT_LINK':'View this link in a blank page','TT_ADD_LINK':'Accept and add this link','TT_DEL_LINK':'Refuse that link','TT_CANCEL_ALL':'Refuse all the currently suggested links','TT_ACCEPT_ALL':'Accept and add all the currently suggested links'}});})(jQuery);(function($){$.extend(true,$.inputTags.langs,{'AR':{'enter_tags':'Enter tags here, separate them with commas','enter_tags_short':'Enter tags here','modify_tags':'Modify the tag list','edit_tag':'Edit the tag','delete_tag':'Delete the tag','create_tag':'Submit the tag','no_tag':'No tag matching','do_you_mean':'Do you mean','max_tag_tipsy':'Maximum number of tags exceeded','main_tag':'This is the main group'}});})(jQuery);
(function($){if(typeof $.ui=='undefined'){return;}
!$.ui.datepicker.regional&&($.ui.datepicker.regional=[]);!$.ui.datepicker.defaults&&($.ui.datepicker.defaults=[]);$.ui.datepicker.regional['ar']={renderer:$.ui.datepicker.defaultRenderer,monthNames:[' ','','','','','','','','',' ',' ',' '],monthNamesShort:['1','2','3','4','5','6','7','8','9','10','11','12'],dayNames:['','','','','','',''],dayNamesShort:['','','','','','',''],dayNamesMin:['','','','','','',''],dateFormat:'dd/mm/yy',firstDay:6,prevText:'&#x3c;',prevStatus:'',prevJumpText:'&#x3e;',prevJumpStatus:'',nextText:'Next&#x3e;',nextStatus:'',nextJumpText:'&#x3e;&#x3e;',nextJumpStatus:'',currentText:'',currentStatus:'',todayText:'Today',todayStatus:'',clearText:'Clear',clearStatus:'',closeText:'',closeStatus:'',yearStatus:'',monthStatus:'',weekHeader:'',weekText:'Wk',weekStatus:'',dayStatus:'DD d MM',defaultStatus:'',isRTL:true,showMonthAfterYear:false,yearSuffix:''};$.extend($.ui.datepicker.defaults,$.ui.datepicker.regional['ar']);})(jQuery);(function()
{'use strict';_$('jQuery.warningCNIL.defaultOptions')._.template='<div class="ccmcss_oic" style="position: fixed; bottom: 20px; right: 20px;"><a href="javascript:void(0);" class="ccmcss_oic__close" id="jOICClose">&times;</a><a href="http://www.ccmbenchmark.com" target="_blank" class="ccmcss_oic__logo">${img}</a><p>${innerText}</p><a href="javascript:void(0)" class="ccmcss_oic__agree" id="jOICAgree"></a><a href="${moreURL}" target="_blank"> </a></div>';_$('jQuery.warningCNIL.defaultOptions')._.innerText="           cookies          .";}());(function($){!$.ui.timepicker.regional&&($.ui.timepicker.regional=[]);!$.ui.timepicker.defaults&&($.ui.timepicker.defaults=[]);$.timepicker.regional['ar']={hourText:'Hour',minuteText:'Minute',amPmText:['AM','PM'],closeButtonText:'Close',nowButtonText:'Now',deselectButtonText:'Deselect'}
$.timepicker.setDefaults($.timepicker.regional['ar']);})(jQuery);(function($){$.extend(true,$.jet.facebook.langs,{'AR':{'PROPOSITIONS_ACCOUNT_FB_TITLE':'Nous avons trouv les comptes suivants','ERROR_FACEBOOK_OPENGRAPH':'Une erreur est survenue pendant la soumission','FACEBOOK_CONNECT':'Connexion Facebook en cours','FACEBOOK_AUTOCONNECT':'Un compte Facebook a t dtect. Nous allons vous connecter.','FACEBOOK_ACTION_DONE_CANCEL':'Cette action a t synchronise sur votre mur facebook. (<a href="javascript:void(0);" class="cancelFBAction" data-id="${idAction}">annuler</a>)','FACEBOOK_ACTION_DONE_MANAGE_RULES':'Action annule. Rglez vos paramtres de synchronisation sur <a href="${urlPreference}">la page gestion de compte</a>.','FACEBOOK_OG_RIGHTS_UPDATE':'   <div>&nbsp;</div>'}});})(jQuery);(function(glob){var version="0.4.2",has="hasOwnProperty",separator=/[\.\/]/,comaseparator=/\s*,\s*/,wildcard="*",fun=function(){},numsort=function(a,b){return a-b;},current_event,stop,events={n:{}},firstDefined=function(){for(var i=0,ii=this.length;i<ii;i++){if(typeof this[i]!="undefined"){return this[i];}}},lastDefined=function(){var i=this.length;while(--i){if(typeof this[i]!="undefined"){return this[i];}}},eve=function(name,scope){name=String(name);var e=events,oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,f=false,l,indexed=[],queue={},out=[],ce=current_event,errors=[];out.firstDefined=firstDefined;out.lastDefined=lastDefined;current_event=name;stop=0;for(var i=0,ii=listeners.length;i<ii;i++)if("zIndex"in listeners[i]){indexed.push(listeners[i].zIndex);if(listeners[i].zIndex<0){queue[listeners[i].zIndex]=listeners[i];}}
indexed.sort(numsort);while(indexed[z]<0){l=queue[indexed[z++]];out.push(l.apply(scope,args));if(stop){stop=oldstop;return out;}}
for(i=0;i<ii;i++){l=listeners[i];if("zIndex"in l){if(l.zIndex==indexed[z]){out.push(l.apply(scope,args));if(stop){break;}
do{z++;l=queue[indexed[z]];l&&out.push(l.apply(scope,args));if(stop){break;}}while(l)}else{queue[l.zIndex]=l;}}else{out.push(l.apply(scope,args));if(stop){break;}}}
stop=oldstop;current_event=ce;return out;};eve._events=events;eve.listeners=function(name){var names=name.split(separator),e=events,item,items,k,i,ii,j,jj,nes,es=[e],out=[];for(i=0,ii=names.length;i<ii;i++){nes=[];for(j=0,jj=es.length;j<jj;j++){e=es[j].n;items=[e[names[i]],e[wildcard]];k=2;while(k--){item=items[k];if(item){nes.push(item);out=out.concat(item.f||[]);}}}
es=nes;}
return out;};eve.on=function(name,f){name=String(name);if(typeof f!="function"){return function(){};}
var names=name.split(comaseparator);for(var i=0,ii=names.length;i<ii;i++){(function(name){var names=name.split(separator),e=events,exist;for(var i=0,ii=names.length;i<ii;i++){e=e.n;e=e.hasOwnProperty(names[i])&&e[names[i]]||(e[names[i]]={n:{}});}
e.f=e.f||[];for(i=0,ii=e.f.length;i<ii;i++)if(e.f[i]==f){exist=true;break;}
!exist&&e.f.push(f);}(names[i]));}
return function(zIndex){if(+zIndex==+zIndex){f.zIndex=+zIndex;}};};eve.f=function(event){var attrs=[].slice.call(arguments,1);return function(){eve.apply(null,[event,null].concat(attrs).concat([].slice.call(arguments,0)));};};eve.stop=function(){stop=1;};eve.nt=function(subname){if(subname){return new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)").test(current_event);}
return current_event;};eve.nts=function(){return current_event.split(separator);};eve.off=eve.unbind=function(name,f){if(!name){eve._events=events={n:{}};return;}
var names=name.split(comaseparator);if(names.length>1){for(var i=0,ii=names.length;i<ii;i++){eve.off(names[i],f);}
return;}
names=name.split(separator);var e,key,splice,i,ii,j,jj,cur=[events];for(i=0,ii=names.length;i<ii;i++){for(j=0;j<cur.length;j+=splice.length-2){splice=[j,1];e=cur[j].n;if(names[i]!=wildcard){if(e[names[i]]){splice.push(e[names[i]]);}}else{for(key in e)if(e[has](key)){splice.push(e[key]);}}
cur.splice.apply(cur,splice);}}
for(i=0,ii=cur.length;i<ii;i++){e=cur[i];while(e.n){if(f){if(e.f){for(j=0,jj=e.f.length;j<jj;j++)if(e.f[j]==f){e.f.splice(j,1);break;}
!e.f.length&&delete e.f;}
for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;j<jj;j++)if(funcs[j]==f){funcs.splice(j,1);break;}
!funcs.length&&delete e.n[key].f;}}else{delete e.f;for(key in e.n)if(e.n[has](key)&&e.n[key].f){delete e.n[key].f;}}
e=e.n;}}};eve.once=function(name,f){var f2=function(){eve.unbind(name,f2);return f.apply(this,arguments);};return eve.on(name,f2);};eve.version=version;eve.toString=function(){return"You are running Eve "+version;};(typeof module!="undefined"&&module.exports)?(module.exports=eve):(typeof define==="function"&&define.amd?(define("eve",[],function(){return eve;})):(glob.eve=eve));})(this);(function(glob,factory){if(typeof define==="function"&&define.amd){define(["eve"],function(eve){return factory(glob,eve);});}else{factory(glob,glob.eve);}}(this,function(window,eve){var mina=(function(eve){var animations={},requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16);},isArray=Array.isArray||function(a){return a instanceof Array||Object.prototype.toString.call(a)=="[object Array]";},idgen=0,idprefix="M"+(+new Date).toString(36),ID=function(){return idprefix+(idgen++).toString(36);},diff=function(a,b,A,B){if(isArray(a)){res=[];for(var i=0,ii=a.length;i<ii;i++){res[i]=diff(a[i],b,A[i],B);}
return res;}
var dif=(A-a)/(B-b);return function(bb){return a+dif*(bb-b);};},timer=Date.now||function(){return+new Date;},sta=function(val){var a=this;if(val==null){return a.s;}
var ds=a.s-val;a.b+=a.dur*ds;a.B+=a.dur*ds;a.s=val;},speed=function(val){var a=this;if(val==null){return a.spd;}
a.spd=val;},duration=function(val){var a=this;if(val==null){return a.dur;}
a.s=a.s*val/a.dur;a.dur=val;},stopit=function(){var a=this;delete animations[a.id];a.update();eve("mina.stop."+a.id,a);},pause=function(){var a=this;if(a.pdif){return;}
delete animations[a.id];a.update();a.pdif=a.get()-a.b;},resume=function(){var a=this;if(!a.pdif){return;}
a.b=a.get()-a.pdif;delete a.pdif;animations[a.id]=a;},update=function(){var a=this,res;if(isArray(a.start)){res=[];for(var j=0,jj=a.start.length;j<jj;j++){res[j]=+a.start[j]+
(a.end[j]-a.start[j])*a.easing(a.s);}}else{res=+a.start+(a.end-a.start)*a.easing(a.s);}
a.set(res);},frame=function(){var len=0;for(var i in animations)if(animations.hasOwnProperty(i)){var a=animations[i],b=a.get(),res;len++;a.s=(b-a.b)/(a.dur/a.spd);if(a.s>=1){delete animations[i];a.s=1;len--;(function(a){setTimeout(function(){eve("mina.finish."+a.id,a);});}(a));}
a.update();}
len&&requestAnimFrame(frame);},mina=function(a,A,b,B,get,set,easing){var anim={id:ID(),start:a,end:A,b:b,s:0,dur:B-b,spd:1,get:get,set:set,easing:easing||mina.linear,status:sta,speed:speed,duration:duration,stop:stopit,pause:pause,resume:resume,update:update};animations[anim.id]=anim;var len=0,i;for(i in animations)if(animations.hasOwnProperty(i)){len++;if(len==2){break;}}
len==1&&requestAnimFrame(frame);return anim;};mina.time=timer;mina.getById=function(id){return animations[id]||null;};mina.linear=function(n){return n;};mina.easeout=function(n){return Math.pow(n,1.7);};mina.easein=function(n){return Math.pow(n,.48);};mina.easeinout=function(n){if(n==1){return 1;}
if(n==0){return 0;}
var q=.48-n/1.04,Q=Math.sqrt(.1734+q*q),x=Q-q,X=Math.pow(Math.abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=Math.pow(Math.abs(y),1/3)*(y<0?-1:1),t=X+Y+.5;return(1-t)*3*t*t+t*t*t;};mina.backin=function(n){if(n==1){return 1;}
var s=1.70158;return n*n*((s+1)*n-s);};mina.backout=function(n){if(n==0){return 0;}
n=n-1;var s=1.70158;return n*n*((s+1)*n+s)+1;};mina.elastic=function(n){if(n==!!n){return n;}
return Math.pow(2,-10*n)*Math.sin((n-.075)*(2*Math.PI)/.3)+1;};mina.bounce=function(n){var s=7.5625,p=2.75,l;if(n<(1/p)){l=s*n*n;}else{if(n<(2/p)){n-=(1.5/p);l=s*n*n+.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*n*n+.9375;}else{n-=(2.625/p);l=s*n*n+.984375;}}}
return l;};window.mina=mina;return mina;})(typeof eve=="undefined"?function(){}:eve);var Snap=(function(){Snap.version="0.3.0";function Snap(w,h){if(w){if(w.tagName){return wrap(w);}
if(is(w,"array")&&Snap.set){return Snap.set.apply(Snap,w);}
if(w instanceof Element){return w;}
if(h==null){w=glob.doc.querySelector(w);return wrap(w);}}
w=w==null?"100%":w;h=h==null?"100%":h;return new Paper(w,h);}
Snap.toString=function(){return"Snap v"+this.version;};Snap._={};var glob={win:window,doc:window.document};Snap._.glob=glob;var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,round=math.round,E="",S=" ",objectToString=Object.prototype.toString,ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,colourRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reURLValue=/^url\(#?([^)]+)\)$/,spaces="\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",separator=Snap._.separator=new RegExp("[,"+spaces+"]+"),whitespace=new RegExp("["+spaces+"]","g"),commaSpaces=new RegExp("["+spaces+"]*,["+spaces+"]*"),hsrg={hs:1,rg:1},pathCommand=new RegExp("([a-z])["+spaces+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+spaces+"]*,?["+spaces+"]*)+)","ig"),tCommand=new RegExp("([rstm])["+spaces+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+spaces+"]*,?["+spaces+"]*)+)","ig"),pathValues=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+spaces+"]*,?["+spaces+"]*","ig"),idgen=0,idprefix="S"+(+new Date).toString(36),ID=function(){return idprefix+(idgen++).toString(36);},xlink="http://www.w3.org/1999/xlink",xmlns="http://www.w3.org/2000/svg",hub={},URL=Snap.url=function(url){return"url('#"+url+"')";};function $(el,attr){if(attr){if(el=="#text"){el=glob.doc.createTextNode(attr.text||"");}
if(typeof el=="string"){el=$(el);}
if(typeof attr=="string"){if(attr.substring(0,6)=="xlink:"){return el.getAttributeNS(xlink,attr.substring(6));}
if(attr.substring(0,4)=="xml:"){return el.getAttributeNS(xmlns,attr.substring(4));}
return el.getAttribute(attr);}
for(var key in attr)if(attr[has](key)){var val=Str(attr[key]);if(val){if(key.substring(0,6)=="xlink:"){el.setAttributeNS(xlink,key.substring(6),val);}else if(key.substring(0,4)=="xml:"){el.setAttributeNS(xmlns,key.substring(4),val);}else{el.setAttribute(key,val);}}else{el.removeAttribute(key);}}}else{el=glob.doc.createElementNS(xmlns,el);}
return el;}
Snap._.$=$;Snap._.id=ID;function getAttrs(el){var attrs=el.attributes,name,out={};for(var i=0;i<attrs.length;i++){if(attrs[i].namespaceURI==xlink){name="xlink:";}else{name="";}
name+=attrs[i].name;out[name]=attrs[i].textContent;}
return out;}
function is(o,type){type=Str.prototype.toLowerCase.call(type);if(type=="finite"){return isFinite(o);}
if(type=="array"&&(o instanceof Array||Array.isArray&&Array.isArray(o))){return true;}
return(type=="null"&&o===null)||(type==typeof o&&o!==null)||(type=="object"&&o===Object(o))||objectToString.call(o).slice(8,-1).toLowerCase()==type;}
Snap.format=(function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName;if(res){if(name in res){res=res[name];}
typeof res=="function"&&isFunc&&(res=res());}});res=(res==null||res==obj?all:res)+"";return res;};return function(str,obj){return Str(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj);});};})();function clone(obj){if(typeof obj=="function"||Object(obj)!==obj){return obj;}
var res=new obj.constructor;for(var key in obj)if(obj[has](key)){res[key]=clone(obj[key]);}
return res;}
Snap._.clone=clone;function repush(array,item){for(var i=0,ii=array.length;i<ii;i++)if(array[i]===item){return array.push(array.splice(i,1)[0]);}}
function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("\u2400"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];if(cache[has](args)){repush(count,args);return postprocessor?postprocessor(cache[args]):cache[args];}
count.length>=1e3&&delete cache[count.shift()];count.push(args);cache[args]=f.apply(scope,arg);return postprocessor?postprocessor(cache[args]):cache[args];}
return newf;}
Snap._.cacher=cacher;function angle(x1,y1,x2,y2,x3,y3){if(x3==null){var x=x1-x2,y=y1-y2;if(!x&&!y){return 0;}
return(180+math.atan2(-y,-x)*180/PI+360)%360;}else{return angle(x1,y1,x3,y3)-angle(x2,y2,x3,y3);}}
function rad(deg){return deg%360*PI/180;}
function deg(rad){return rad*180/PI%360;}
function x_y(){return this.x+S+this.y;}
function x_y_w_h(){return this.x+S+this.y+S+this.width+" \xd7 "+this.height;}
Snap.rad=rad;Snap.deg=deg;Snap.angle=angle;Snap.is=is;Snap.snapTo=function(values,value,tolerance){tolerance=is(tolerance,"finite")?tolerance:10;if(is(values,"array")){var i=values.length;while(i--)if(abs(values[i]-value)<=tolerance){return values[i];}}else{values=+values;var rem=value%values;if(rem<tolerance){return value-rem;}
if(rem>values-tolerance){return value-rem+values;}}
return value;};Snap.getRGB=cacher(function(colour){if(!colour||!!((colour=Str(colour)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:rgbtoString};}
if(colour=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:rgbtoString};}
!(hsrg[has](colour.toLowerCase().substring(0,2))||colour.charAt()=="#")&&(colour=toHex(colour));if(!colour){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:rgbtoString};}
var res,red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);if(rgb){if(rgb[2]){blue=toInt(rgb[2].substring(5),16);green=toInt(rgb[2].substring(3,5),16);red=toInt(rgb[2].substring(1,3),16);}
if(rgb[3]){blue=toInt((t=rgb[3].charAt(3))+t,16);green=toInt((t=rgb[3].charAt(2))+t,16);red=toInt((t=rgb[3].charAt(1))+t,16);}
if(rgb[4]){values=rgb[4].split(commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);rgb[1].toLowerCase().slice(0,4)=="rgba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);}
if(rgb[5]){values=rgb[5].split(commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red/=100);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green/=100);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue/=100);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return Snap.hsb2rgb(red,green,blue,opacity);}
if(rgb[6]){values=rgb[6].split(commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red/=100);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green/=100);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue/=100);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsla"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return Snap.hsl2rgb(red,green,blue,opacity);}
red=mmin(math.round(red),255);green=mmin(math.round(green),255);blue=mmin(math.round(blue),255);opacity=mmin(mmax(opacity,0),1);rgb={r:red,g:green,b:blue,toString:rgbtoString};rgb.hex="#"+(16777216|blue|(green<<8)|(red<<16)).toString(16).slice(1);rgb.opacity=is(opacity,"finite")?opacity:1;return rgb;}
return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:rgbtoString};},Snap);Snap.hsb=cacher(function(h,s,b){return Snap.hsb2rgb(h,s,b).hex;});Snap.hsl=cacher(function(h,s,l){return Snap.hsl2rgb(h,s,l).hex;});Snap.rgb=cacher(function(r,g,b,o){if(is(o,"finite")){var round=math.round;return"rgba("+[round(r),round(g),round(b),+o.toFixed(2)]+")";}
return"#"+(16777216|b|(g<<8)|(r<<16)).toString(16).slice(1);});var toHex=function(color){var i=glob.doc.getElementsByTagName("head")[0]||glob.doc.getElementsByTagName("svg")[0],red="rgb(255, 0, 0)";toHex=cacher(function(color){if(color.toLowerCase()=="red"){return red;}
i.style.color=red;i.style.color=color;var out=glob.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color");return out==red?null:out;});return toHex(color);},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")";},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")";},rgbtoString=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")";},prepareRGB=function(r,g,b){if(g==null&&is(r,"object")&&"r"in r&&"g"in r&&"b"in r){b=r.b;g=r.g;r=r.r;}
if(g==null&&is(r,string)){var clr=Snap.getRGB(r);r=clr.r;g=clr.g;b=clr.b;}
if(r>1||g>1||b>1){r/=255;g/=255;b/=255;}
return[r,g,b];},packageRGB=function(r,g,b,o){r=math.round(r*255);g=math.round(g*255);b=math.round(b*255);var rgb={r:r,g:g,b:b,opacity:is(o,"finite")?o:1,hex:Snap.rgb(r,g,b),toString:rgbtoString};is(o,"finite")&&(rgb.opacity=o);return rgb;};Snap.color=function(clr){var rgb;if(is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr){rgb=Snap.hsb2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.opacity=1;clr.hex=rgb.hex;}else if(is(clr,"object")&&"h"in clr&&"s"in clr&&"l"in clr){rgb=Snap.hsl2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.opacity=1;clr.hex=rgb.hex;}else{if(is(clr,"string")){clr=Snap.getRGB(clr);}
if(is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr&&!("error"in clr)){rgb=Snap.rgb2hsl(clr);clr.h=rgb.h;clr.s=rgb.s;clr.l=rgb.l;rgb=Snap.rgb2hsb(clr);clr.v=rgb.b;}else{clr={hex:"none"};clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1;clr.error=1;}}
clr.toString=rgbtoString;return clr;};Snap.hsb2rgb=function(h,s,v,o){if(is(h,"object")&&"h"in h&&"s"in h&&"b"in h){v=h.b;s=h.s;h=h.h;o=h.o;}
h*=360;var R,G,B,X,C;h=(h%360)/60;C=v*s;X=C*(1-abs(h%2-1));R=G=B=v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o);};Snap.hsl2rgb=function(h,s,l,o){if(is(h,"object")&&"h"in h&&"s"in h&&"l"in h){l=h.l;s=h.s;h=h.h;}
if(h>1||s>1||l>1){h/=360;s/=100;l/=100;}
h*=360;var R,G,B,X,C;h=(h%360)/60;C=2*s*(l<.5?l:1-l);X=C*(1-abs(h%2-1));R=G=B=l-C/2;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o);};Snap.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,V,C;V=mmax(r,g,b);C=V-mmin(r,g,b);H=(C==0?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;S=C==0?0:C/V;return{h:H,s:S,b:V,toString:hsbtoString};};Snap.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,L,M,m,C;M=mmax(r,g,b);m=mmin(r,g,b);C=M-m;H=(C==0?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;L=(M+m)/2;S=(C==0?0:L<.5?C/(2*L):C/(2-2*L));return{h:H,s:S,l:L,toString:hsltoString};};Snap.parsePathString=function(pathString){if(!pathString){return null;}
var pth=Snap.path(pathString);if(pth.arr){return Snap.path.clone(pth.arr);}
var paramCounts={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},data=[];if(is(pathString,"array")&&is(pathString[0],"array")){data=Snap.path.clone(pathString);}
if(!data.length){Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(pathValues,function(a,b){b&&params.push(+b);});if(name=="m"&&params.length>2){data.push([b].concat(params.splice(0,2)));name="l";b=b=="m"?"l":"L";}
if(name=="o"&&params.length==1){data.push([b,params[0]]);}
if(name=="r"){data.push([b].concat(params));}else while(params.length>=paramCounts[name]){data.push([b].concat(params.splice(0,paramCounts[name])));if(!paramCounts[name]){break;}}});}
data.toString=Snap.path.toString;pth.arr=Snap.path.clone(data);return data;};var parseTransformString=Snap.parseTransformString=function(TString){if(!TString){return null;}
var paramCounts={r:3,s:4,t:2,m:6},data=[];if(is(TString,"array")&&is(TString[0],"array")){data=Snap.path.clone(TString);}
if(!data.length){Str(TString).replace(tCommand,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(pathValues,function(a,b){b&&params.push(+b);});data.push([b].concat(params));});}
data.toString=Snap.path.toString;return data;};function svgTransform2string(tstr){var res=[];tstr=tstr.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(all,name,params){params=params.split(/\s*,\s*|\s+/);if(name=="rotate"&&params.length==1){params.push(0,0);}
if(name=="scale"){if(params.length>2){params=params.slice(0,2);}else if(params.length==2){params.push(0,0);}
if(params.length==1){params.push(params[0],0,0);}}
if(name=="skewX"){res.push(["m",1,0,math.tan(rad(params[0])),1,0,0]);}else if(name=="skewY"){res.push(["m",1,math.tan(rad(params[0])),0,1,0,0]);}else{res.push([name.charAt(0)].concat(params));}
return all;});return res;}
Snap._.svgTransform2string=svgTransform2string;Snap._.rgTransform=new RegExp("^[a-z]["+spaces+"]*-?\\.?\\d","i");function transform2matrix(tstr,bbox){var tdata=parseTransformString(tstr),m=new Snap.Matrix;if(tdata){for(var i=0,ii=tdata.length;i<ii;i++){var t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0,x1,y1,x2,y2,bb;if(command=="t"&&tlen==2){m.translate(t[1],0);}else if(command=="t"&&tlen==3){if(absolute){x1=inver.x(0,0);y1=inver.y(0,0);x2=inver.x(t[1],t[2]);y2=inver.y(t[1],t[2]);m.translate(x2-x1,y2-y1);}else{m.translate(t[1],t[2]);}}else if(command=="r"){if(tlen==2){bb=bb||bbox;m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2);}else if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.rotate(t[1],x2,y2);}else{m.rotate(t[1],t[2],t[3]);}}}else if(command=="s"){if(tlen==2||tlen==3){bb=bb||bbox;m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2);}else if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.scale(t[1],t[1],x2,y2);}else{m.scale(t[1],t[1],t[2],t[3]);}}else if(tlen==5){if(absolute){x2=inver.x(t[3],t[4]);y2=inver.y(t[3],t[4]);m.scale(t[1],t[2],x2,y2);}else{m.scale(t[1],t[2],t[3],t[4]);}}}else if(command=="m"&&tlen==7){m.add(t[1],t[2],t[3],t[4],t[5],t[6]);}}}
return m;}
Snap._.transform2matrix=transform2matrix;function extractTransform(el,tstr){if(tstr==null){var doReturn=true;if(el.type=="linearGradient"||el.type=="radialGradient"){tstr=el.node.getAttribute("gradientTransform");}else if(el.type=="pattern"){tstr=el.node.getAttribute("patternTransform");}else{tstr=el.node.getAttribute("transform");}
if(!tstr){return new Snap.Matrix;}
tstr=svgTransform2string(tstr);}else{if(!Snap._.rgTransform.test(tstr)){tstr=svgTransform2string(tstr);}else{tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);}
if(is(tstr,"array")){tstr=Snap.path?Snap.path.toString.call(tstr):Str(tstr);}
el._.transform=tstr;}
var m=transform2matrix(tstr,el.getBBox(1));if(doReturn){return m;}else{el.matrix=m;}}
Snap._unit2px=unit2px;var contains=glob.doc.contains||glob.doc.compareDocumentPosition?function(a,b){var adown=a.nodeType==9?a.documentElement:a,bup=b&&b.parentNode;return a==bup||!!(bup&&bup.nodeType==1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while(b){b=b.parentNode;if(b==a){return true;}}}
return false;};function getSomeDefs(el){var p=(el.node.ownerSVGElement&&wrap(el.node.ownerSVGElement))||(el.node.parentNode&&wrap(el.node.parentNode))||Snap.select("svg")||Snap(0,0),pdefs=p.select("defs"),defs=pdefs==null?false:pdefs.node;if(!defs){defs=make("defs",p.node).node;}
return defs;}
function getSomeSVG(el){return el.node.ownerSVGElement&&wrap(el.node.ownerSVGElement)||Snap.select("svg");}
Snap._.getSomeDefs=getSomeDefs;Snap._.getSomeSVG=getSomeSVG;function unit2px(el,name,value){var svg=getSomeSVG(el).node,out={},mgr=svg.querySelector(".svg---mgr");if(!mgr){mgr=$("rect");$(mgr,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"});svg.appendChild(mgr);}
function getW(val){if(val==null){return E;}
if(val==+val){return val;}
$(mgr,{width:val});try{return mgr.getBBox().width;}catch(e){return 0;}}
function getH(val){if(val==null){return E;}
if(val==+val){return val;}
$(mgr,{height:val});try{return mgr.getBBox().height;}catch(e){return 0;}}
function set(nam,f){if(name==null){out[nam]=f(el.attr(nam)||0);}else if(nam==name){out=f(value==null?el.attr(nam)||0:value);}}
switch(el.type){case"rect":set("rx",getW);set("ry",getH);case"image":set("width",getW);set("height",getH);case"text":set("x",getW);set("y",getH);break;case"circle":set("cx",getW);set("cy",getH);set("r",getW);break;case"ellipse":set("cx",getW);set("cy",getH);set("rx",getW);set("ry",getH);break;case"line":set("x1",getW);set("x2",getW);set("y1",getH);set("y2",getH);break;case"marker":set("refX",getW);set("markerWidth",getW);set("refY",getH);set("markerHeight",getH);break;case"radialGradient":set("fx",getW);set("fy",getH);break;case"tspan":set("dx",getW);set("dy",getH);break;default:set(name,getW);}
svg.removeChild(mgr);return out;}
Snap.select=function(query){return wrap(glob.doc.querySelector(query));};Snap.selectAll=function(query){var nodelist=glob.doc.querySelectorAll(query),set=(Snap.set||Array)();for(var i=0;i<nodelist.length;i++){set.push(wrap(nodelist[i]));}
return set;};function add2group(list){if(!is(list,"array")){list=Array.prototype.slice.call(arguments,0);}
var i=0,j=0,node=this.node;while(this[i])delete this[i++];for(i=0;i<list.length;i++){if(list[i].type=="set"){list[i].forEach(function(el){node.appendChild(el.node);});}else{node.appendChild(list[i].node);}}
var children=node.childNodes;for(i=0;i<children.length;i++){this[j++]=wrap(children[i]);}
return this;}
setInterval(function(){for(var key in hub)if(hub[has](key)){var el=hub[key],node=el.node;if(el.type!="svg"&&!node.ownerSVGElement||el.type=="svg"&&(!node.parentNode||"ownerSVGElement"in node.parentNode&&!node.ownerSVGElement)){delete hub[key];}}},1e4);function Element(el){if(el.snap in hub){return hub[el.snap];}
var id=this.id=ID(),svg;try{svg=el.ownerSVGElement;}catch(e){}
this.node=el;if(svg){this.paper=new Paper(svg);}
this.type=el.tagName;this.anims={};this._={transform:[]};el.snap=id;hub[id]=this;if(this.type=="g"){this.add=add2group;}
if(this.type in{"g":1,"mask":1,"pattern":1}){for(var method in Paper.prototype)if(Paper.prototype[has](method)){this[method]=Paper.prototype[method];}}}
(function(elproto){elproto.attr=function(params,value){var el=this,node=el.node;if(!params){return el;}
if(is(params,"string")){if(arguments.length>1){var json={};json[params]=value;params=json;}else{return eve("snap.util.getattr."+params,el).firstDefined();}}
for(var att in params){if(params[has](att)){eve("snap.util.attr."+att,el,params[att]);}}
return el;};elproto.getBBox=function(isWithoutTransform){if(!Snap.Matrix||!Snap.path){return this.node.getBBox();}
var el=this,m=new Snap.Matrix;if(el.removed){return Snap._.box();}
while(el.type=="use"){if(!isWithoutTransform){m=m.add(el.transform().localMatrix.translate(el.attr("x")||0,el.attr("y")||0));}
if(el.original){el=el.original;}else{var href=el.attr("xlink:href");el=el.original=el.node.ownerDocument.getElementById(href.substring(href.indexOf("#")+1));}}
var _=el._,pathfinder=Snap.path.get[el.type]||Snap.path.get.deflt;try{if(isWithoutTransform){_.bboxwt=pathfinder?Snap.path.getBBox(el.realPath=pathfinder(el)):Snap._.box(el.node.getBBox());return Snap._.box(_.bboxwt);}else{el.realPath=pathfinder(el);el.matrix=el.transform().localMatrix;_.bbox=Snap.path.getBBox(Snap.path.map(el.realPath,m.add(el.matrix)));return Snap._.box(_.bbox);}}catch(e){return Snap._.box();}};var propString=function(){return this.string;};elproto.transform=function(tstr){var _=this._;if(tstr==null){var papa=this,global=new Snap.Matrix(this.node.getCTM()),local=extractTransform(this),ms=[local],m=new Snap.Matrix,i,localString=local.toTransformString(),string=Str(local)==Str(this.matrix)?Str(_.transform):localString;while(papa.type!="svg"&&(papa=papa.parent())){ms.push(extractTransform(papa));}
i=ms.length;while(i--){m.add(ms[i]);}
return{string:string,globalMatrix:global,totalMatrix:m,localMatrix:local,diffMatrix:global.clone().add(local.invert()),global:global.toTransformString(),total:m.toTransformString(),local:localString,toString:propString};}
if(tstr instanceof Snap.Matrix){this.matrix=tstr;}else{extractTransform(this,tstr);}
if(this.node){if(this.type=="linearGradient"||this.type=="radialGradient"){$(this.node,{gradientTransform:this.matrix});}else if(this.type=="pattern"){$(this.node,{patternTransform:this.matrix});}else{$(this.node,{transform:this.matrix});}}
return this;};elproto.parent=function(){return wrap(this.node.parentNode);};elproto.append=elproto.add=function(el){if(el){if(el.type=="set"){var it=this;el.forEach(function(el){it.add(el);});return this;}
el=wrap(el);this.node.appendChild(el.node);el.paper=this.paper;}
return this;};elproto.appendTo=function(el){if(el){el=wrap(el);el.append(this);}
return this;};elproto.prepend=function(el){if(el){if(el.type=="set"){var it=this,first;el.forEach(function(el){if(first){first.after(el);}else{it.prepend(el);}
first=el;});return this;}
el=wrap(el);var parent=el.parent();this.node.insertBefore(el.node,this.node.firstChild);this.add&&this.add();el.paper=this.paper;this.parent()&&this.parent().add();parent&&parent.add();}
return this;};elproto.prependTo=function(el){el=wrap(el);el.prepend(this);return this;};elproto.before=function(el){if(el.type=="set"){var it=this;el.forEach(function(el){var parent=el.parent();it.node.parentNode.insertBefore(el.node,it.node);parent&&parent.add();});this.parent().add();return this;}
el=wrap(el);var parent=el.parent();this.node.parentNode.insertBefore(el.node,this.node);this.parent()&&this.parent().add();parent&&parent.add();el.paper=this.paper;return this;};elproto.after=function(el){el=wrap(el);var parent=el.parent();if(this.node.nextSibling){this.node.parentNode.insertBefore(el.node,this.node.nextSibling);}else{this.node.parentNode.appendChild(el.node);}
this.parent()&&this.parent().add();parent&&parent.add();el.paper=this.paper;return this;};elproto.insertBefore=function(el){el=wrap(el);var parent=this.parent();el.node.parentNode.insertBefore(this.node,el.node);this.paper=el.paper;parent&&parent.add();el.parent()&&el.parent().add();return this;};elproto.insertAfter=function(el){el=wrap(el);var parent=this.parent();el.node.parentNode.insertBefore(this.node,el.node.nextSibling);this.paper=el.paper;parent&&parent.add();el.parent()&&el.parent().add();return this;};elproto.remove=function(){var parent=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=true;parent&&parent.add();return this;};elproto.select=function(query){return wrap(this.node.querySelector(query));};elproto.selectAll=function(query){var nodelist=this.node.querySelectorAll(query),set=(Snap.set||Array)();for(var i=0;i<nodelist.length;i++){set.push(wrap(nodelist[i]));}
return set;};elproto.asPX=function(attr,value){if(value==null){value=this.attr(attr);}
return+unit2px(this,attr,value);};elproto.use=function(){var use,id=this.node.id;if(!id){id=this.id;$(this.node,{id:id});}
if(this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"){use=make(this.type,this.node.parentNode);}else{use=make("use",this.node.parentNode);}
$(use.node,{"xlink:href":"#"+id});use.original=this;return use;};function fixids(el){var els=el.selectAll("*"),it,url=/^\s*url\(("|'|)(.*)\1\)\s*$/,ids=[],uses={};function urltest(it,name){var val=$(it.node,name);val=val&&val.match(url);val=val&&val[2];if(val&&val.charAt()=="#"){val=val.substring(1);}else{return;}
if(val){uses[val]=(uses[val]||[]).concat(function(id){var attr={};attr[name]=URL(id);$(it.node,attr);});}}
function linktest(it){var val=$(it.node,"xlink:href");if(val&&val.charAt()=="#"){val=val.substring(1);}else{return;}
if(val){uses[val]=(uses[val]||[]).concat(function(id){it.attr("xlink:href","#"+id);});}}
for(var i=0,ii=els.length;i<ii;i++){it=els[i];urltest(it,"fill");urltest(it,"stroke");urltest(it,"filter");urltest(it,"mask");urltest(it,"clip-path");linktest(it);var oldid=$(it.node,"id");if(oldid){$(it.node,{id:it.id});ids.push({old:oldid,id:it.id});}}
for(i=0,ii=ids.length;i<ii;i++){var fs=uses[ids[i].old];if(fs){for(var j=0,jj=fs.length;j<jj;j++){fs[j](ids[i].id);}}}}
var rgNotSpace=/\S+/g,rgBadSpace=/[\t\r\n\f]/g,rgTrim=/(^\s+|\s+$)/g;elproto.addClass=function(value){var classes=(value||"").match(rgNotSpace)||[],elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[],j,pos,clazz,finalValue;if(classes.length){j=0;while((clazz=classes[j++])){pos=curClasses.indexOf(clazz);if(!~pos){curClasses.push(clazz);}}
finalValue=curClasses.join(" ");if(className!=finalValue){elem.className.baseVal=finalValue;}}
return this;};elproto.removeClass=function(value){var classes=(value||"").match(rgNotSpace)||[],elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[],j,pos,clazz,finalValue;if(curClasses.length){j=0;while((clazz=classes[j++])){pos=curClasses.indexOf(clazz);if(~pos){curClasses.splice(pos,1);}}
finalValue=curClasses.join(" ");if(className!=finalValue){elem.className.baseVal=finalValue;}}
return this;};elproto.hasClass=function(value){var elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[];return!!~curClasses.indexOf(value);};elproto.toggleClass=function(value,flag){if(flag!=null){if(flag){return this.addClass(value);}else{return this.removeClass(value);}}
var classes=(value||"").match(rgNotSpace)||[],elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[],j,pos,clazz,finalValue;j=0;while((clazz=classes[j++])){pos=curClasses.indexOf(clazz);if(~pos){curClasses.splice(pos,1);}else{curClasses.push(clazz);}}
finalValue=curClasses.join(" ");if(className!=finalValue){elem.className.baseVal=finalValue;}
return this;};elproto.clone=function(){var clone=wrap(this.node.cloneNode(true));if($(clone.node,"id")){$(clone.node,{id:clone.id});}
fixids(clone);clone.insertAfter(this);return clone;};elproto.toDefs=function(){var defs=getSomeDefs(this);defs.appendChild(this.node);return this;};elproto.pattern=elproto.toPattern=function(x,y,width,height){var p=make("pattern",getSomeDefs(this));if(x==null){x=this.getBBox();}
if(is(x,"object")&&"x"in x){y=x.y;width=x.width;height=x.height;x=x.x;}
$(p.node,{x:x,y:y,width:width,height:height,patternUnits:"userSpaceOnUse",id:p.id,viewBox:[x,y,width,height].join(" ")});p.node.appendChild(this.node);return p;};elproto.marker=function(x,y,width,height,refX,refY){var p=make("marker",getSomeDefs(this));if(x==null){x=this.getBBox();}
if(is(x,"object")&&"x"in x){y=x.y;width=x.width;height=x.height;refX=x.refX||x.cx;refY=x.refY||x.cy;x=x.x;}
$(p.node,{viewBox:[x,y,width,height].join(S),markerWidth:width,markerHeight:height,orient:"auto",refX:refX||0,refY:refY||0,id:p.id});p.node.appendChild(this.node);return p;};function slice(from,to,f){return function(arr){var res=arr.slice(from,to);if(res.length==1){res=res[0];}
return f?f(res):res;};}
var Animation=function(attr,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
this.attr=attr;this.dur=ms;easing&&(this.easing=easing);callback&&(this.callback=callback);};Snap._.Animation=Animation;Snap.animation=function(attr,ms,easing,callback){return new Animation(attr,ms,easing,callback);};elproto.inAnim=function(){var el=this,res=[];for(var id in el.anims)if(el.anims[has](id)){(function(a){res.push({anim:new Animation(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(val){return a.status(val);},stop:function(){a.stop();}});}(el.anims[id]));}
return res;};Snap.animate=function(from,to,setter,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
var now=mina.time(),anim=mina(from,to,now,now+ms,mina.time,setter,easing);callback&&eve.once("mina.finish."+anim.id,callback);return anim;};elproto.stop=function(){var anims=this.inAnim();for(var i=0,ii=anims.length;i<ii;i++){anims[i].stop();}
return this;};elproto.animate=function(attrs,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
if(attrs instanceof Animation){callback=attrs.callback;easing=attrs.easing;ms=easing.dur;attrs=attrs.attr;}
var fkeys=[],tkeys=[],keys={},from,to,f,eq,el=this;for(var key in attrs)if(attrs[has](key)){if(el.equal){eq=el.equal(key,Str(attrs[key]));from=eq.from;to=eq.to;f=eq.f;}else{from=+el.attr(key);to=+attrs[key];}
var len=is(from,"array")?from.length:1;keys[key]=slice(fkeys.length,fkeys.length+len,f);fkeys=fkeys.concat(from);tkeys=tkeys.concat(to);}
var now=mina.time(),anim=mina(fkeys,tkeys,now,now+ms,mina.time,function(val){var attr={};for(var key in keys)if(keys[has](key)){attr[key]=keys[key](val);}
el.attr(attr);},easing);el.anims[anim.id]=anim;anim._attrs=attrs;anim._callback=callback;eve("snap.animcreated."+el.id,anim);eve.once("mina.finish."+anim.id,function(){delete el.anims[anim.id];callback&&callback.call(el);});eve.once("mina.stop."+anim.id,function(){delete el.anims[anim.id];});return el;};var eldata={};elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(arguments.length==0){eve("snap.data.get."+this.id,this,data,null);return data;}
if(arguments.length==1){if(Snap.is(key,"object")){for(var i in key)if(key[has](i)){this.data(i,key[i]);}
return this;}
eve("snap.data.get."+this.id,this,data[key],key);return data[key];}
data[key]=value;eve("snap.data.set."+this.id,this,value,key);return this;};elproto.removeData=function(key){if(key==null){eldata[this.id]={};}else{eldata[this.id]&&delete eldata[this.id][key];}
return this;};elproto.outerSVG=elproto.toString=toString(1);elproto.innerSVG=toString();function toString(type){return function(){var res=type?"<"+this.type:"",attr=this.node.attributes,chld=this.node.childNodes;if(type){for(var i=0,ii=attr.length;i<ii;i++){res+=" "+attr[i].name+'="'+
attr[i].value.replace(/"/g,'\\"')+'"';}}
if(chld.length){type&&(res+=">");for(i=0,ii=chld.length;i<ii;i++){if(chld[i].nodeType==3){res+=chld[i].nodeValue;}else if(chld[i].nodeType==1){res+=wrap(chld[i]).toString();}}
type&&(res+="</"+this.type+">");}else{type&&(res+="/>");}
return res;};}}(Element.prototype));Snap.parse=function(svg){var f=glob.doc.createDocumentFragment(),full=true,div=glob.doc.createElement("div");svg=Str(svg);if(!svg.match(/^\s*<\s*svg(?:\s|>)/)){svg="<svg>"+svg+"</svg>";full=false;}
div.innerHTML=svg;svg=div.getElementsByTagName("svg")[0];if(svg){if(full){f=svg;}else{while(svg.firstChild){f.appendChild(svg.firstChild);}}}
div.innerHTML=E;return new Fragment(f);};function Fragment(frag){this.node=frag;}
Fragment.prototype.select=Element.prototype.select;Fragment.prototype.selectAll=Element.prototype.selectAll;Snap.fragment=function(){var args=Array.prototype.slice.call(arguments,0),f=glob.doc.createDocumentFragment();for(var i=0,ii=args.length;i<ii;i++){var item=args[i];if(item.node&&item.node.nodeType){f.appendChild(item.node);}
if(item.nodeType){f.appendChild(item);}
if(typeof item=="string"){f.appendChild(Snap.parse(item).node);}}
return new Fragment(f);};function make(name,parent){var res=$(name);parent.appendChild(res);var el=wrap(res);return el;}
function Paper(w,h){var res,desc,defs,proto=Paper.prototype;if(w&&w.tagName=="svg"){if(w.snap in hub){return hub[w.snap];}
var doc=w.ownerDocument;res=new Element(w);desc=w.getElementsByTagName("desc")[0];defs=w.getElementsByTagName("defs")[0];if(!desc){desc=$("desc");desc.appendChild(doc.createTextNode("Created with Snap"));res.node.appendChild(desc);}
if(!defs){defs=$("defs");res.node.appendChild(defs);}
res.defs=defs;for(var key in proto)if(proto[has](key)){res[key]=proto[key];}
res.paper=res.root=res;}else{res=make("svg",glob.doc.body);$(res.node,{height:h,version:1.1,width:w,xmlns:xmlns});}
return res;}
function wrap(dom){if(!dom){return dom;}
if(dom instanceof Element||dom instanceof Fragment){return dom;}
if(dom.tagName&&dom.tagName.toLowerCase()=="svg"){return new Paper(dom);}
if(dom.tagName&&dom.tagName.toLowerCase()=="object"&&dom.type=="image/svg+xml"){return new Paper(dom.contentDocument.getElementsByTagName("svg")[0]);}
return new Element(dom);}
Snap._.make=make;Snap._.wrap=wrap;Paper.prototype.el=function(name,attr){var el=make(name,this.node);attr&&el.attr(attr);return el;};eve.on("snap.util.getattr",function(){var att=eve.nt();att=att.substring(att.lastIndexOf(".")+1);var css=att.replace(/[A-Z]/g,function(letter){return"-"+letter.toLowerCase();});if(cssAttr[has](css)){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(css);}else{return $(this.node,att);}});var cssAttr={"alignment-baseline":0,"baseline-shift":0,"clip":0,"clip-path":0,"clip-rule":0,"color":0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,"cursor":0,"direction":0,"display":0,"dominant-baseline":0,"enable-background":0,"fill":0,"fill-opacity":0,"fill-rule":0,"filter":0,"flood-color":0,"flood-opacity":0,"font":0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,"kerning":0,"letter-spacing":0,"lighting-color":0,"marker":0,"marker-end":0,"marker-mid":0,"marker-start":0,"mask":0,"opacity":0,"overflow":0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,"stroke":0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,"visibility":0,"word-spacing":0,"writing-mode":0};eve.on("snap.util.attr",function(value){var att=eve.nt(),attr={};att=att.substring(att.lastIndexOf(".")+1);attr[att]=value;var style=att.replace(/-(\w)/gi,function(all,letter){return letter.toUpperCase();}),css=att.replace(/[A-Z]/g,function(letter){return"-"+letter.toLowerCase();});if(cssAttr[has](css)){this.node.style[style]=value==null?E:value;}else{$(this.node,attr);}});(function(proto){}(Paper.prototype));Snap.ajax=function(url,postData,callback,scope){var req=new XMLHttpRequest,id=ID();if(req){if(is(postData,"function")){scope=callback;callback=postData;postData=null;}else if(is(postData,"object")){var pd=[];for(var key in postData)if(postData.hasOwnProperty(key)){pd.push(encodeURIComponent(key)+"="+encodeURIComponent(postData[key]));}
postData=pd.join("&");}
req.open((postData?"POST":"GET"),url,true);if(postData){req.setRequestHeader("X-Requested-With","XMLHttpRequest");req.setRequestHeader("Content-type","application/x-www-form-urlencoded");}
if(callback){eve.once("snap.ajax."+id+".0",callback);eve.once("snap.ajax."+id+".200",callback);eve.once("snap.ajax."+id+".304",callback);}
req.onreadystatechange=function(){if(req.readyState!=4)return;eve("snap.ajax."+id+"."+req.status,scope,req);};if(req.readyState==4){return req;}
req.send(postData);return req;}};Snap.load=function(url,callback,scope){Snap.ajax(url,function(req){var f=Snap.parse(req.responseText);scope?callback.call(scope,f):callback(f);});};var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;return{y:top,x:left};};Snap.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=glob.doc.elementFromPoint(x,y);if(glob.win.opera&&target.tagName=="svg"){var so=getOffset(target),sr=target.createSVGRect();sr.x=x-so.x;sr.y=y-so.y;sr.width=sr.height=1;var hits=target.getIntersectionList(sr,null);if(hits.length){target=hits[hits.length-1];}}
if(!target){return null;}
return wrap(target);};Snap.plugin=function(f){f(Snap,Element,Paper,glob,Fragment);};glob.win.Snap=Snap;return Snap;}());Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var objectToString=Object.prototype.toString,Str=String,math=Math,E="";function Matrix(a,b,c,d,e,f){if(b==null&&objectToString.call(a)=="[object SVGMatrix]"){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.e=a.e;this.f=a.f;return;}
if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f;}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0;}}
(function(matrixproto){matrixproto.add=function(a,b,c,d,e,f){var out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;if(a&&a instanceof Matrix){matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]];}
for(x=0;x<3;x++){for(y=0;y<3;y++){res=0;for(z=0;z<3;z++){res+=m[x][z]*matrix[z][y];}
out[x][y]=res;}}
this.a=out[0][0];this.b=out[1][0];this.c=out[0][1];this.d=out[1][1];this.e=out[0][2];this.f=out[1][2];return this;};matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x);};matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f);};matrixproto.translate=function(x,y){return this.add(1,0,0,1,x,y);};matrixproto.scale=function(x,y,cx,cy){y==null&&(y=x);(cx||cy)&&this.add(1,0,0,1,cx,cy);this.add(x,0,0,y,0,0);(cx||cy)&&this.add(1,0,0,1,-cx,-cy);return this;};matrixproto.rotate=function(a,x,y){a=Snap.rad(a);x=x||0;y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y);return this.add(1,0,0,1,-x,-y);};matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e;};matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f;};matrixproto.get=function(i){return+this[Str.fromCharCode(97+i)].toFixed(4);};matrixproto.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")";};matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)];};function norm(a){return a[0]*a[0]+a[1]*a[1];}
function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag);a[1]&&(a[1]/=mag);}
matrixproto.determinant=function(){return this.a*this.d-this.b*this.c;};matrixproto.split=function(){var out={};out.dx=this.e;out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0]));normalize(row[0]);out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1];row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear];out.scaley=math.sqrt(norm(row[1]));normalize(row[1]);out.shear/=out.scaley;if(this.determinant()<0){out.scalex=-out.scalex;}
var sin=-row[0][1],cos=row[1][1];if(cos<0){out.rotate=Snap.deg(math.acos(cos));if(sin<0){out.rotate=360-out.rotate;}}else{out.rotate=Snap.deg(math.asin(sin));}
out.isSimple=!+out.shear.toFixed(9)&&(out.scalex.toFixed(9)==out.scaley.toFixed(9)||!out.rotate);out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate;out.noRotation=!+out.shear.toFixed(9)&&!out.rotate;return out;};matrixproto.toTransformString=function(shorter){var s=shorter||this.split();if(!+s.shear.toFixed(9)){s.scalex=+s.scalex.toFixed(4);s.scaley=+s.scaley.toFixed(4);s.rotate=+s.rotate.toFixed(4);return(s.dx||s.dy?"t"+[+s.dx.toFixed(4),+s.dy.toFixed(4)]:E)+
(s.scalex!=1||s.scaley!=1?"s"+[s.scalex,s.scaley,0,0]:E)+
(s.rotate?"r"+[+s.rotate.toFixed(4),0,0]:E);}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];}};})(Matrix.prototype);Snap.Matrix=Matrix;Snap.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f);};});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var has="hasOwnProperty",make=Snap._.make,wrap=Snap._.wrap,is=Snap.is,getSomeDefs=Snap._.getSomeDefs,reURLValue=/^url\(#?([^)]+)\)$/,$=Snap._.$,URL=Snap.url,Str=String,separator=Snap._.separator,E="";eve.on("snap.util.attr.mask",function(value){if(value instanceof Element||value instanceof Fragment){eve.stop();if(value instanceof Fragment&&value.node.childNodes.length==1){value=value.node.firstChild;getSomeDefs(this).appendChild(value);value=wrap(value);}
if(value.type=="mask"){var mask=value;}else{mask=make("mask",getSomeDefs(this));mask.node.appendChild(value.node);}
!mask.node.id&&$(mask.node,{id:mask.id});$(this.node,{mask:URL(mask.id)});}});(function(clipIt){eve.on("snap.util.attr.clip",clipIt);eve.on("snap.util.attr.clip-path",clipIt);eve.on("snap.util.attr.clipPath",clipIt);}(function(value){if(value instanceof Element||value instanceof Fragment){eve.stop();if(value.type=="clipPath"){var clip=value;}else{clip=make("clipPath",getSomeDefs(this));clip.node.appendChild(value.node);!clip.node.id&&$(clip.node,{id:clip.id});}
$(this.node,{"clip-path":URL(clip.id)});}}));function fillStroke(name){return function(value){eve.stop();if(value instanceof Fragment&&value.node.childNodes.length==1&&(value.node.firstChild.tagName=="radialGradient"||value.node.firstChild.tagName=="linearGradient"||value.node.firstChild.tagName=="pattern")){value=value.node.firstChild;getSomeDefs(this).appendChild(value);value=wrap(value);}
if(value instanceof Element){if(value.type=="radialGradient"||value.type=="linearGradient"||value.type=="pattern"){if(!value.node.id){$(value.node,{id:value.id});}
var fill=URL(value.node.id);}else{fill=value.attr(name);}}else{fill=Snap.color(value);if(fill.error){var grad=Snap(getSomeDefs(this).ownerSVGElement).gradient(value);if(grad){if(!grad.node.id){$(grad.node,{id:grad.id});}
fill=URL(grad.node.id);}else{fill=value;}}else{fill=Str(fill);}}
var attrs={};attrs[name]=fill;$(this.node,attrs);this.node.style[name]=E;};}
eve.on("snap.util.attr.fill",fillStroke("fill"));eve.on("snap.util.attr.stroke",fillStroke("stroke"));var gradrg=/^([lr])(?:\(([^)]*)\))?(.*)$/i;eve.on("snap.util.grad.parse",function parseGrad(string){string=Str(string);var tokens=string.match(gradrg);if(!tokens){return null;}
var type=tokens[1],params=tokens[2],stops=tokens[3];params=params.split(/\s*,\s*/).map(function(el){return+el==el?+el:el;});if(params.length==1&&params[0]==0){params=[];}
stops=stops.split("-");stops=stops.map(function(el){el=el.split(":");var out={color:el[0]};if(el[1]){out.offset=parseFloat(el[1]);}
return out;});return{type:type,params:params,stops:stops};});eve.on("snap.util.attr.d",function(value){eve.stop();if(is(value,"array")&&is(value[0],"array")){value=Snap.path.toString.call(value);}
value=Str(value);if(value.match(/[ruo]/i)){value=Snap.path.toAbsolute(value);}
$(this.node,{d:value});})(-1);eve.on("snap.util.attr.#text",function(value){eve.stop();value=Str(value);var txt=glob.doc.createTextNode(value);while(this.node.firstChild){this.node.removeChild(this.node.firstChild);}
this.node.appendChild(txt);})(-1);eve.on("snap.util.attr.path",function(value){eve.stop();this.attr({d:value});})(-1);eve.on("snap.util.attr.class",function(value){eve.stop();this.node.className.baseVal=value;})(-1);eve.on("snap.util.attr.viewBox",function(value){var vb;if(is(value,"object")&&"x"in value){vb=[value.x,value.y,value.width,value.height].join(" ");}else if(is(value,"array")){vb=value.join(" ");}else{vb=value;}
$(this.node,{viewBox:vb});eve.stop();})(-1);eve.on("snap.util.attr.transform",function(value){this.transform(value);eve.stop();})(-1);eve.on("snap.util.attr.r",function(value){if(this.type=="rect"){eve.stop();$(this.node,{rx:value,ry:value});}})(-1);eve.on("snap.util.attr.textpath",function(value){eve.stop();if(this.type=="text"){var id,tp,node;if(!value&&this.textPath){tp=this.textPath;while(tp.node.firstChild){this.node.appendChild(tp.node.firstChild);}
tp.remove();delete this.textPath;return;}
if(is(value,"string")){var defs=getSomeDefs(this),path=wrap(defs.parentNode).path(value);defs.appendChild(path.node);id=path.id;path.attr({id:id});}else{value=wrap(value);if(value instanceof Element){id=value.attr("id");if(!id){id=value.id;value.attr({id:id});}}}
if(id){tp=this.textPath;node=this.node;if(tp){tp.attr({"xlink:href":"#"+id});}else{tp=$("textPath",{"xlink:href":"#"+id});while(node.firstChild){tp.appendChild(node.firstChild);}
node.appendChild(tp);this.textPath=wrap(tp);}}}})(-1);eve.on("snap.util.attr.text",function(value){if(this.type=="text"){var i=0,node=this.node,tuner=function(chunk){var out=$("tspan");if(is(chunk,"array")){for(var i=0;i<chunk.length;i++){out.appendChild(tuner(chunk[i]));}}else{out.appendChild(glob.doc.createTextNode(chunk));}
out.normalize&&out.normalize();return out;};while(node.firstChild){node.removeChild(node.firstChild);}
var tuned=tuner(value);while(tuned.firstChild){node.appendChild(tuned.firstChild);}}
eve.stop();})(-1);function setFontSize(value){eve.stop();if(value==+value){value+="px";}
this.node.style.fontSize=value;}
eve.on("snap.util.attr.fontSize",setFontSize)(-1);eve.on("snap.util.attr.font-size",setFontSize)(-1);eve.on("snap.util.getattr.transform",function(){eve.stop();return this.transform();})(-1);eve.on("snap.util.getattr.textpath",function(){eve.stop();return this.textPath;})(-1);(function(){function getter(end){return function(){eve.stop();var style=glob.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+end);if(style=="none"){return style;}else{return Snap(glob.doc.getElementById(style.match(reURLValue)[1]));}};}
function setter(end){return function(value){eve.stop();var name="marker"+end.charAt(0).toUpperCase()+end.substring(1);if(value==""||!value){this.node.style[name]="none";return;}
if(value.type=="marker"){var id=value.node.id;if(!id){$(value.node,{id:value.id});}
this.node.style[name]=URL(id);return;}};}
eve.on("snap.util.getattr.marker-end",getter("end"))(-1);eve.on("snap.util.getattr.markerEnd",getter("end"))(-1);eve.on("snap.util.getattr.marker-start",getter("start"))(-1);eve.on("snap.util.getattr.markerStart",getter("start"))(-1);eve.on("snap.util.getattr.marker-mid",getter("mid"))(-1);eve.on("snap.util.getattr.markerMid",getter("mid"))(-1);eve.on("snap.util.attr.marker-end",setter("end"))(-1);eve.on("snap.util.attr.markerEnd",setter("end"))(-1);eve.on("snap.util.attr.marker-start",setter("start"))(-1);eve.on("snap.util.attr.markerStart",setter("start"))(-1);eve.on("snap.util.attr.marker-mid",setter("mid"))(-1);eve.on("snap.util.attr.markerMid",setter("mid"))(-1);}());eve.on("snap.util.getattr.r",function(){if(this.type=="rect"&&$(this.node,"rx")==$(this.node,"ry")){eve.stop();return $(this.node,"rx");}})(-1);function textExtract(node){var out=[];var children=node.childNodes;for(var i=0,ii=children.length;i<ii;i++){var chi=children[i];if(chi.nodeType==3){out.push(chi.nodeValue);}
if(chi.tagName=="tspan"){if(chi.childNodes.length==1&&chi.firstChild.nodeType==3){out.push(chi.firstChild.nodeValue);}else{out.push(textExtract(chi));}}}
return out;}
eve.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){eve.stop();var out=textExtract(this.node);return out.length==1?out[0]:out;}})(-1);eve.on("snap.util.getattr.#text",function(){return this.node.textContent;})(-1);eve.on("snap.util.getattr.viewBox",function(){eve.stop();var vb=$(this.node,"viewBox");if(vb){vb=vb.split(separator);return Snap._.box(+vb[0],+vb[1],+vb[2],+vb[3]);}else{return;}})(-1);eve.on("snap.util.getattr.points",function(){var p=$(this.node,"points");eve.stop();if(p){return p.split(separator);}else{return;}})(-1);eve.on("snap.util.getattr.path",function(){var p=$(this.node,"d");eve.stop();return p;})(-1);eve.on("snap.util.getattr.class",function(){return this.node.className.baseVal;})(-1);function getFontSize(){eve.stop();return this.node.style.fontSize;}
eve.on("snap.util.getattr.fontSize",getFontSize)(-1);eve.on("snap.util.getattr.font-size",getFontSize)(-1);});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var operators={"+":function(x,y){return x+y;},"-":function(x,y){return x-y;},"/":function(x,y){return x/y;},"*":function(x,y){return x*y;}},Str=String,reUnit=/[a-z]+$/i,reAddon=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function getNumber(val){return val;}
function getUnit(unit){return function(val){return+val.toFixed(3)+unit;};}
eve.on("snap.util.attr",function(val){var plus=Str(val).match(reAddon);if(plus){var evnt=eve.nt(),name=evnt.substring(evnt.lastIndexOf(".")+1),a=this.attr(name),atr={};eve.stop();var unit=plus[3]||"",aUnit=a.match(reUnit),op=operators[plus[1]];if(aUnit&&aUnit==unit){val=op(parseFloat(a),+plus[2]);}else{a=this.asPX(name);val=op(this.asPX(name),this.asPX(name,plus[2]+unit));}
if(isNaN(a)||isNaN(val)){return;}
atr[name]=val;this.attr(atr);}})(-10);eve.on("snap.util.equal",function(name,b){var A,B,a=Str(this.attr(name)||""),el=this,bplus=Str(b).match(reAddon);if(bplus){eve.stop();var unit=bplus[3]||"",aUnit=a.match(reUnit),op=operators[bplus[1]];if(aUnit&&aUnit==unit){return{from:parseFloat(a),to:op(parseFloat(a),+bplus[2]),f:getUnit(aUnit)};}else{a=this.asPX(name);return{from:a,to:op(a,this.asPX(name,bplus[2]+unit)),f:getNumber};}}})(-10);});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var proto=Paper.prototype,is=Snap.is;proto.rect=function(x,y,w,h,rx,ry){var attr;if(ry==null){ry=rx;}
if(is(x,"object")&&x=="[object Object]"){attr=x;}else if(x!=null){attr={x:x,y:y,width:w,height:h};if(rx!=null){attr.rx=rx;attr.ry=ry;}}
return this.el("rect",attr);};proto.circle=function(cx,cy,r){var attr;if(is(cx,"object")&&cx=="[object Object]"){attr=cx;}else if(cx!=null){attr={cx:cx,cy:cy,r:r};}
return this.el("circle",attr);};var preload=(function(){function onerror(){this.parentNode.removeChild(this);}
return function(src,f){var img=glob.doc.createElement("img"),body=glob.doc.body;img.style.cssText="position:absolute;left:-9999em;top:-9999em";img.onload=function(){f.call(img);img.onload=img.onerror=null;body.removeChild(img);};img.onerror=onerror;body.appendChild(img);img.src=src;};}());proto.image=function(src,x,y,width,height){var el=this.el("image");if(is(src,"object")&&"src"in src){el.attr(src);}else if(src!=null){var set={"xlink:href":src,preserveAspectRatio:"none"};if(x!=null&&y!=null){set.x=x;set.y=y;}
if(width!=null&&height!=null){set.width=width;set.height=height;}else{preload(src,function(){Snap._.$(el.node,{width:this.offsetWidth,height:this.offsetHeight});});}
Snap._.$(el.node,set);}
return el;};proto.ellipse=function(cx,cy,rx,ry){var attr;if(is(cx,"object")&&cx=="[object Object]"){attr=cx;}else if(cx!=null){attr={cx:cx,cy:cy,rx:rx,ry:ry};}
return this.el("ellipse",attr);};proto.path=function(d){var attr;if(is(d,"object")&&!is(d,"array")){attr=d;}else if(d){attr={d:d};}
return this.el("path",attr);};proto.group=proto.g=function(first){var attr,el=this.el("g");if(arguments.length==1&&first&&!first.type){el.attr(first);}else if(arguments.length){el.add(Array.prototype.slice.call(arguments,0));}
return el;};proto.svg=function(x,y,width,height,vbx,vby,vbw,vbh){var attrs={};if(is(x,"object")&&y==null){attrs=x;}else{if(x!=null){attrs.x=x;}
if(y!=null){attrs.y=y;}
if(width!=null){attrs.width=width;}
if(height!=null){attrs.height=height;}
if(vbx!=null&&vby!=null&&vbw!=null&&vbh!=null){attrs.viewBox=[vbx,vby,vbw,vbh];}}
return this.el("svg",attrs);};proto.mask=function(first){var attr,el=this.el("mask");if(arguments.length==1&&first&&!first.type){el.attr(first);}else if(arguments.length){el.add(Array.prototype.slice.call(arguments,0));}
return el;};proto.ptrn=function(x,y,width,height,vx,vy,vw,vh){if(is(x,"object")){var attr=x;}else if(!arguments.length){attr={patternUnits:"userSpaceOnUse"};}else{attr={};if(x!=null){attr.x=x;}
if(y!=null){attr.y=y;}
if(width!=null){attr.width=width;}
if(height!=null){attr.height=height;}
if(vx!=null&&vy!=null&&vw!=null&&vh!=null){attr.viewBox=[vx,vy,vw,vh];}}
return this.el("pattern",attr);};proto.use=function(id){if(id!=null){var el=make("use",this.node);if(id instanceof Element){if(!id.attr("id")){id.attr({id:ID()});}
id=id.attr("id");}
return this.el("use",{"xlink:href":id});}else{return Element.prototype.use.call(this);}};proto.text=function(x,y,text){var attr={};if(is(x,"object")){attr=x;}else if(x!=null){attr={x:x,y:y,text:text||""};}
return this.el("text",attr);};proto.line=function(x1,y1,x2,y2){var attr={};if(is(x1,"object")){attr=x1;}else if(x1!=null){attr={x1:x1,x2:x2,y1:y1,y2:y2};}
return this.el("line",attr);};proto.polyline=function(points){if(arguments.length>1){points=Array.prototype.slice.call(arguments,0);}
var attr={};if(is(points,"object")&&!is(points,"array")){attr=points;}else if(points!=null){attr={points:points};}
return this.el("polyline",attr);};proto.polygon=function(points){if(arguments.length>1){points=Array.prototype.slice.call(arguments,0);}
var attr={};if(is(points,"object")&&!is(points,"array")){attr=points;}else if(points!=null){attr={points:points};}
return this.el("polygon",attr);};(function(){var $=Snap._.$;function Gstops(){return this.selectAll("stop");}
function GaddStop(color,offset){var stop=$("stop"),attr={offset:+offset+"%"};color=Snap.color(color);attr["stop-color"]=color.hex;if(color.opacity<1){attr["stop-opacity"]=color.opacity;}
$(stop,attr);this.node.appendChild(stop);return this;}
function GgetBBox(){if(this.type=="linearGradient"){var x1=$(this.node,"x1")||0,x2=$(this.node,"x2")||1,y1=$(this.node,"y1")||0,y2=$(this.node,"y2")||0;return Snap._.box(x1,y1,math.abs(x2-x1),math.abs(y2-y1));}else{var cx=this.node.cx||.5,cy=this.node.cy||.5,r=this.node.r||0;return Snap._.box(cx-r,cy-r,r*2,r*2);}}
function gradient(defs,str){var grad=eve("snap.util.grad.parse",null,str).firstDefined(),el;if(!grad){return null;}
grad.params.unshift(defs);if(grad.type.toLowerCase()=="l"){el=gradientLinear.apply(0,grad.params);}else{el=gradientRadial.apply(0,grad.params);}
if(grad.type!=grad.type.toLowerCase()){$(el.node,{gradientUnits:"userSpaceOnUse"});}
var stops=grad.stops,len=stops.length,start=0,j=0;function seed(i,end){var step=(end-start)/(i-j);for(var k=j;k<i;k++){stops[k].offset=+(+start+step*(k-j)).toFixed(2);}
j=i;start=end;}
len--;for(var i=0;i<len;i++)if("offset"in stops[i]){seed(i,stops[i].offset);}
stops[len].offset=stops[len].offset||100;seed(len,stops[len].offset);for(i=0;i<=len;i++){var stop=stops[i];el.addStop(stop.color,stop.offset);}
return el;}
function gradientLinear(defs,x1,y1,x2,y2){var el=Snap._.make("linearGradient",defs);el.stops=Gstops;el.addStop=GaddStop;el.getBBox=GgetBBox;if(x1!=null){$(el.node,{x1:x1,y1:y1,x2:x2,y2:y2});}
return el;}
function gradientRadial(defs,cx,cy,r,fx,fy){var el=Snap._.make("radialGradient",defs);el.stops=Gstops;el.addStop=GaddStop;el.getBBox=GgetBBox;if(cx!=null){$(el.node,{cx:cx,cy:cy,r:r});}
if(fx!=null&&fy!=null){$(el.node,{fx:fx,fy:fy});}
return el;}
proto.gradient=function(str){return gradient(this.defs,str);};proto.gradientLinear=function(x1,y1,x2,y2){return gradientLinear(this.defs,x1,y1,x2,y2);};proto.gradientRadial=function(cx,cy,r,fx,fy){return gradientRadial(this.defs,cx,cy,r,fx,fy);};proto.toString=function(){var doc=this.node.ownerDocument,f=doc.createDocumentFragment(),d=doc.createElement("div"),svg=this.node.cloneNode(true),res;f.appendChild(d);d.appendChild(svg);Snap._.$(svg,{xmlns:"http://www.w3.org/2000/svg"});res=d.innerHTML;f.removeChild(f.firstChild);return res;};proto.clear=function(){var node=this.node.firstChild,next;while(node){next=node.nextSibling;if(node.tagName!="defs"){node.parentNode.removeChild(node);}else{proto.clear.call({node:node});}
node=next;}};}());});Snap.plugin(function(Snap,Element,Paper,glob){var elproto=Element.prototype,is=Snap.is,clone=Snap._.clone,has="hasOwnProperty",p2s=/,?([a-z]),?/gi,toFloat=parseFloat,math=Math,PI=math.PI,mmin=math.min,mmax=math.max,pow=math.pow,abs=math.abs;function paths(ps){var p=paths.ps=paths.ps||{};if(p[ps]){p[ps].sleep=100;}else{p[ps]={sleep:100};}
setTimeout(function(){for(var key in p)if(p[has](key)&&key!=ps){p[key].sleep--;!p[key].sleep&&delete p[key];}});return p[ps];}
function box(x,y,width,height){if(x==null){x=y=width=height=0;}
if(y==null){y=x.y;width=x.width;height=x.height;x=x.x;}
return{x:x,y:y,width:width,w:width,height:height,h:height,x2:x+width,y2:y+height,cx:x+width/2,cy:y+height/2,r1:math.min(width,height)/2,r2:math.max(width,height)/2,r0:math.sqrt(width*width+height*height)/2,path:rectPath(x,y,width,height),vb:[x,y,width,height].join(" ")};}
function toString(){return this.join(",").replace(p2s,"$1");}
function pathClone(pathArray){var res=clone(pathArray);res.toString=toString;return res;}
function getPointAtSegmentLength(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){if(length==null){return bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y);}else{return findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTotLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length));}}
function getLengthFactory(istotal,subpath){function O(val){return+(+val).toFixed(3);}
return Snap._.cacher(function(path,length,onlystart){if(path instanceof Element){path=path.attr("d");}
path=path2curve(path);var x,y,p,l,sp="",subpaths={},point,len=0;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=+p[1];y=+p[2];}else{l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);if(len+l>length){if(subpath&&!subpaths.start){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);sp+=["C"+O(point.start.x),O(point.start.y),O(point.m.x),O(point.m.y),O(point.x),O(point.y)];if(onlystart){return sp;}
subpaths.start=sp;sp=["M"+O(point.x),O(point.y)+"C"+O(point.n.x),O(point.n.y),O(point.end.x),O(point.end.y),O(p[5]),O(p[6])].join();len+=l;x=+p[5];y=+p[6];continue;}
if(!istotal&&!subpath){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);return point;}}
len+=l;x=+p[5];y=+p[6];}
sp+=p.shift()+p;}
subpaths.end=sp;point=istotal?len:subpath?subpaths:findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1);return point;},null,Snap._.clone);}
var getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);function findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+t12*3*t*c1x+t1*3*t*t*c2x+t3*p2x,y=t13*p1y+t12*3*t*c1y+t1*3*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=(90-math.atan2(mx-nx,my-ny)*180/PI);return{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha};}
function bezierBBox(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){if(!Snap.is(p1x,"array")){p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y];}
var bbox=curveDim.apply(null,p1x);return box(bbox.min.x,bbox.min.y,bbox.max.x-bbox.min.x,bbox.max.y-bbox.min.y);}
function isPointInsideBBox(bbox,x,y){return x>=bbox.x&&x<=bbox.x+bbox.width&&y>=bbox.y&&y<=bbox.y+bbox.height;}
function isBBoxIntersect(bbox1,bbox2){bbox1=box(bbox1);bbox2=box(bbox2);return isPointInsideBBox(bbox2,bbox1.x,bbox1.y)||isPointInsideBBox(bbox2,bbox1.x2,bbox1.y)||isPointInsideBBox(bbox2,bbox1.x,bbox1.y2)||isPointInsideBBox(bbox2,bbox1.x2,bbox1.y2)||isPointInsideBBox(bbox1,bbox2.x,bbox2.y)||isPointInsideBBox(bbox1,bbox2.x2,bbox2.y)||isPointInsideBBox(bbox1,bbox2.x,bbox2.y2)||isPointInsideBBox(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y);}
function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2;}
function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){if(z==null){z=1;}
z=z>1?1:z<0?0:z;var z2=z/2,n=12,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Cvalues=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],sum=0;for(var i=0;i<n;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb);}
return z2*sum;}
function getTotLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll){return;}
var t=1,step=t/2,t2=t-step,l,e=.01;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);while(abs(l-ll)>e){step/=2;t2+=(l<ll?1:-1)*step;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);}
return t2;}
function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4)){return;}
var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(!denominator){return;}
var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)){return;}
return{x:px,y:py};}
function inter(bez1,bez2){return interHelper(bez1,bez2);}
function interCount(bez1,bez2){return interHelper(bez1,bez2,1);}
function interHelper(bez1,bez2,justCount){var bbox1=bezierBBox(bez1),bbox2=bezierBBox(bez2);if(!isBBoxIntersect(bbox1,bbox2)){return justCount?0:[];}
var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=~~(l1/8),n2=~~(l2/8),dots1=[],dots2=[],xy={},res=justCount?0:[];for(var i=0;i<n1+1;i++){var p=findDotsAtSegment.apply(0,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1});}
for(i=0;i<n2+1;i++){p=findDotsAtSegment.apply(0,bez2.concat(i/n2));dots2.push({x:p.x,y:p.y,t:i/n2});}
for(i=0;i<n1;i++){for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4)){continue;}
xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);if(t1>=0&&t1<=1&&t2>=0&&t2<=1){if(justCount){res++;}else{res.push({x:is.x,y:is.y,t1:t1,t2:t2});}}}}}
return res;}
function pathIntersection(path1,path2){return interPathHelper(path1,path2);}
function pathIntersectionNumber(path1,path2){return interPathHelper(path1,path2,1);}
function interPathHelper(path1,path2,justCount){path1=path2curve(path1);path2=path2curve(path2);var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[];for(var i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if(pi[0]=="M"){x1=x1m=pi[1];y1=y1m=pi[2];}else{if(pi[0]=="C"){bez1=[x1,y1].concat(pi.slice(1));x1=bez1[6];y1=bez1[7];}else{bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m];x1=x1m;y1=y1m;}
for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if(pj[0]=="M"){x2=x2m=pj[1];y2=y2m=pj[2];}else{if(pj[0]=="C"){bez2=[x2,y2].concat(pj.slice(1));x2=bez2[6];y2=bez2[7];}else{bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m];x2=x2m;y2=y2m;}
var intr=interHelper(bez1,bez2,justCount);if(justCount){res+=intr;}else{for(var k=0,kk=intr.length;k<kk;k++){intr[k].segment1=i;intr[k].segment2=j;intr[k].bez1=bez1;intr[k].bez2=bez2;}
res=res.concat(intr);}}}}}
return res;}
function isPointInsidePath(path,x,y){var bbox=pathBBox(path);return isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1;}
function pathBBox(path){var pth=paths(path);if(pth.bbox){return clone(pth.bbox);}
if(!path){return box();}
path=path2curve(path);var x=0,y=0,X=[],Y=[],p;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y);}else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X.concat(dim.min.x,dim.max.x);Y=Y.concat(dim.min.y,dim.max.y);x=p[5];y=p[6];}}
var xmin=mmin.apply(0,X),ymin=mmin.apply(0,Y),xmax=mmax.apply(0,X),ymax=mmax.apply(0,Y),bb=box(xmin,ymin,xmax-xmin,ymax-ymin);pth.bbox=clone(bb);return bb;}
function rectPath(x,y,w,h,r){if(r){return[["M",+x+(+r),y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]];}
var res=[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]];res.toString=toString;return res;}
function ellipsePath(x,y,rx,ry,a){if(a==null&&ry==null){ry=rx;}
x=+x;y=+y;rx=+rx;ry=+ry;if(a!=null){var rad=Math.PI/180,x1=x+rx*Math.cos(-ry*rad),x2=x+rx*Math.cos(-a*rad),y1=y+rx*Math.sin(-ry*rad),y2=y+rx*Math.sin(-a*rad),res=[["M",x1,y1],["A",rx,rx,0,+(a-ry>180),0,x2,y2]];}else{res=[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]];}
res.toString=toString;return res;}
var unit2px=Snap._unit2px,getPath={path:function(el){return el.attr("path");},circle:function(el){var attr=unit2px(el);return ellipsePath(attr.cx,attr.cy,attr.r);},ellipse:function(el){var attr=unit2px(el);return ellipsePath(attr.cx||0,attr.cy||0,attr.rx,attr.ry);},rect:function(el){var attr=unit2px(el);return rectPath(attr.x||0,attr.y||0,attr.width,attr.height,attr.rx,attr.ry);},image:function(el){var attr=unit2px(el);return rectPath(attr.x||0,attr.y||0,attr.width,attr.height);},line:function(el){return"M"+[el.attr("x1")||0,el.attr("y1")||0,el.attr("x2"),el.attr("y2")];},polyline:function(el){return"M"+el.attr("points");},polygon:function(el){return"M"+el.attr("points")+"z";},deflt:function(el){var bbox=el.node.getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height);}};function pathToRelative(pathArray){var pth=paths(pathArray),lowerCase=String.prototype.toLowerCase;if(pth.rel){return pathClone(pth.rel);}
if(!Snap.is(pathArray,"array")||!Snap.is(pathArray&&pathArray[0],"array")){pathArray=Snap.parsePathString(pathArray);}
var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y]);}
for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0])){r[0]=lowerCase.call(pa[0]);switch(r[0]){case"a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++){r[j]=+(pa[j]-((j%2)?x:y)).toFixed(3);}}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y;}
for(var k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k];}}
var len=res[i].length;switch(res[i][0]){case"z":x=mx;y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2];y+=+res[i][len-1];}}
res.toString=toString;pth.rel=pathClone(res);return res;}
function pathToAbsolute(pathArray){var pth=paths(pathArray);if(pth.abs){return pathClone(pth.abs);}
if(!is(pathArray,"array")||!is(pathArray&&pathArray[0],"array")){pathArray=Snap.parsePathString(pathArray);}
if(!pathArray||!pathArray.length){return[["M",0,0]];}
var res=[],x=0,y=0,mx=0,my=0,start=0,pa0;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;res[0]=["M",x,y];}
var crz=pathArray.length==3&&pathArray[0][0]=="M"&&pathArray[1][0].toUpperCase()=="R"&&pathArray[2][0].toUpperCase()=="Z";for(var r,pa,i=start,ii=pathArray.length;i<ii;i++){res.push(r=[]);pa=pathArray[i];pa0=pa[0];if(pa0!=pa0.toUpperCase()){r[0]=pa0.toUpperCase();switch(r[0]){case"A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+pa[6]+x;r[7]=+pa[7]+y;break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":var dots=[x,y].concat(pa.slice(1));for(var j=2,jj=dots.length;j<jj;j++){dots[j]=+dots[j]+x;dots[++j]=+dots[j]+y;}
res.pop();res=res.concat(catmullRom2bezier(dots,crz));break;case"O":res.pop();dots=ellipsePath(x,y,pa[1],pa[2]);dots.push(dots[0]);res=res.concat(dots);break;case"U":res.pop();res=res.concat(ellipsePath(x,y,pa[1],pa[2],pa[3]));r=["U"].concat(res[res.length-1].slice(-2));break;case"M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++){r[j]=+pa[j]+((j%2)?x:y);}}}else if(pa0=="R"){dots=[x,y].concat(pa.slice(1));res.pop();res=res.concat(catmullRom2bezier(dots,crz));r=["R"].concat(pa.slice(-2));}else if(pa0=="O"){res.pop();dots=ellipsePath(x,y,pa[1],pa[2]);dots.push(dots[0]);res=res.concat(dots);}else if(pa0=="U"){res.pop();res=res.concat(ellipsePath(x,y,pa[1],pa[2],pa[3]));r=["U"].concat(res[res.length-1].slice(-2));}else{for(var k=0,kk=pa.length;k<kk;k++){r[k]=pa[k];}}
pa0=pa0.toUpperCase();if(pa0!="O"){switch(r[0]){case"Z":x=+mx;y=+my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2];my=r[r.length-1];default:x=r[r.length-2];y=r[r.length-1];}}}
res.toString=toString;pth.abs=pathClone(res);return res;}
function l2c(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2];}
function q2c(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2];}
function a2c(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var _120=PI*120/180,rad=PI/180*(+angle||0),res=[],xy,rotate=Snap._.cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),Y=x*math.sin(rad)+y*math.cos(rad);return{x:X,y:Y};});if(!recursive){xy=rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;var cos=math.cos(PI/180*angle),sin=math.sin(PI/180*angle),x=(x1-x2)/2,y=(y1-y2)/2;var h=(x*x)/(rx*rx)+(y*y)/(ry*ry);if(h>1){h=math.sqrt(h);rx=h*rx;ry=h*ry;}
var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;f1<0&&(f1=PI*2+f1);f2<0&&(f2=PI*2+f2);if(sweep_flag&&f1>f2){f1=f1-PI*2;}
if(!sweep_flag&&f2>f1){f2=f2-PI*2;}}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3];}
var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*math.cos(f2);y2=cy+ry*math.sin(f2);res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy]);}
df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive){return[m2,m3,m4].concat(res);}else{res=[m2,m3,m4].concat(res).join().split(",");var newres=[];for(var i=0,ii=res.length;i<ii;i++){newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;}
return newres;}}
function findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+pow(t,3)*p2y};}
function curveDim(x0,y0,x1,y1,x2,y2,x3,y3){var tvalues=[],bounds=[[],[]],a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(var i=0;i<2;++i){if(i==0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}
if(abs(a)<1e-12){if(abs(b)<1e-12){continue;}
t=-c/b;if(0<t&&t<1){tvalues.push(t);}
continue;}
b2ac=b*b-4*c*a;sqrtb2ac=math.sqrt(b2ac);if(b2ac<0){continue;}
t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}
t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}
var x,y,j=tvalues.length,jlen=j,mt;while(j--){t=tvalues[j];mt=1-t;bounds[0][j]=(mt*mt*mt*x0)+(3*mt*mt*t*x1)+(3*mt*t*t*x2)+(t*t*t*x3);bounds[1][j]=(mt*mt*mt*y0)+(3*mt*mt*t*y1)+(3*mt*t*t*y2)+(t*t*t*y3);}
bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;bounds[0].length=bounds[1].length=jlen+2;return{min:{x:mmin.apply(0,bounds[0]),y:mmin.apply(0,bounds[1])},max:{x:mmax.apply(0,bounds[0]),y:mmax.apply(0,bounds[1])}};}
function path2curve(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve){return pathClone(pth.curve);}
var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d,pcom){var nx,ny;if(!path){return["C",d.x,d.y,d.x,d.y,d.x,d.y];}
!(path[0]in{T:1,Q:1})&&(d.qx=d.qy=null);switch(path[0]){case"M":d.X=path[1];d.Y=path[2];break;case"A":path=["C"].concat(a2c.apply(0,[d.x,d.y].concat(path.slice(1))));break;case"S":if(pcom=="C"||pcom=="S"){nx=d.x*2-d.bx;ny=d.y*2-d.by;}
else{nx=d.x;ny=d.y;}
path=["C",nx,ny].concat(path.slice(1));break;case"T":if(pcom=="Q"||pcom=="T"){d.qx=d.x*2-d.qx;d.qy=d.y*2-d.qy;}
else{d.qx=d.x;d.qy=d.y;}
path=["C"].concat(q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1];d.qy=path[2];path=["C"].concat(q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"].concat(l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"].concat(l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"].concat(l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"].concat(l2c(d.x,d.y,d.X,d.Y));break;}
return path;},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length){pcoms1[i]="A";p2&&(pcoms2[i]="A");pp.splice(i++,0,["C"].concat(pi.splice(0,6)));}
pp.splice(i,1);ii=mmax(p.length,p2&&p2.length||0);}},fixM=function(path1,path2,a1,a2,i){if(path1&&path2&&path1[i][0]=="M"&&path2[i][0]!="M"){path2.splice(i,0,["M",a2.x,a2.y]);a1.bx=0;a1.by=0;a1.x=path1[i][1];a1.y=path1[i][2];ii=mmax(p.length,p2&&p2.length||0);}},pcoms1=[],pcoms2=[],pfirst="",pcom="";for(var i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]&&(pfirst=p[i][0]);if(pfirst!="C")
{pcoms1[i]=pfirst;i&&(pcom=pcoms1[i-1]);}
p[i]=processPath(p[i],attrs,pcom);if(pcoms1[i]!="A"&&pfirst=="C")pcoms1[i]="C";fixArc(p,i);if(p2){p2[i]&&(pfirst=p2[i][0]);if(pfirst!="C"){pcoms2[i]=pfirst;i&&(pcom=pcoms2[i-1]);}
p2[i]=processPath(p2[i],attrs2,pcom);if(pcoms2[i]!="A"&&pfirst=="C"){pcoms2[i]="C";}
fixArc(p2,i);}
fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=toFloat(seg[seglen-4])||attrs.x;attrs.by=toFloat(seg[seglen-3])||attrs.y;attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x);attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=p2&&seg2[seg2len-2];attrs2.y=p2&&seg2[seg2len-1];}
if(!p2){pth.curve=pathClone(p);}
return p2?[p,p2]:p;}
function mapPath(path,matrix){if(!matrix){return path;}
var x,y,i,j,ii,jj,pathi;path=path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=1,jj=pathi.length;j<jj;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y;}}
return path;}
function catmullRom2bezier(crp,z){var d=[];for(var i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];if(z){if(!i){p[0]={x:+crp[iLen-2],y:+crp[iLen-1]};}else if(iLen-4==i){p[3]={x:+crp[0],y:+crp[1]};}else if(iLen-2==i){p[2]={x:+crp[0],y:+crp[1]};p[3]={x:+crp[2],y:+crp[3]};}}else{if(iLen-4==i){p[3]=p[2];}else if(!i){p[0]={x:+crp[i],y:+crp[i+1]};}}
d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y]);}
return d;}
Snap.path=paths;Snap.path.getTotalLength=getTotalLength;Snap.path.getPointAtLength=getPointAtLength;Snap.path.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<1e-6){return getSubpathsAtLength(path,from).end;}
var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a;};elproto.getTotalLength=function(){if(this.node.getTotalLength){return this.node.getTotalLength();}};elproto.getPointAtLength=function(length){return getPointAtLength(this.attr("d"),length);};elproto.getSubpath=function(from,to){return Snap.path.getSubpath(this.attr("d"),from,to);};Snap._.box=box;Snap.path.findDotsAtSegment=findDotsAtSegment;Snap.path.bezierBBox=bezierBBox;Snap.path.isPointInsideBBox=isPointInsideBBox;Snap.path.isBBoxIntersect=isBBoxIntersect;Snap.path.intersection=pathIntersection;Snap.path.intersectionNumber=pathIntersectionNumber;Snap.path.isPointInside=isPointInsidePath;Snap.path.getBBox=pathBBox;Snap.path.get=getPath;Snap.path.toRelative=pathToRelative;Snap.path.toAbsolute=pathToAbsolute;Snap.path.toCubic=path2curve;Snap.path.map=mapPath;Snap.path.toString=toString;Snap.path.clone=pathClone;});Snap.plugin(function(Snap,Element,Paper,glob){var mmax=Math.max,mmin=Math.min;var Set=function(items){this.items=[];this.bindings={};this.length=0;this.type="set";if(items){for(var i=0,ii=items.length;i<ii;i++){if(items[i]){this[this.items.length]=this.items[this.items.length]=items[i];this.length++;}}}},setproto=Set.prototype;setproto.push=function(){var item,len;for(var i=0,ii=arguments.length;i<ii;i++){item=arguments[i];if(item){len=this.items.length;this[len]=this.items[len]=item;this.length++;}}
return this;};setproto.pop=function(){this.length&&delete this[this.length--];return this.items.pop();};setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++){if(callback.call(thisArg,this.items[i],i)===false){return this;}}
return this;};setproto.animate=function(attrs,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
if(attrs instanceof Snap._.Animation){callback=attrs.callback;easing=attrs.easing;ms=easing.dur;attrs=attrs.attr;}
var args=arguments;if(Snap.is(attrs,"array")&&Snap.is(args[args.length-1],"array")){var each=true;}
var begin,handler=function(){if(begin){this.b=begin;}else{begin=this.b;}},cb=0,callbacker=callback&&function(){if(cb++==this.length){callback.call(this);}};return this.forEach(function(el,i){eve.once("snap.animcreated."+el.id,handler);if(each){args[i]&&el.animate.apply(el,args[i]);}else{el.animate(attrs,ms,easing,callbacker);}});};setproto.remove=function(){while(this.length){this.pop().remove();}
return this;};setproto.bind=function(attr,a,b){var data={};if(typeof a=="function"){this.bindings[attr]=a;}else{var aname=b||attr;this.bindings[attr]=function(v){data[aname]=v;a.attr(data);};}
return this;};setproto.attr=function(value){var unbound={};for(var k in value){if(this.bindings[k]){this.bindings[k](value[k]);}else{unbound[k]=value[k];}}
for(var i=0,ii=this.items.length;i<ii;i++){this.items[i].attr(unbound);}
return this;};setproto.clear=function(){while(this.length){this.pop();}};setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index;count=mmax(0,mmin(this.length-index,count));var tail=[],todel=[],args=[],i;for(i=2;i<arguments.length;i++){args.push(arguments[i]);}
for(i=0;i<count;i++){todel.push(this[index+i]);}
for(;i<this.length-index;i++){tail.push(this[index+i]);}
var arglen=args.length;for(i=0;i<arglen+tail.length;i++){this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen];}
i=this.items.length=this.length-=count-arglen;while(this[i]){delete this[i++];}
return new Set(todel);};setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++)if(this[i]==el){this.splice(i,1);return true;}
return false;};setproto.insertAfter=function(el){var i=this.items.length;while(i--){this.items[i].insertAfter(el);}
return this;};setproto.getBBox=function(){var x=[],y=[],x2=[],y2=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x);y.push(box.y);x2.push(box.x+box.width);y2.push(box.y+box.height);}
x=mmin.apply(0,x);y=mmin.apply(0,y);x2=mmax.apply(0,x2);y2=mmax.apply(0,y2);return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y,cx:x+(x2-x)/2,cy:y+(y2-y)/2};};setproto.clone=function(s){s=new Set;for(var i=0,ii=this.items.length;i<ii;i++){s.push(this.items[i].clone());}
return s;};setproto.toString=function(){return"Snap\u2018s set";};setproto.type="set";Snap.set=function(){var set=new Set;if(arguments.length){set.push.apply(set,Array.prototype.slice.call(arguments,0));}
return set;};});Snap.plugin(function(Snap,Element,Paper,glob){var names={},reUnit=/[a-z]+$/i,Str=String;names.stroke=names.fill="colour";function getEmpty(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":if(item.length==4){return[l,0,item[2],item[3]];}else{return[l,0];}
case"s":if(item.length==5){return[l,1,1,item[3],item[4]];}else if(item.length==3){return[l,1,1];}else{return[l,1];}}}
function equaliseTransform(t1,t2,getBBox){t2=Str(t2).replace(/\.{3}|\u2026/g,t1);t1=Snap.parseTransformString(t1)||[];t2=Snap.parseTransformString(t2)||[];var maxlength=Math.max(t1.length,t2.length),from=[],to=[],i=0,j,jj,tt1,tt2;for(;i<maxlength;i++){tt1=t1[i]||getEmpty(t2[i]);tt2=t2[i]||getEmpty(tt1);if((tt1[0]!=tt2[0])||(tt1[0].toLowerCase()=="r"&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3]))||(tt1[0].toLowerCase()=="s"&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))){t1=Snap._.transform2matrix(t1,getBBox());t2=Snap._.transform2matrix(t2,getBBox());from=[["m",t1.a,t1.b,t1.c,t1.d,t1.e,t1.f]];to=[["m",t2.a,t2.b,t2.c,t2.d,t2.e,t2.f]];break;}
from[i]=[];to[i]=[];for(j=0,jj=Math.max(tt1.length,tt2.length);j<jj;j++){j in tt1&&(from[i][j]=tt1[j]);j in tt2&&(to[i][j]=tt2[j]);}}
return{from:path2array(from),to:path2array(to),f:getPath(from)};}
function getNumber(val){return val;}
function getUnit(unit){return function(val){return+val.toFixed(3)+unit;};}
function getColour(clr){return Snap.rgb(clr[0],clr[1],clr[2]);}
function getPath(path){var k=0,i,ii,j,jj,out,a,b=[];for(i=0,ii=path.length;i<ii;i++){out="[";a=['"'+path[i][0]+'"'];for(j=1,jj=path[i].length;j<jj;j++){a[j]="val["+(k++)+"]";}
out+=a+"]";b[i]=out;}
return Function("val","return Snap.path.toString.call(["+b+"])");}
function path2array(path){var out=[];for(var i=0,ii=path.length;i<ii;i++){for(var j=1,jj=path[i].length;j<jj;j++){out.push(path[i][j]);}}
return out;}
Element.prototype.equal=function(name,b){return eve("snap.util.equal",this,name,b).firstDefined();};eve.on("snap.util.equal",function(name,b){var A,B,a=Str(this.attr(name)||""),el=this;if(a==+a&&b==+b){return{from:+a,to:+b,f:getNumber};}
if(names[name]=="colour"){A=Snap.color(a);B=Snap.color(b);return{from:[A.r,A.g,A.b,A.opacity],to:[B.r,B.g,B.b,B.opacity],f:getColour};}
if(name=="transform"||name=="gradientTransform"||name=="patternTransform"){if(b instanceof Snap.Matrix){b=b.toTransformString();}
if(!Snap._.rgTransform.test(b)){b=Snap._.svgTransform2string(b);}
return equaliseTransform(a,b,function(){return el.getBBox(1);});}
if(name=="d"||name=="path"){A=Snap.path.toCubic(a,b);return{from:path2array(A[0]),to:path2array(A[1]),f:getPath(A[0])};}
if(name=="points"){A=Str(a).split(Snap._.separator);B=Str(b).split(Snap._.separator);return{from:A,to:B,f:function(val){return val;}};}
aUnit=a.match(reUnit);var bUnit=Str(b).match(reUnit);if(aUnit&&aUnit==bUnit){return{from:parseFloat(a),to:parseFloat(b),f:getUnit(aUnit)};}else{return{from:this.asPX(name),to:this.asPX(name,b),f:getNumber};}});});Snap.plugin(function(Snap,Element,Paper,glob){var elproto=Element.prototype,has="hasOwnProperty",supportsTouch="createTouch"in glob.doc,events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},getScroll=function(xy,el){var name=xy=="y"?"scrollTop":"scrollLeft",doc=el&&el.node?el.node.ownerDocument:glob.doc;return doc[name in doc.documentElement?"documentElement":"body"][name];},preventDefault=function(){this.returnValue=false;},preventTouch=function(){return this.originalEvent.preventDefault();},stopPropagation=function(){this.cancelBubble=true;},stopTouch=function(){return this.originalEvent.stopPropagation();},addEvent=(function(){if(glob.doc.addEventListener){return function(obj,type,fn,element){var realName=supportsTouch&&touchMap[type]?touchMap[type]:type,f=function(e){var scrollY=getScroll("y",element),scrollX=getScroll("x",element);if(supportsTouch&&touchMap[has](type)){for(var i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++){if(e.targetTouches[i].target==obj||obj.contains(e.targetTouches[i].target)){var olde=e;e=e.targetTouches[i];e.originalEvent=olde;e.preventDefault=preventTouch;e.stopPropagation=stopTouch;break;}}}
var x=e.clientX+scrollX,y=e.clientY+scrollY;return fn.call(element,e,x,y);};if(type!==realName){obj.addEventListener(type,f,false);}
obj.addEventListener(realName,f,false);return function(){if(type!==realName){obj.removeEventListener(type,f,false);}
obj.removeEventListener(realName,f,false);return true;};};}else if(glob.doc.attachEvent){return function(obj,type,fn,element){var f=function(e){e=e||element.node.ownerDocument.window.event;var scrollY=getScroll("y",element),scrollX=getScroll("x",element),x=e.clientX+scrollX,y=e.clientY+scrollY;e.preventDefault=e.preventDefault||preventDefault;e.stopPropagation=e.stopPropagation||stopPropagation;return fn.call(element,e,x,y);};obj.attachEvent("on"+type,f);var detacher=function(){obj.detachEvent("on"+type,f);return true;};return detacher;};}})(),drag=[],dragMove=function(e){var x=e.clientX,y=e.clientY,scrollY=getScroll("y"),scrollX=getScroll("x"),dragi,j=drag.length;while(j--){dragi=drag[j];if(supportsTouch){var i=e.touches&&e.touches.length,touch;while(i--){touch=e.touches[i];if(touch.identifier==dragi.el._drag.id||dragi.el.node.contains(touch.target)){x=touch.clientX;y=touch.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break;}}}else{e.preventDefault();}
var node=dragi.el.node,o,next=node.nextSibling,parent=node.parentNode,display=node.style.display;x+=scrollX;y+=scrollY;eve("snap.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e);}},dragUp=function(e){Snap.unmousemove(dragMove).unmouseup(dragUp);var i=drag.length,dragi;while(i--){dragi=drag[i];dragi.el._drag={};eve("snap.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);}
drag=[];};for(var i=events.length;i--;){(function(eventName){Snap[eventName]=elproto[eventName]=function(fn,scope){if(Snap.is(fn,"function")){this.events=this.events||[];this.events.push({name:eventName,f:fn,unbind:addEvent(this.node||document,eventName,fn,scope||this)});}
return this;};Snap["un"+eventName]=elproto["un"+eventName]=function(fn){var events=this.events||[],l=events.length;while(l--)if(events[l].name==eventName&&(events[l].f==fn||!fn)){events[l].unbind();events.splice(l,1);!events.length&&delete this.events;return this;}
return this;};})(events[i]);}
elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in);};elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out);};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){if(!arguments.length){var origTransform;return this.drag(function(dx,dy){this.attr({transform:origTransform+(origTransform?"T":"t")+[dx,dy]});},function(){origTransform=this.transform().local;});}
function start(e,x,y){(e.originalEvent||e).preventDefault();this._drag.x=x;this._drag.y=y;this._drag.id=e.identifier;!drag.length&&Snap.mousemove(dragMove).mouseup(dragUp);drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope});onstart&&eve.on("snap.drag.start."+this.id,onstart);onmove&&eve.on("snap.drag.move."+this.id,onmove);onend&&eve.on("snap.drag.end."+this.id,onend);eve("snap.drag.start."+this.id,start_scope||move_scope||this,x,y,e);}
this._drag={};draggable.push({el:this,start:start});this.mousedown(start);return this;};elproto.undrag=function(){var i=draggable.length;while(i--)if(draggable[i].el==this){this.unmousedown(draggable[i].start);draggable.splice(i,1);eve.unbind("snap.drag.*."+this.id);}
!draggable.length&&Snap.unmousemove(dragMove).unmouseup(dragUp);return this;};});Snap.plugin(function(Snap,Element,Paper,glob){var elproto=Element.prototype,pproto=Paper.prototype,rgurl=/^\s*url\((.+)\)/,Str=String,$=Snap._.$;Snap.filter={};pproto.filter=function(filstr){var paper=this;if(paper.type!="svg"){paper=paper.paper;}
var f=Snap.parse(Str(filstr)),id=Snap._.id(),width=paper.node.offsetWidth,height=paper.node.offsetHeight,filter=$("filter");$(filter,{id:id,filterUnits:"userSpaceOnUse"});filter.appendChild(f.node);paper.defs.appendChild(filter);return new Element(filter);};eve.on("snap.util.getattr.filter",function(){eve.stop();var p=$(this.node,"filter");if(p){var match=Str(p).match(rgurl);return match&&Snap.select(match[1]);}});eve.on("snap.util.attr.filter",function(value){if(value instanceof Element&&value.type=="filter"){eve.stop();var id=value.node.id;if(!id){$(value.node,{id:value.id});id=value.id;}
$(this.node,{filter:Snap.url(id)});}
if(!value||value=="none"){eve.stop();this.node.removeAttribute("filter");}});Snap.filter.blur=function(x,y){if(x==null){x=2;}
var def=y==null?x:[x,y];return Snap.format('\<feGaussianBlur stdDeviation="{def}"/>',{def:def});};Snap.filter.blur.toString=function(){return this();};Snap.filter.shadow=function(dx,dy,blur,color,opacity){if(typeof blur=="string"){color=blur;opacity=color;blur=4;}
if(typeof color!="string"){opacity=color;color="#000";}
color=color||"#000";if(blur==null){blur=4;}
if(opacity==null){opacity=1;}
if(dx==null){dx=0;dy=2;}
if(dy==null){dy=dx;}
color=Snap.color(color);return Snap.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:color,dx:dx,dy:dy,blur:blur,opacity:opacity});};Snap.filter.shadow.toString=function(){return this();};Snap.filter.grayscale=function(amount){if(amount==null){amount=1;}
return Snap.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874*(1-amount),b:0.7152-0.7152*(1-amount),c:0.0722-0.0722*(1-amount),d:0.2126-0.2126*(1-amount),e:0.7152+0.2848*(1-amount),f:0.0722-0.0722*(1-amount),g:0.2126-0.2126*(1-amount),h:0.0722+0.9278*(1-amount)});};Snap.filter.grayscale.toString=function(){return this();};Snap.filter.sepia=function(amount){if(amount==null){amount=1;}
return Snap.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607*(1-amount),b:0.769-0.769*(1-amount),c:0.189-0.189*(1-amount),d:0.349-0.349*(1-amount),e:0.686+0.314*(1-amount),f:0.168-0.168*(1-amount),g:0.272-0.272*(1-amount),h:0.534-0.534*(1-amount),i:0.131+0.869*(1-amount)});};Snap.filter.sepia.toString=function(){return this();};Snap.filter.saturate=function(amount){if(amount==null){amount=1;}
return Snap.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-amount});};Snap.filter.saturate.toString=function(){return this();};Snap.filter.hueRotate=function(angle){angle=angle||0;return Snap.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:angle});};Snap.filter.hueRotate.toString=function(){return this();};Snap.filter.invert=function(amount){if(amount==null){amount=1;}
return Snap.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:amount,amount2:1-amount});};Snap.filter.invert.toString=function(){return this();};Snap.filter.brightness=function(amount){if(amount==null){amount=1;}
return Snap.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:amount});};Snap.filter.brightness.toString=function(){return this();};Snap.filter.contrast=function(amount){if(amount==null){amount=1;}
return Snap.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:amount,amount2:.5-amount/2});};Snap.filter.contrast.toString=function(){return this();};});return Snap;}));(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)");}
var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c);};addClass=function(elem,c){elem.classList.add(c);};removeClass=function(elem,c){elem.classList.remove(c);};}
else{hasClass=function(elem,c){return classReg(c).test(elem.className);};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c;}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ');};}
function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c);}
var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie);}else{window.classie=classie;}})(window);(function()
{var bodyEl=document.body,openbtn=document.getElementById('jOpenAppUserBox'),openbtn2=document.getElementById('jOpenAppUserBox2'),openbtnBurger=document.getElementById('jOpenAppBurger'),openMenuUser=document.getElementById('jOpenMenuUser'),closebtnBurger=document.getElementById('jCloseAppBurger'),closebtn=document.getElementById('jCloseAppUserBox'),closebtnMenuUser=document.getElementById('jCloseMenuUser'),isOpen=false,isOpenBurger=false,isOpenMenuUser=false,morphEl=document.getElementById('morph-shape'),layoutMember=document.getElementById('jLayoutMember'),menuMember=document.getElementById('jMenuUser'),addLayout=function()
{var overlay=document.createElement('div');overlay.setAttribute('class','app_overlay');overlay.setAttribute('id','jOverlay');bodyEl.appendChild(overlay);var content=document.getElementById('jOverlay');if(content!==null){content.addEventListener('click',contentClick);}},removeLayout=function()
{bodyEl.removeChild(document.getElementById('jOverlay'));var content=document.getElementById('jOverlay');if(content!==null){content.removeEventListener('click',contentClick);}},contentClick=function(event)
{if(event.target===menuMember||event.target===layoutMember){return;}
if(isOpen)
{isOpen=false;removeLayout();classie.remove(bodyEl,'jShowAppUserBox');}
if(isOpenBurger)
{isOpenBurger=false;removeLayout();classie.remove(bodyEl,'jShowMenuResp');}
if(isOpenMenuUser){isOpenMenuUser=false;removeLayout();classie.remove(bodyEl,'jShowMenuUser');}};if(layoutMember!==null)
{layoutMember.style.display='block';}
if(menuMember!==null)
{menuMember.style.display='block';}
if(((openbtn===null&&openbtn2===null)||closebtn===null||morphEl===null)&&openbtnBurger===null&&openMenuUser===null)
{return;}
if(morphEl!==null)
{var s=Snap(morphEl.querySelector('svg')),path=s.select('path'),initialPath=path.attr('d'),steps=morphEl.getAttribute('data-morph-open').split(';'),stepsTotal=steps.length;}
function init()
{initEvents();}
function initEvents()
{if(openbtn!==null)
{openbtn.addEventListener('click',function()
{addLayout();isOpen=true;classie.add(bodyEl,'jShowAppUserBox');if(morphEl!==null)
{var pos=0,nextStep=function(pos){if(pos>stepsTotal-1){return;}
path.animate({path:steps[pos]},pos===0?400:500,pos===0?mina.easein:mina.elastic,function(){nextStep(pos);});pos++;};nextStep(pos);}});}
if(openbtn2!==null)
{openbtn2.addEventListener('click',function()
{addLayout();isOpen=true;classie.add(bodyEl,'jShowAppUserBox');if(morphEl!==null)
{var pos=0,nextStep=function(pos){if(pos>stepsTotal-1){return;}
path.animate({path:steps[pos]},pos===0?400:500,pos===0?mina.easein:mina.elastic,function(){nextStep(pos);});pos++;};nextStep(pos);}});}
if(closebtn!==null)
{closebtn.addEventListener('click',function()
{removeLayout();classie.remove(bodyEl,'jShowAppUserBox');if(morphEl!==null)
{setTimeout(function(){path.attr('d',initialPath);},300);}});}
if(openbtnBurger!==null)
{openbtnBurger.addEventListener('click',function()
{addLayout();isOpenBurger=true;classie.add(bodyEl,'jShowMenuResp');});}
if(closebtnBurger!==null)
{closebtnBurger.addEventListener('click',function()
{removeLayout();classie.remove(bodyEl,'jShowMenuResp');});}
if(openMenuUser!==null)
{openMenuUser.addEventListener('click',function()
{addLayout();isOpenMenuUser=true;classie.addClass(bodyEl,'jShowMenuUser');});}
if(closebtnMenuUser!==null)
{closebtnMenuUser.addEventListener('click',function()
{removeLayout();classie.remove(bodyEl,'jShowMenuUser');});}}
init();})();(function($)
{function windowPopup(url,width,height)
{var left=(screen.width/2)-(width/2),top=(screen.height/2)-(height/2);window.open(url,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+width+",height="+height+",top="+top+",left="+left);}
var lastScrollTop=0,$socialBar=$('.jSocialBar');$socialBar.on('click','.jSocialShare',function(e){e.preventDefault();windowPopup($(this).attr("href"),500,300);});$(window).scroll(function()
{var scrollY=$(this).scrollTop();if(scrollY>lastScrollTop&&scrollY>100)
{$socialBar.css({opacity:"1",zIndex:"101"});}else if(scrollY<lastScrollTop-15||scrollY<100)
{$socialBar.css({opacity:"0",zIndex:"-1"});}
if(scrollY<lastScrollTop-15)
{$socialBar.css({opacity:"0",zIndex:"-1"});}
lastScrollTop=scrollY;});})(jQuery);(function($)
{$('.jToggleHeaderSearchBtn').bind('click',function()
{$('.app_inline_search').show();$('.jToggleHeaderSearchDisplay input').focus();});$('.jToggleHeaderSearchBtn + .jToggleHeaderSearchDisplay input').blur(function()
{$('.jToggleHeaderSearchBtn + .jToggleHeaderSearchDisplay').hide();});var displayWidth=$(window).width(),menuHeight=$('header[role=banner]').height(),headerTopHeight=0,$appHeaderTop=$('.app_header_top');if($appHeaderTop.height())
{headerTopHeight=$appHeaderTop.height();}
if(displayWidth>=1044)
{$(window).scroll(function()
{var st=$(this).scrollTop();if(st>headerTopHeight)
{$('header[role=banner]').css({position:'fixed',width:'100%'});$('body').css('padding-top',menuHeight+'px');if(headerTopHeight!==0)
{$('header[role=banner]').addClass("app_header--small").find('.app_header_nav .app_header__logo').fadeIn("1500");}}
else{if(st<=headerTopHeight){$('header[role=banner]').css('position','relative');$('body').css('padding-top','0');if(headerTopHeight!==0)
{$('header[role=banner]').removeClass("app_header--small").find('.app_header_nav .app_header__logo').fadeOut("1500");}}}});}
if(displayWidth<980)
{var lastScrollTop=0;$(window).scroll(function()
{var scrollY=$(this).scrollTop(),$body=$('body');if(scrollY>lastScrollTop&&scrollY>10)
{$body.removeClass('app_header--fixed');}
if(scrollY<lastScrollTop)
{$body.addClass('app_header--fixed');}
lastScrollTop=scrollY;});}
var $timelineBlock=$('.jVTimelineBlock');$timelineBlock.each(function()
{var $this=$(this),$window=$(window);if($this.offset().top>$window.scrollTop()+$window.height()*0.75)
{$this.find('.jVTimelineStep, .jVTimelineContent').addClass('is-hidden');}});$(window).on('scroll',function()
{$timelineBlock.each(function()
{var $this=$(this),$window=$(window);if($this.offset().top<=$window.scrollTop()+$window.height()*0.75&&$this.find('.jVTimelineStep').hasClass('is-hidden'))
{$this.find('.jVTimelineStep, .jVTimelineContent').removeClass('is-hidden').addClass('bounce-in');}});});})(jQuery);(function($)
{$.recipeSearch={season:'030',type:'029',libError:$e.msgs[$e.lang].libError,$recipeSearchDiv:$('#jReceipeSearch'),$inputSeason:$('#jReceipeSearch').find('input[name=season]'),$inputType:$('#jReceipeSearch').find('input[name=type]'),disabledClass:'app_btn--disabled',nbElementAutocomplete:30,init:function()
{$.recipeSearch.$recipeSearchDiv.on('click','.jSubmitReceipeSearch',$.recipeSearch.search);$.recipeSearch.loadDatas();},search:function()
{var listInput=$.recipeSearch.$recipeSearchDiv.find('input[name]'),filled=0,tags='';listInput.each(function(){if($(this).val()!==''&&$(this).attr('data-url')!==''){filled++;tags+=$(this).attr('data-url')+',';}});tags=tags.substring(0,tags.length-1);if(filled>0){window.location='/c/list?tags='+tags;}},reloadDatas:function(id,actualCat)
{var idList=[id],catList=[];if(actualCat!==$.recipeSearch.type)
{if($.recipeSearch.$inputType.attr('data-id')!=='')
{idList.push($.recipeSearch.$inputType.attr('data-id'));}
else{catList.push($.recipeSearch.type);}}
if(actualCat!==$.recipeSearch.season)
{if($.recipeSearch.$inputSeason.attr('data-id')!=='')
{idList.push($.recipeSearch.$inputSeason.attr('data-id'));}
else{catList.push($.recipeSearch.season);}}
if(catList.length===0)
{return;}
$.ajax({type:'POST',dataType:'json',url:'/g/xhr_getTagsByCatsAvaible/',data:({cats:catList,ids:idList}),success:function(response)
{if(response!==null)
{typeof response[$.recipeSearch.type]!=='undefined'&&$.recipeSearch.initAutocompleteAndFocus(response,$.recipeSearch.$inputType,$.recipeSearch.type,true);typeof response[$.recipeSearch.season]!=='undefined'&&$.recipeSearch.initAutocompleteAndFocus(response,$.recipeSearch.$inputSeason,$.recipeSearch.season,true);}}});},loadDatas:function()
{$.ajax({type:'POST',dataType:'json',url:'/g/xhr_getTagsByCats/',data:({cats:[$.recipeSearch.season,$.recipeSearch.type]}),success:function(response)
{if(response!==null)
{$.recipeSearch.initAutocompleteAndFocus(response,$.recipeSearch.$inputSeason,$.recipeSearch.season,false);$.recipeSearch.initAutocompleteAndFocus(response,$.recipeSearch.$inputType,$.recipeSearch.type,true);}}});},checkDisabled:function()
{var typeSelected=($.recipeSearch.$inputType.attr('data-url')!==''),seasonSelected=($.recipeSearch.$inputSeason.attr('data-url')!=='');if(typeSelected===true||seasonSelected===true)
{$('.jSubmitReceipeSearch').removeClass($.recipeSearch.disabledClass);}
else{$('.jSubmitReceipeSearch').addClass($.recipeSearch.disabledClass);}},initAutocompleteAndFocus:function(data,$div,value,reloadData)
{(typeof data[value]!=='undefined')&&$div.autocomplete({source:function(request,response){var results=$.ui.autocomplete.filter(data[value],request.term);response(results.slice(0,$.recipeSearch.nbElementAutocomplete));},minLength:0,change:function(event,ui)
{ui.item===null&&$div.attr({'data-url':'','data-id':''});$.recipeSearch.checkDisabled();},select:function(event,ui)
{$div.attr({'data-url':ui.item.url,'data-id':ui.item.id});reloadData===true&&$.recipeSearch.reloadDatas(ui.item.id,value);$.recipeSearch.checkDisabled();}}).focus(function()
{$(this).data("autocomplete").search($(this).val());});}};$(document).start($('#jReceipeSearch').length>0&&$.recipeSearch.init);})(jQuery);(function($)
{$.catwalkSearch={season:'027',designer:'026',city:'025',libError:$e.msgs[$e.lang].libError,$catwalkSearchDiv:$('#jCatwalkSearch'),$inputSeason:$('#jCatwalkSearch').find('input[name=season]'),$inputDesigner:$('#jCatwalkSearch').find('input[name=designer]'),$inputCity:$('#jCatwalkSearch').find('input[name=city]'),disabledClass:'app_btn--disabled',nbElementAutocomplete:30,init:function()
{$.catwalkSearch.$catwalkSearchDiv.on('click','.jSubmitCatwalkSearch',$.catwalkSearch.search);$.catwalkSearch.loadDatas();},search:function()
{var listInput=$.catwalkSearch.$catwalkSearchDiv.find('input[name]'),filled=0,tags='';listInput.each(function(){if($(this).val()!==''&&$(this).attr('data-url')!==''){filled++;tags+=$(this).attr('data-url')+',';}});tags=tags.substring(0,tags.length-1);if(filled===1&&$.catwalkSearch.$inputDesigner.attr('data-url')!==''){$.catwalkSearch.$catwalkSearchDiv.find('span.jErrorSelector').text($.catwalkSearch.libError).css('display','inline');}
else if(filled>0){window.location='/c/list?tags='+tags;}},reloadDatas:function(id,actualCat)
{var idList=[id],catList=[];if(actualCat!==$.catwalkSearch.city)
{if($.catwalkSearch.$inputCity.attr('data-id')!=='')
{idList.push($.catwalkSearch.$inputCity.attr('data-id'));}
else{catList.push($.catwalkSearch.city);}}
if(actualCat!==$.catwalkSearch.designer)
{if($.catwalkSearch.$inputDesigner.attr('data-id')!=='')
{idList.push($.catwalkSearch.$inputDesigner.attr('data-id'));}
else{catList.push($.catwalkSearch.designer);}}
if(catList.length===0)
{return;}
$.ajax({type:'POST',dataType:'json',url:'/g/xhr_getTagsByCatsAvaible/',data:({cats:catList,ids:idList}),success:function(response)
{if(response!==null)
{typeof response[$.catwalkSearch.designer]!=='undefined'&&$.catwalkSearch.initAutocompleteAndFocus(response,$.catwalkSearch.$inputDesigner,$.catwalkSearch.designer,true);typeof response[$.catwalkSearch.city]!=='undefined'&&$.catwalkSearch.initAutocompleteAndFocus(response,$.catwalkSearch.$inputCity,$.catwalkSearch.city,true);}}});},loadDatas:function()
{$.ajax({type:'POST',dataType:'json',url:'/g/xhr_getTagsByCats/',data:({cats:[$.catwalkSearch.season,$.catwalkSearch.designer,$.catwalkSearch.city]}),success:function(response)
{if(response!==null)
{$.catwalkSearch.initAutocompleteAndFocus(response,$.catwalkSearch.$inputSeason,$.catwalkSearch.season,false);$.catwalkSearch.initAutocompleteAndFocus(response,$.catwalkSearch.$inputDesigner,$.catwalkSearch.designer,true);$.catwalkSearch.initAutocompleteAndFocus(response,$.catwalkSearch.$inputCity,$.catwalkSearch.city,true);}}});},checkDisabled:function()
{var designerSelected=($.catwalkSearch.$inputDesigner.attr('data-url')!==''),seasonSelected=($.catwalkSearch.$inputSeason.attr('data-url')!==''),citySelected=($.catwalkSearch.$inputCity.attr('data-url')!=='');if((designerSelected===true&&(seasonSelected===true||citySelected===true))||(seasonSelected===true||citySelected===true))
{$('.jSubmitCatwalkSearch').removeClass($.catwalkSearch.disabledClass);}
else{$('.jSubmitCatwalkSearch').addClass($.catwalkSearch.disabledClass);}},initAutocompleteAndFocus:function(data,$div,value,reloadData)
{$div.autocomplete({source:function(request,response)
{var results=$.ui.autocomplete.filter(data[value],request.term);response(results.slice(0,$.catwalkSearch.nbElementAutocomplete));},minLength:0,change:function(event,ui)
{ui.item===null&&$div.attr({'data-url':'','data-id':''});$.catwalkSearch.checkDisabled();},select:function(event,ui)
{$div.attr({'data-url':ui.item.url,'data-id':ui.item.id});reloadData===true&&$.catwalkSearch.reloadDatas(ui.item.id,value);$.catwalkSearch.checkDisabled();}}).focus(function()
{$(this).data("autocomplete").search($(this).val());});}};$(document).start($('#jCatwalkSearch').length>0&&$.catwalkSearch.init);})(jQuery);
(function($)
{"use strict";$(document).start(function()
{$('.jFreeContent').freeContent();});}(jQuery));(function($)
{'use strict';$.fn.freeContent=function(mainParameter,options)
{options=$.extend(true,{},$.fn.freeContent.defaultOptions,options);return this.each(function()
{var $this=$(this),id=$this.attr('data-id'),urlEdit=$this.find(options.selectorEdit).attr('data-url'),urlPaste=$this.find(options.selectorEditPaste).attr('data-url'),urlNew=$this.find(options.selectorNewContent).attr('data-url');if(id!=='undefined'&&$this.data('initialized')===undefined)
{$this.on('click',options.selectorEdit,function()
{$.freeContent.editAction($this,urlEdit,options);}).on('click',options.selectorEditPaste,function()
{$.freeContent.pasteAction($this,urlPaste,options);}).on('click',options.selectorNewContent,function()
{$.freeContent.newAction($this,urlNew,options);}).data('initialized',true);}});};$.freeContent={ccmbgTagConvertorInitialized:false,pasteAction:function($this,url,options)
{$.ajax({type:'POST',dataType:'json',url:url,success:function(data)
{if(typeof data.html!=='undefined')
{$('#pasteContentDialog').remove();$('body').append($('<div>').hide().attr({id:'pasteContentDialog'}).addClass('bu_freect_paste_dialog').html(data.html));$('#pasteContentDialog').dialog(options.dialogConf).on('click',options.selectorChoosePaste,function()
{var $self=$(this);$.ajax({type:'POST',dataType:'json',url:$self.attr('data-url'),data:{idOld:$self.attr('data-id')},success:function(json)
{if(typeof json.success!=='undefined')
{if(typeof json.html!=='undefined')
{$this.html(json.html);}
$('#pasteContentDialog').remove();}}});});}}});},newAction:function($this,url,options)
{$.ajax({type:'POST',dataType:'json',url:url,success:function(data)
{if(typeof data.html!=='undefined')
{$this.find(options.selectorDisplayNewId).html(data.html).show();}}});},editAction:function($this,url,options)
{$.ajax({type:'POST',dataType:'json',url:url,success:function(data)
{if(typeof data.html!=='undefined')
{$this.data('previousVal',$this.html());$this.html(data.html);if($.jet.started===true)
{if($.freeContent.ccmbgTagConvertorInitialized===false&&typeof _$('$data.services.ckeditor.options')._.ccmbgTagConvertor!=='undefined'){options.CKEditorConf.extraPlugins+=',ccmbgTagConvertor';options.CKEditorConf.toolbar.push(['ccmbgTagConvertor']);$.freeContent.ccmbgTagConvertorInitialized=true;}
$(document).trigger('refresh',{services:{ckeditor:{start:true,options:$.extend(true,{},$data.services.ckeditor.options,options.CKEditorConf)}}});}
var $form=$this.find(options.selectorForm),submitFunction=function(e)
{e.preventDefault();e.stopPropagation();$form.ajaxSubmit({type:'POST',dataType:'json',success:function(json)
{if(typeof json.success!=='undefined')
{$this.html(json.html);if(typeof json.disabled!=='undefined')
{if(json.disabled===true)
{$this.addClass(options.classDisabled);}
else{$this.removeClass(options.classDisabled);}}}}});};$form.on('submit',function(e)
{submitFunction(e);return false;}).on('click',options.selectorSaveForm,function(e)
{submitFunction(e);}).on('click',options.selectorCancelForm,function()
{$this.html($this.data('previousVal'));});}}});}};$.fn.freeContent.defaultOptions={selectorSaveForm:'.jSaveFreeContentForm',selectorCancelForm:'.jCancelFreeContentForm',selectorEdit:'.jEditFreeContent',selectorEditPaste:'.jEditPasteFreeContent',selectorChoosePaste:'.jChoosePasteFreeContent',selectorForm:'.jFreeContentForm',selectorNewContent:'.jEditNewFreeContent',classDisabled:'ccmcss_form_disabled',selectorDisplayNewId:'.jDisplayNewId',dialogConf:{width:500,height:500},CKEditorConf:{extraPlugins:'image3',selector:'.jFreeContentCKeditor',image3:{regexp:/\/[a-z_]+\/([^\/]+)\/([^\/]+)\/([^\/]+)\/?$/i,showFormat:true,showCaption:true,showAlign:true,showAlt:true,showLegend:true,showCredit:true,showcreditLink:true,noFormatFilter:true,sizes:[{'urlParameter':'100','label':'100'},{'urlParameter':'150','label':'150'},{'urlParameter':'250','label':'250'},{'urlParameter':'300','label':'300'},{'urlParameter':'450','label':'450','default':true},{'urlParameter':'624','label':'624'},{'urlParameter':'800','label':'800'}]},toolbar:[{name:'basicstyles',items:['Bold','Italic','Underline']},{name:'links',items:['Link','Unlink']},{name:'clipboard',items:['PasteFromWord']},{name:'image',items:['Image']}]}};}(jQuery));
(function($){var DEFAULT_SETTINGS={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:true,tokenLimit:null,tokenDelimiter:",",preventDuplicates:false,tokenValue:"id",prePopulate:null,processPrePopulate:false,idPrefix:"token-input-",resultsFormatter:function(item){return"<li>"+item[this.propertyToSearch]+"</li>"},tokenFormatter:function(item){return"<li><p>"+item[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null};var DEFAULT_CLASSES={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"};var POSITION={BEFORE:0,AFTER:1,END:2};var KEY={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188};var methods={init:function(url_or_data_or_function,options){var settings=$.extend({},DEFAULT_SETTINGS,options||{});return this.each(function(){$(this).data("tokenInputObject",new $.TokenList(this,url_or_data_or_function,settings));});},clear:function(){this.data("tokenInputObject").clear();return this;},add:function(item){this.data("tokenInputObject").add(item);return this;},remove:function(item){this.data("tokenInputObject").remove(item);return this;},get:function(){return this.data("tokenInputObject").getTokens();}}
$.fn.tokenInput=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{return methods.init.apply(this,arguments);}};$.TokenList=function(input,url_or_data,settings){if($.type(url_or_data)==="string"||$.type(url_or_data)==="function"){settings.url=url_or_data;var url=computeURL();if(settings.crossDomain===undefined){if(url.indexOf("://")===-1){settings.crossDomain=false;}else{settings.crossDomain=(location.href.split(/\/+/g)[1]!==url.split(/\/+/g)[1]);}}}else if(typeof(url_or_data)==="object"){settings.local_data=url_or_data;}
if(settings.classes){settings.classes=$.extend({},DEFAULT_CLASSES,settings.classes);}else if(settings.theme){settings.classes={};$.each(DEFAULT_CLASSES,function(key,value){settings.classes[key]=value+"-"+settings.theme;});}else{settings.classes=DEFAULT_CLASSES;}
var saved_tokens=[];var token_count=0;var cache=new $.TokenList.Cache();var timeout;var input_val;var input_box=$("<input type=\"text\"  autocomplete=\"off\">").css({outline:"none"}).attr("id",settings.idPrefix+input.id).focus(function(){if(settings.tokenLimit===null||settings.tokenLimit!==token_count){show_dropdown_hint();}}).blur(function(){hide_dropdown();$(this).val("");}).bind("keyup keydown blur update",resize_input).keydown(function(event){var previous_token;var next_token;switch(event.keyCode){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:if(!$(this).val()){previous_token=input_token.prev();next_token=input_token.next();if((previous_token.length&&previous_token.get(0)===selected_token)||(next_token.length&&next_token.get(0)===selected_token)){if(event.keyCode===KEY.LEFT||event.keyCode===KEY.UP){deselect_token($(selected_token),POSITION.BEFORE);}else{deselect_token($(selected_token),POSITION.AFTER);}}else if((event.keyCode===KEY.LEFT||event.keyCode===KEY.UP)&&previous_token.length){select_token($(previous_token.get(0)));}else if((event.keyCode===KEY.RIGHT||event.keyCode===KEY.DOWN)&&next_token.length){select_token($(next_token.get(0)));}}else{var dropdown_item=null;if(event.keyCode===KEY.DOWN||event.keyCode===KEY.RIGHT){dropdown_item=$(selected_dropdown_item).next();}else{dropdown_item=$(selected_dropdown_item).prev();}
if(dropdown_item.length){select_dropdown_item(dropdown_item);}
return false;}
break;case KEY.BACKSPACE:previous_token=input_token.prev();if(!$(this).val().length){if(selected_token){delete_token($(selected_token));hidden_input.change();}else if(previous_token.length){select_token($(previous_token.get(0)));}
return false;}else if($(this).val().length===1){hide_dropdown();}else{setTimeout(function(){do_search();},5);}
break;case KEY.TAB:case KEY.ENTER:case KEY.NUMPAD_ENTER:case KEY.COMMA:if(selected_dropdown_item){add_token($(selected_dropdown_item).data("tokeninput"));hidden_input.change();return false;}
break;case KEY.ESCAPE:hide_dropdown();return true;default:if(String.fromCharCode(event.which)){setTimeout(function(){do_search();},5);}
break;}});var hidden_input=$(input).hide().val("").focus(function(){input_box.focus();}).blur(function(){input_box.blur();});var selected_token=null;var selected_token_index=0;var selected_dropdown_item=null;var token_list=$("<ul />").addClass(settings.classes.tokenList).click(function(event){var li=$(event.target).closest("li");if(li&&li.get(0)&&$.data(li.get(0),"tokeninput")){toggle_select_token(li);}else{if(selected_token){deselect_token($(selected_token),POSITION.END);}
input_box.focus();}}).mouseover(function(event){var li=$(event.target).closest("li");if(li&&selected_token!==this){li.addClass(settings.classes.highlightedToken);}}).mouseout(function(event){var li=$(event.target).closest("li");if(li&&selected_token!==this){li.removeClass(settings.classes.highlightedToken);}}).insertBefore(hidden_input);var input_token=$("<li />").addClass(settings.classes.inputToken).appendTo(token_list).append(input_box);var dropdown=$("<div>").addClass(settings.classes.dropdown).appendTo("body").hide();var input_resizer=$("<tester/>").insertAfter(input_box).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:input_box.css("fontSize"),fontFamily:input_box.css("fontFamily"),fontWeight:input_box.css("fontWeight"),letterSpacing:input_box.css("letterSpacing"),whiteSpace:"nowrap"});hidden_input.val("");var li_data=settings.prePopulate||hidden_input.data("pre");if(settings.processPrePopulate&&$.isFunction(settings.onResult)){li_data=settings.onResult.call(hidden_input,li_data);}
if(li_data&&li_data.length){$.each(li_data,function(index,value){insert_token(value);checkTokenLimit();});}
if($.isFunction(settings.onReady)){settings.onReady.call();}
this.clear=function(){token_list.children("li").each(function(){if($(this).children("input").length===0){delete_token($(this));}});}
this.add=function(item){add_token(item);}
this.remove=function(item){token_list.children("li").each(function(){if($(this).children("input").length===0){var currToken=$(this).data("tokeninput");var match=true;for(var prop in item){if(item[prop]!==currToken[prop]){match=false;break;}}
if(match){delete_token($(this));}}});}
this.getTokens=function(){return saved_tokens;}
function checkTokenLimit(){if(settings.tokenLimit!==null&&token_count>=settings.tokenLimit){input_box.hide();hide_dropdown();return;}}
function resize_input(){if(input_val===(input_val=input_box.val())){return;}
var escaped=input_val.replace(/&/g,'&amp;').replace(/\s/g,' ').replace(/</g,'&lt;').replace(/>/g,'&gt;');input_resizer.html(escaped);input_box.width(input_resizer.width()+30);}
function is_printable_character(keycode){return((keycode>=48&&keycode<=90)||(keycode>=96&&keycode<=111)||(keycode>=186&&keycode<=192)||(keycode>=219&&keycode<=222));}
function insert_token(item){var this_token=settings.tokenFormatter(item);this_token=$(this_token).addClass(settings.classes.token).insertBefore(input_token);$("<span>"+settings.deleteText+"</span>").addClass(settings.classes.tokenDelete).appendTo(this_token).click(function(){delete_token($(this).parent());hidden_input.change();return false;});var token_data={"id":item.id};token_data[settings.propertyToSearch]=item[settings.propertyToSearch];$.data(this_token.get(0),"tokeninput",item);saved_tokens=saved_tokens.slice(0,selected_token_index).concat([token_data]).concat(saved_tokens.slice(selected_token_index));selected_token_index++;update_hidden_input(saved_tokens,hidden_input);token_count+=1;if(settings.tokenLimit!==null&&token_count>=settings.tokenLimit){input_box.hide();hide_dropdown();}
return this_token;}
function add_token(item){var callback=settings.onAdd;if(token_count>0&&settings.preventDuplicates){var found_existing_token=null;token_list.children().each(function(){var existing_token=$(this);var existing_data=$.data(existing_token.get(0),"tokeninput");if(existing_data&&existing_data.id===item.id){found_existing_token=existing_token;return false;}});if(found_existing_token){select_token(found_existing_token);input_token.insertAfter(found_existing_token);input_box.focus();return;}}
if(settings.tokenLimit==null||token_count<settings.tokenLimit){insert_token(item);checkTokenLimit();}
input_box.val("");hide_dropdown();if($.isFunction(callback)){callback.call(hidden_input,item);}}
function select_token(token){token.addClass(settings.classes.selectedToken);selected_token=token.get(0);input_box.val("");hide_dropdown();}
function deselect_token(token,position){token.removeClass(settings.classes.selectedToken);selected_token=null;if(position===POSITION.BEFORE){input_token.insertBefore(token);selected_token_index--;}else if(position===POSITION.AFTER){input_token.insertAfter(token);selected_token_index++;}else{input_token.appendTo(token_list);selected_token_index=token_count;}
input_box.focus();}
function toggle_select_token(token){var previous_selected_token=selected_token;if(selected_token){deselect_token($(selected_token),POSITION.END);}
if(previous_selected_token===token.get(0)){deselect_token(token,POSITION.END);}else{select_token(token);}}
function delete_token(token){var token_data=$.data(token.get(0),"tokeninput");var callback=settings.onDelete;var index=token.prevAll().length;if(index>selected_token_index)index--;token.remove();selected_token=null;input_box.focus();saved_tokens=saved_tokens.slice(0,index).concat(saved_tokens.slice(index+1));if(index<selected_token_index)selected_token_index--;update_hidden_input(saved_tokens,hidden_input);token_count-=1;if(settings.tokenLimit!==null){input_box.show().val("").focus();}
if($.isFunction(callback)){callback.call(hidden_input,token_data);}}
function update_hidden_input(saved_tokens,hidden_input){var token_values=$.map(saved_tokens,function(el){return el[settings.tokenValue];});hidden_input.val(token_values.join(settings.tokenDelimiter));}
function hide_dropdown(){dropdown.hide().empty();selected_dropdown_item=null;}
function show_dropdown(){dropdown.css({position:"absolute",top:$(token_list).offset().top+$(token_list).outerHeight(),left:$(token_list).offset().left,zindex:999}).show();}
function show_dropdown_searching(){if(settings.searchingText){dropdown.html("<p>"+settings.searchingText+"</p>");show_dropdown();}}
function show_dropdown_hint(){if(settings.hintText){dropdown.html("<p>"+settings.hintText+"</p>");show_dropdown();}}
function highlight_term(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>");}
function find_value_and_highlight_term(template,value,term){return template.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+value+")(?![^<>]*>)(?![^&;]+;)","g"),highlight_term(value,term));}
function populate_dropdown(query,results){if(results&&results.length){dropdown.empty();var dropdown_ul=$("<ul>").appendTo(dropdown).mouseover(function(event){select_dropdown_item($(event.target).closest("li"));}).mousedown(function(event){add_token($(event.target).closest("li").data("tokeninput"));hidden_input.change();return false;}).hide();$.each(results,function(index,value){var this_li=settings.resultsFormatter(value);this_li=find_value_and_highlight_term(this_li,value[settings.propertyToSearch],query);this_li=$(this_li).appendTo(dropdown_ul);if(index%2){this_li.addClass(settings.classes.dropdownItem);}else{this_li.addClass(settings.classes.dropdownItem2);}
if(index===0){select_dropdown_item(this_li);}
$.data(this_li.get(0),"tokeninput",value);});show_dropdown();if(settings.animateDropdown){dropdown_ul.slideDown("fast");}else{dropdown_ul.show();}}else{if(settings.noResultsText){dropdown.html("<p>"+settings.noResultsText+"</p>");show_dropdown();}}}
function select_dropdown_item(item){if(item){if(selected_dropdown_item){deselect_dropdown_item($(selected_dropdown_item));}
item.addClass(settings.classes.selectedDropdownItem);selected_dropdown_item=item.get(0);}}
function deselect_dropdown_item(item){item.removeClass(settings.classes.selectedDropdownItem);selected_dropdown_item=null;}
function do_search(){var query=input_box.val().toLowerCase();if(query&&query.length){if(selected_token){deselect_token($(selected_token),POSITION.AFTER);}
if(query.length>=settings.minChars){show_dropdown_searching();clearTimeout(timeout);timeout=setTimeout(function(){run_search(query);},settings.searchDelay);}else{hide_dropdown();}}}
function run_search(query){var cache_key=query+computeURL();var cached_results=cache.get(cache_key);if(cached_results){populate_dropdown(query,cached_results);}else{if(settings.url){var url=computeURL();var ajax_params={};ajax_params.data={};if(url.indexOf("?")>-1){var parts=url.split("?");ajax_params.url=parts[0];var param_array=parts[1].split("&");$.each(param_array,function(index,value){var kv=value.split("=");ajax_params.data[kv[0]]=kv[1];});}else{ajax_params.url=url;}
ajax_params.data[settings.queryParam]=query;ajax_params.type=settings.method;ajax_params.dataType=settings.contentType;if(settings.crossDomain){ajax_params.dataType="jsonp";}
ajax_params.success=function(results){if($.isFunction(settings.onResult)){results=settings.onResult.call(hidden_input,results);}
cache.add(cache_key,settings.jsonContainer?results[settings.jsonContainer]:results);if(input_box.val().toLowerCase()===query){populate_dropdown(query,settings.jsonContainer?results[settings.jsonContainer]:results);}};$.ajax(ajax_params);}else if(settings.local_data){var results=$.grep(settings.local_data,function(row){return row[settings.propertyToSearch].toLowerCase().indexOf(query.toLowerCase())>-1;});if($.isFunction(settings.onResult)){results=settings.onResult.call(hidden_input,results);}
cache.add(cache_key,results);populate_dropdown(query,results);}}}
function computeURL(){var url=settings.url;if(typeof settings.url=='function'){url=settings.url.call();}
return url;}};$.TokenList.Cache=function(options){var settings=$.extend({max_size:500},options);var data={};var size=0;var flush=function(){data={};size=0;};this.add=function(query,results){if(size>settings.max_size){flush();}
if(!data[query]){size+=1;}
data[query]=results;};this.get=function(query){return data[query];};};}(jQuery));(function($)
{'use strict';$.fn.userTokenizer=function(url,options)
{return this.each(function()
{var $this=$(this),id=$this.attr('data-id');$this.tokenInput(url,options);if($this.attr('data-default-values')){var obj=$.parseJSON($this.attr('data-default-values'));$.each(obj,function(key,value){$this.tokenInput('add',value);});}});};$(document).start(function(){$('.jUserTokenizer').userTokenizer('/e/findUser',{queryParam:'name',minChars:3,theme:'facebook'});$('.jAddParticipantType').val('js');})}(jQuery));(function($)
{'use strict';$.fn.flashMessenger=function()
{var options=$.fn.flashMessenger.defaultOptions;return this.each(function()
{var $this=$(this),functionFadeOut=function()
{$this.addClass(options.transitionClass)};if($this.find('li').length>0)
{$this.on('click',functionFadeOut);setTimeout(functionFadeOut,options.timeBeforeFadeout);}});};$.fn.flashMessenger.defaultOptions={transitionClass:'app_flashmessenger--hidden',timeBeforeFadeout:5000};$(document).start(function()
{$('.jFlashMessenger').flashMessenger();})}(jQuery));