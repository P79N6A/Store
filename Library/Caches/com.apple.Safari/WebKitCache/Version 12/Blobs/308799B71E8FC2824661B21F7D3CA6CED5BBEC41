if (self.CavalryLogger) { CavalryLogger.start_js(["o5BmU"]); }

__d("StoriesSuspenseCardOptionMenuTrigger.react",["ix","fbt","requireDeferred","CometDeferredPopoverTrigger.react","CometIcon_DEPRECATED.react","React","StoriesEnums","StoriesPauseReasons","StoriesRelay","StoriesTestID","StoriesViewerMenuButton.react","asset","StoriesSuspenseCardOptionMenuTrigger_card.graphql","StoriesSuspenseCardOptionMenuTrigger_owner.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;b("StoriesEnums").STORIES_OPTION_TYPES;b("StoriesRelay").graphql;var k=b("StoriesRelay").useFragment,l=b("requireDeferred")("StoriesSuspenseCardOptionMenu.react");function a(a){var c=k(i||(i=function(){return b("StoriesSuspenseCardOptionMenuTrigger_card.graphql")}),a.card),d=k(j||(j=function(){return b("StoriesSuspenseCardOptionMenuTrigger_owner.graphql")}),a.owner),e=function(c){a.setPause(!0,b("StoriesPauseReasons").CONFIRMATION_DIALOG)},f=function(){a.setPause(!1,b("StoriesPauseReasons").CONFIRMATION_DIALOG)},m=function(c){a.setPause(c,b("StoriesPauseReasons").MENU)},n=c==null?void 0:c.id;return b("React").createElement("div",{key:n},b("React").createElement(b("CometDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:m,popoverProps:{bucketID:a.bucketID,card:c,onClose:function(){},onHideOptionConfirmationDialog:f,onShowOptionConfirmationDialog:e,owner:d,setPause:a.setPause},popoverResource:l,position:"below"},function(a,c){return b("React").createElement(b("StoriesViewerMenuButton.react"),{icon:b("React").createElement(b("CometIcon_DEPRECATED.react"),{asset:g("504028"),color:"fds-white",name:"option-circle",size:24,variant:"filled"}),label:h._("Menu Button"),onClick:c,ref:a,testid:b("StoriesTestID").VIEWER_OPTION_MENU_BUTTON})}))}e.exports=a}),null);
__d("StoriesSuspenseEndCardAvatarTray.react",["React","StoriesEnums","TetraOverlappingFacepile.react","stylex"],(function(a,b,c,d,e,f){"use strict";c=b("StoriesEnums").END_CARD;var g=c.AVATAR_WIDTH,h=c.MAX_AVATAR_NUMBER,i=c.PADDING_WIDTH;function a(a){a=a.avatars;var c=Math.min(a.length,h)*g+i,d=a.length>h?a.length+1:a.length;return b("React").createElement("div",{className:"jbae33se o7xrwllt f9o22wc5 oygrvhab ad2k81qe fbzcu06b a8c37x1j bp9cbjyn",style:{width:c}},b("React").createElement(b("TetraOverlappingFacepile.react"),{count:d,items:a,size:48}))}e.exports=a}),null);
__d("StoriesSuspenseEndCardContext",["React"],(function(a,b,c,d,e,f){"use strict";a={isEndCardPassed:!1,setEndCardPassed:function(){},shouldShowEndCard:!1};e.exports=b("React").createContext(a)}),null);
__d("StoriesSuspenseEndCardTimer.react",["fbt","React","StoriesEnums","StoriesSuspenseEndCardContext","stylex","useInterval"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("StoriesEnums").END_CARD;var h=a.COUNT_DOWN_SECONDS,i=a.MS_PER_INTERVAL,j=a.MS_PER_SECOND,k=b("React").useState,l=b("React").useContext,m=b("React").useRef;c=function(a){a=k(h*j);var c=a[0],d=a[1],e=m(Date.now());a=l(b("StoriesSuspenseEndCardContext"));var f=a.setEndCardPassed;b("useInterval")(function(){var a=Date.now(),b=a-e.current;b>=j&&(d(Math.max(0,c-b)),c<=0&&f(!0),e.current=a)},i);return b("React").createElement("div",{className:"k4urcfbm oqcyycmt ofv0k9yr sxpk6l6v a3bd9o3v taijpn5t n3ffmt46 jq4qci2q"},g._("{=See next story in [seconds] s...}",[g._param("=See next story in [seconds] s...",b("React").createElement("strong",null,g._("See next story in {seconds} s...",[g._param("seconds",Math.round(c/j))])))]))};e.exports=c}),null);
__d("StoriesSuspenseEndCardHeader.react",["fbt","React","StoriesEnums","StoriesGating","StoriesSuspenseEndCardTimer.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("StoriesEnums").PRONOUN;function a(a){__p&&__p();var c=a.bucketOwnerName;a=a.friends;var d=b("StoriesGating").shouldAutoplayAfterEndCard(),e=null,f=a.length;if(f===0)e=g._("Stories that you can see again");else if(f===1){var i="their";a[0].pronoun===h.FEMALE?i="her":a[0].pronoun===h.MALE&&(i="his");e=g._("{friend} added to {pronoun} story.",[g._param("friend",a[0].name),g._param("pronoun",i)])}else f===2?e=g._("{firstFriend} and {secondFriend} recently added to their stories.",[g._param("firstFriend",a[0].name),g._param("secondFriend",a[1].name)]):e=g._("{friend} and other friends recently added to their stories.",[g._param("friend",a[0].name)]);return b("React").createElement("div",{className:"bjjun2dj clqubjjj d2edcug0 rq0escxv"},b("React").createElement("div",{className:"k4urcfbm oqcyycmt sj5x9vvc f530mmz5 n3ffmt46 o0t2es00"},g._("You've reached the end of {friend} 's story",[g._param("friend",c)])),b("React").createElement("div",{className:"k4urcfbm oqcyycmt ofv0k9yr a3bd9o3v taijpn5t jq4qci2q m9osqain"},e),d&&b("React").createElement(b("StoriesSuspenseEndCardTimer.react"),null))}e.exports=a}),null);
__d("StoriesSuspenseEndCard.react",["fbt","React","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesRelay","StoriesSuspenseEndCardAvatarTray.react","StoriesSuspenseEndCardHeader.react","StoriesTrayTile.react","StoriesTrayUtils","TetraButton.react","TetraRow.react","TetraRowItem.react","WebPixelRatio","stylex","useStoriesBucketsIndexer","uuid","StoriesSuspenseEndCardQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("StoriesEnums").END_CARD;b("StoriesRelay").graphql;var j=b("StoriesRelay").useQuery;function k(a){a=a.reduce(function(a,b){b=(b=b.story_bucket_owner)==null?void 0:(b=b.avatarImage)==null?void 0:b.uri;b!=null&&a.push({source:{uri:b}});return a},[]);return b("React").createElement(b("StoriesSuspenseEndCardAvatarTray.react"),{avatars:a})}function l(a,c){return a.map(function(a,d){return b("React").createElement(b("TetraRowItem.react"),null,b("React").createElement("div",{className:"f3pi7oek"},b("React").createElement(b("StoriesTrayTile.react"),{bucket:a,index:d,key:a.id,source:b("StoriesLoggingConstants").ACTION_SOURCE.NOTIFICATION,traySessionID:c})))})}function a(a){__p&&__p();var c,d=b("StoriesGating").shouldAutoplayAfterEndCard(),e=a.bucketID;a=j(h||(h=function(){return b("StoriesSuspenseEndCardQuery.graphql")}),{hideSelfbucket:!0,pinnedIDs:[(a=e)!=null?a:""],scale:b("WebPixelRatio").get()},{fetchPolicy:"store-or-network"});c=(c=(c=a.me)==null?void 0:(c=c.unified_stories_buckets)==null?void 0:c.nodes)!=null?c:[];var f=b("uuid")(),m=null,n=[],o=[],p=[],q=[],r=[],s,t=(a=b("useStoriesBucketsIndexer")(a.me))!=null?a:[];c.forEach(function(a,c){__p&&__p();if(a.id===e){var d;s=(d=a.story_bucket_owner)==null?void 0:d.name}else{if(((d=t[c])==null?void 0:d.shouldShow)===!0&&((d=t[c])==null?void 0:d.type)!=null){if(r.length<=i.MAX_AVATAR_NUMBER){r.push(a);o.push({name:(c=a.story_bucket_owner)==null?void 0:c.name,pronoun:(d=a.story_bucket_owner)==null?void 0:d.pronoun_gender})}if(p.length<i.MAX_TILE_NUMBER&&(a==null?void 0:a.is_bucket_seen_by_viewer)===!1){p.push(a);n.push({name:(c=a.story_bucket_owner)==null?void 0:c.name,pronoun:(d=a.story_bucket_owner)==null?void 0:d.pronoun_gender});if(m==null&&a.id!=null&&(a==null?void 0:(c=a.first_story_to_show)==null?void 0:c.id)!=null){m=b("StoriesTrayUtils").getBucketURL(a.id,a==null?void 0:(d=a.first_story_to_show)==null?void 0:d.id,f)}}else p.length===0&&q.length<=i.MAX_AVATAR_NUMBER&&(a==null?void 0:a.is_bucket_seen_by_viewer)===!0&&q.push(a)}}});a=p.length===i.MAX_TILE_NUMBER;c=i.MAX_TILE_NUMBER/2;var u;d?u=k(r):p.length===0?u=k(q):p.length<c?u=k(p):u=b("React").createElement("div",{className:"ofv0k9yr taijpn5t cbu4d94t j83agx80"},b("React").createElement(b("TetraRow.react"),{align:"center",paddingTop:0,spacing:i.PADDING_HORIZONTAL,spacingVertical:i.PADDING_VERTICAL},l(p.slice(0,c),f)),a&&b("React").createElement(b("TetraRow.react"),{align:"center",paddingTop:i.PADDING_VERTICAL,spacing:i.PADDING_HORIZONTAL,spacingVertical:i.PADDING_VERTICAL},l(p.slice(c),f)));a=p.length>0?b("React").createElement(b("TetraButton.react"),{label:g._("See More Stories"),linkProps:{url:m}}):b("React").createElement(b("TetraButton.react"),{label:g._("Watch Again"),linkProps:{url:"/stories/"}});return b("React").createElement("div",{className:"k4urcfbm taijpn5t datstx6m cbu4d94t j83agx80 ptt86dso hybvsw6c bp9cbjyn"},b("React").createElement(b("StoriesSuspenseEndCardHeader.react"),{bucketOwnerName:s,friends:d?o:n}),u,!d&&b("React").createElement("div",{className:"nksjn1e3 a3bd9o3v taijpn5t tv7at329 jq4qci2q j83agx80 enl131ya"},a))}e.exports=a}),null);
__d("StoriesSuspenseBucketTransitioningContext",["React"],(function(a,b,c,d,e,f){"use strict";a={isBucketTransitionInProgress:!1,setIsBucketTransitionInProgress:function(){}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseBucketChangeHandler",["React","StoriesLoggerContext","StoriesRelay","StoriesSuspenseBucketTransitioningContext","useStoriesSuspenseBucketChangeHandler_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useCallback,i=b("React").useContext,j=b("React").useEffect,k=b("React").useRef;b("StoriesRelay").graphql;var l=b("StoriesRelay").useFragment;function a(a,c,d){__p&&__p();var e=l(g||(g=function(){return b("useStoriesSuspenseBucketChangeHandler_bucket.graphql")}),a);a=e==null?void 0:e.id;var f=k(null),m=i(b("StoriesLoggerContext")),n=m.logger;m=i(b("StoriesSuspenseBucketTransitioningContext"));m=m.setIsBucketTransitionInProgress;var o=c,p=f.current!==a&&a!==null,q=f.current!==null&&p,r=h(function(){var a,b;a=e==null?void 0:(a=e.unified_stories)==null?void 0:a.edges;a=a==null?[]:a.map(function(a){return a.node});var c=!!(e==null?void 0:e.is_bucket_seen_by_viewer),d=e==null?void 0:(b=e.first_story_to_show)==null?void 0:b.id;b=d===null||d===void 0;return c||b?0:Math.max(0,a.findIndex(function(a){return(a==null?void 0:a.id)===d}))},[e]);if(p){if(q||c===-1){p=r();o=p;d(p)}m(!1);f.current=a}j(function(){q&&n.openStoryLog()},[q,n]);return o}e.exports=a}),null);
__d("useStoriesSuspenseContentDataSelectors",["React","StoriesRelay","StoriesSuspenseBucketDataContext","StoriesSuspenseEndCardContext","useStoriesSuspenseContentDataSelectors_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useCallback,i=b("React").useContext;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment;function a(a,c){__p&&__p();var d=i(b("StoriesSuspenseBucketDataContext"));d=d.bucketData;var e=i(b("StoriesSuspenseEndCardContext")),f=e.shouldShowEndCard;e=e.isEndCardPassed;var k=d.isLastBucket,l=d.isFirstBucket;d=j(g||(g=function(){return b("useStoriesSuspenseContentDataSelectors_bucket.graphql")}),a);var m=d==null?void 0:d.unified_stories,n=(m==null?void 0:m.count)||0;f&&!e&&(n+=1);return{getCardCount:h(function(){return n},[n]),getCurrentCardID:h(function(){var a;return m!=null?(a=m.edges[c])==null?void 0:(a=a.node)==null?void 0:a.id:null},[c,m]),isAfterLastCard:h(function(a){return a>=n},[n]),isBeforeFirstCard:h(function(a){return a<0},[]),isCurrentLastCard:h(function(){return c===n-1},[c,n]),isFirstCardInFirstBucket:h(function(a){return a<=0&&l},[l]),isLastCardInLastBucket:h(function(a){return!k?!1:a>=n-1},[n,k])}}e.exports=a}),null);
__d("useStoriesSuspenseCardIndexChangeHandler",["React","StoriesActorContext","StoriesEnums","StoriesLoggingConstants","StoriesRelay","StoriesSuspenseBucketDataContext","StoriesSuspenseContuxActionsContext","useStoriesSuspenseContentDataSelectors","useStoriesViewerClose","useStoriesSuspenseCardIndexChangeHandler_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useContext,i=b("React").useEffect,j=b("React").useRef,k=b("StoriesEnums").NAV_DIRECTIONS,l=b("StoriesLoggingConstants").CLOSE_STORY_GESTURE;b("StoriesRelay").graphql;var m=b("StoriesRelay").useFragment;function a(a,c,d){__p&&__p();a=m(g||(g=function(){return b("useStoriesSuspenseCardIndexChangeHandler_bucket.graphql")}),a);var e=j(null),f=j(null),n=j(null),o=b("useStoriesViewerClose")(),p=h(b("StoriesSuspenseContuxActionsContext")),q=p.performBucketNavigation;p=h(b("StoriesActorContext"));var r=p.actorID;p=h(b("StoriesSuspenseBucketDataContext"));p=p.bucketData;var s=p.bucketID,t=p.isLastBucket;p=b("useStoriesSuspenseContentDataSelectors")(a,c);var u=p.getCardCount,v=p.getCurrentCardID,w=p.isAfterLastCard,x=p.isBeforeFirstCard,y=p.isCurrentLastCard,z=a==null?void 0:(p=a.story_bucket_owner)==null?void 0:p.id,A=u();i(function(){d(y())},[A,c,s,d,y]);i(function(){if(f.current!==c||e.current===s&&n.current!==A&&(z===r||A>0)){var a=v();w(c)?t&&A>0?o(l.AUTO_EXIT):q(k.NEXT_BUCKET):x(c)?q(k.PREV_BUCKET):a===null&&q(k.NEXT_BUCKET)}f.current=c;n.current=A;e.current=s},[r,s,z,A,c,v,w,x,t,q,o])}e.exports=a}),null);
__d("useStoriesSuspenseNavListItemTransitionListener",["React","StoriesLoggingConstants","StoriesLoggerContext","StoriesViewerSuspenseEventEmitterContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("React").useEffect,i=b("StoriesLoggingConstants").NAVIGATION_GESTURE;function a(){var a=g(b("StoriesLoggerContext")),c=a.logger;a=g(b("StoriesViewerSuspenseEventEmitterContext"));var d=a.listenToNavListItemTransition;h(function(){return d(function(){c.storyNavigationLog(i.NAVIGATE_AWAY)})},[d,c])}e.exports=a}),null);
__d("StoriesSuspenseNullStateContext",["React"],(function(a,b,c,d,e,f){"use strict";a={setNullStateType:function(){}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseNullState",["QuickPerformanceLogger","React","StoriesActorContext","StoriesConstants","StoriesEnums","StoriesQuickLogModule","StoriesSuspenseNullStateContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("React").useEffect,i=b("React").useRef,j=b("StoriesEnums").EMPTY_BUCKET_TYPES;function a(a,c,d){__p&&__p();var e=g(b("StoriesActorContext")),f=e.actorID;e=g(b("StoriesSuspenseNullStateContext"));var k=e.setNullStateType,l=i(null);h(function(){l.current!==a&&(l.current!=null&&a!==""&&k(null),l.current=a)},[a,k]);h(function(){if(c==null)k(j.UNSELECTED);else if(d===0){var a=c===f?j.SELF_BUCKET:j.FRIEND_BUCKET;b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"empty buckets");b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,b("StoriesConstants").QPL.SUCCESS);k(a)}else k(null)},[f,d,c,k])}e.exports=a}),null);
__d("useStoriesSuspensePermalinkUpdater",["requireCond","React","StoriesRelay","cr:899180","useStoriesSuspensePermalinkUpdater_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useEffect;b("StoriesRelay").graphql;var i=b("StoriesRelay").useFragment;function a(a,c){var d;a=i(g||(g=function(){return b("useStoriesSuspensePermalinkUpdater_bucket.graphql")}),a);d=(d=a==null?void 0:(d=a.unified_stories)==null?void 0:d.nodes)!=null?d:[];d=d[c];var e=d==null?void 0:d.id,f=a==null?void 0:a.id;h(function(){b("cr:899180")&&b("cr:899180").updateURL(f,e)},[f,e])}e.exports=a}),null);
__d("StoriesSuspenseBucketContainer.react",["CometHero.react","CometPlaceholder.react","React","StoriesPauseReasons","StoriesRelay","StoriesCardHeader.react","StoriesLoggingConstants","StoriesSuspenseBucketDataContext","StoriesBucketLoadingView.react","StoriesSuspenseCardOptionMenuTrigger.react","StoriesSuspenseCard.react","StoriesMuteButton.react","StoriesPauseButton.react","StoriesProgressBar.react","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","StoriesSuspenseEndCard.react","StoriesSuspensePauseContext","StoriesEnums","StoriesViewerMenu.react","StoriesSuspenseEndCardContext","storiesUpdateSeenStateMutation","useStoriesSuspenseNavListItemTransitionListener","useStoriesViewerClose","stylex","useStoriesSuspenseNullState","useStoriesSuspenseCardIndexChangeHandler","useStoriesSuspensePermalinkUpdater","useStoriesBehaviorHelpers","StoriesSuspenseBucketContainer_bucket.graphql","StoriesSuspenseBucketContainer_animations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("StoriesRelay").useRelayEnvironment,j=b("React").useEffect,k=b("React").useState,l=b("React").useContext,m=b("StoriesEnums").NAV_DIRECTIONS,n=null,o=function(){return b("StoriesSuspenseBucketContainer_bucket.graphql")};function a(a){__p&&__p();var c,d,e=h(o,a.bucket),f=b("useStoriesViewerClose")(),q=i(),r=b("useStoriesBehaviorHelpers")(e);r=r.isSelfStory;a=h(g||(g=function(){return b("StoriesSuspenseBucketContainer_animations.graphql")}),a.animations);var s=k(null),t=s[0];s=s[1];c=k((c=n)!=null?c:!1);var u=c[0],v=c[1];c=l(b("StoriesSuspensePauseContext"));var w=c.isPaused,x=c.setPause;c=b("React").useContext(b("StoriesSuspenseContuxActionsContext"));var y=c.performCardNavigation;c=c.setLastCard;var z=b("React").useContext(b("StoriesSuspenseContuxContext")),A=z.cardIndex,B=z.isLastCard;z=b("React").useContext(b("StoriesSuspenseBucketDataContext"));z=z.bucketData;var C=z.bucketID,D=z.isLastBucket;z=l(b("StoriesSuspenseEndCardContext"));var E=z.shouldShowEndCard;z=z.isEndCardPassed;var F=function(){B&&D&&!E?f(b("StoriesLoggingConstants").CLOSE_STORY_GESTURE.AUTO_EXIT):y(m.NEXT_CARD,b("StoriesLoggingConstants").NAVIGATION_GESTURE.AUTO_JUMP)},G=e==null?void 0:e.owner,H=(d=e==null?void 0:e.is_bucket_seen_by_viewer)!=null?d:B,I=new p(e,A);d=I.getCardAtCurrentIndex();var J=I.getCount(),K=d==null?void 0:d.id,L=G==null?void 0:G.id,M=function(){if(C!=null&&K!=null){var a;b("storiesUpdateSeenStateMutation")(q,C,K,H?(a=I.getFirstCard())==null?void 0:a.id:(a=I.getNextCard())==null?void 0:a.id,H)}};b("useStoriesSuspenseNavListItemTransitionListener")();b("useStoriesSuspenseNullState")(C,L,J);b("useStoriesSuspenseCardIndexChangeHandler")(e,A,c);b("useStoriesSuspensePermalinkUpdater")(e,A);j(function(){K!=null&&x(!1,b("StoriesPauseReasons").CARD_CHANGE)},[K,x]);if(E&&B&&!z)return b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m",key:C},b("React").createElement(b("StoriesSuspenseEndCard.react"),{bucketID:C}));return d==null?b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m",key:C},b("React").createElement(b("StoriesBucketLoadingView.react"),null)):b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m",key:C},b("React").createElement(b("CometPlaceholder.react"),{fallback:b("React").createElement(b("StoriesCardHeader.react"),{card:d,owner:G})},b("React").createElement(b("CometHero.react"),{description:"StoriesCard"}),b("React").createElement("div",{className:"k4urcfbm datstx6m"},b("React").createElement(b("StoriesSuspenseCard.react"),{animations:a,card:d,isMuted:u,isSelfStory:r(),onSeen:M,onTimerSourceUpdate:s,owner:G}),b("React").createElement(b("StoriesViewerMenu.react"),null,b("React").createElement(b("StoriesPauseButton.react"),{isPaused:w,key:C,setPause:x}),b("React").createElement(b("StoriesMuteButton.react"),{isMuted:u,onMuteChanged:function(a){v(a),n=a}}),b("React").createElement(b("StoriesSuspenseCardOptionMenuTrigger.react"),{bucketID:C,card:d,owner:G,setPause:x}))),b("React").createElement(b("StoriesProgressBar.react"),{cardCount:I.getCount(),cardTimerSource:t,currentCardIndex:A,isPaused:w,onDone:F})))}var p=function(){__p&&__p();function a(a,b){this.$1=null,this.$2=-1,this.$1=a,this.$2=b}var b=a.prototype;b.getCount=function(){return this.$3().length};b.getCardAtCurrentIndex=function(){var a;return(a=this.$3()[Math.max(Math.min(this.$2,this.getCount()-1),0)])==null?void 0:a.node};b.getNextCard=function(){var a;return(a=this.$3()[this.$2+1])==null?void 0:a.node};b.getFirstCard=function(){var a;return(a=this.$3()[0])==null?void 0:a.node};b.$3=function(){var a;return((a=this.$1)==null?void 0:(a=a.unified_stories)==null?void 0:a.edges)||[]};return a}();e.exports=a}),null);
__d("StoriesSuspenseBucketTransitionView.react",["CometPlaceholder.react","React","StoriesRelay","StoriesConstants","StoriesEnums","StoriesPauseReasons","StoriesSuspenseBucketContainer.react","StoriesSuspenseBucketDataContext","StoriesBucketLoadingView.react","StoriesSuspenseCardSwap.react","StoriesSuspensePauseContext","stylex","useStoriesViewerDimensions","StoriesSuspenseBucketTransitionView_bucket.graphql","StoriesSuspenseBucketTransitionView_LWRAnimations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("React").useContext,j=b("React").useMemo,k=b("StoriesConstants").TRANSITION_DURATION_MS,l=b("StoriesEnums").NAV_DIRECTIONS,m=function(){return b("StoriesSuspenseBucketTransitionView_bucket.graphql")};function a(a){__p&&__p();var c=a.animations,d=a.bucket,e=a.bucketID,f=h(m,d),n=h(g||(g=function(){return b("StoriesSuspenseBucketTransitionView_LWRAnimations.graphql")}),c);a=b("useStoriesViewerDimensions")();d=i(b("StoriesSuspensePauseContext"));var o=d.setPause;c=i(b("StoriesSuspenseBucketDataContext"));var p=c.bucketNavDirection,q=j(function(){return b("React").createElement(b("CometPlaceholder.react"),{fallback:b("React").createElement(b("StoriesBucketLoadingView.react"),null)},b("React").createElement(b("StoriesSuspenseBucketContainer.react"),{animations:n,bucket:f}))},[n,f]);d=j(function(){return b("React").createElement(b("StoriesSuspenseCardSwap.react"),{bucketID:e,direction:p===l.NEXT_BUCKET?"next":"prev",duration:k,onTransitionBegin:function(){return o(!0,b("StoriesPauseReasons").BUCKET_TRANSITION)},onTransitionEnd:function(){o(!1,b("StoriesPauseReasons").BUCKET_TRANSITION)},slide:q})},[q,e,p,o]);c=d;return b("React").createElement("div",{className:"dzlist6r msbwk0y7 pnx7fd3z ms05siws l9j0dhe7 stjgntxs ni8dbmo4 puxov6c6 r893ighp ozuftl9m n851cfcs tvfksri0 n1l5q3vz btwxx1t3 j83agx80 ptt86dso g5ia77u1",style:a},c)}e.exports=b("React").memo(a)}),null);
__d("StoriesSuspenseViewerSheetPreviewTray.react",["React","StoriesLoggingConstants","StoriesRelay","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","StoriesViewerSheetPreviewAddStory.react","StoriesViewerSheetSection.react","StoriesViewerSheetStoryPreview.react","stylex","useStoriesBehaviorHelpers","StoriesSuspenseViewerSheetPreviewTray_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=132,j=99,k=1.15152,l=12;function a(a){__p&&__p();a=a.bucket;a=h(g||(g=function(){return b("StoriesSuspenseViewerSheetPreviewTray_bucket.graphql")}),a);var c=b("React").useContext(b("StoriesSuspenseContuxActionsContext")),d=c.cardIndexChanged;c=b("React").useContext(b("StoriesSuspenseContuxContext"));var e=c.cardIndex;c=b("useStoriesBehaviorHelpers")(a);c=c.canAddToStory;var f=function(a,c){if(a)return;d(c,b("StoriesLoggingConstants").NAVIGATION_GESTURE.VIEWER_SHEET)};a=a==null?void 0:(a=a.unified_stories)==null?void 0:a.edges;a=a==null?null:a.map(function(a){return a.node});if(a==null)return null;var m=e>1?-(e-1)*(j+l):0;return b("React").createElement(b("StoriesViewerSheetSection.react"),null,b("React").createElement("div",{className:"ejg0drik heur4gxb flx89l3n dpja2al7 l9j0dhe7 tw6a2znq jbae33se d1544ag0 bjjx79mm py5xhhw8 j83agx80 bp9cbjyn",style:{transform:"translateX("+m+"px)"}},a.map(function(a,c){if(a==null)return null;var d=c===e;return b("React").createElement("div",{className:"tvfksri0",key:c},b("React").createElement(b("StoriesViewerSheetStoryPreview.react"),{activeScale:k,height:i,index:c,isActive:d,onClick:f,storyPreview:a,width:j}))}),c()&&b("React").createElement("div",{className:"tvfksri0"},b("React").createElement(b("StoriesViewerSheetPreviewAddStory.react"),{height:i,width:j}))))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetPageStoryContent.react",["fbt","React","StoriesEnums","StoriesRelay","StoriesSuspenseViewerSheetPreviewTray.react","StoriesViewerSheetHeader.react","StoriesViewerSheetInsightsNullState.react","StoriesViewerSheetPollResult.react","StoryViewerSheetInsights.react","stylex","StoriesSuspenseViewerSheetPageStoryContent_bucket.graphql","StoriesSuspenseViewerSheetPageStoryContent_card.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=b("StoriesEnums").STORY_OVERLAY_TYPES;b("StoriesRelay").graphql;var k=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c,d,e=a.bucket;a=a.card;e=k(h||(h=function(){return b("StoriesSuspenseViewerSheetPageStoryContent_bucket.graphql")}),e);a=k(i||(i=function(){return b("StoriesSuspenseViewerSheetPageStoryContent_card.graphql")}),a);c=a==null?void 0:(c=a.story_card_seen_state)==null?void 0:(c=c.followersSeenCount)==null?void 0:c.count;d=(d=a==null?void 0:a.story_overlays)!=null?d:[];d=d.find(function(a){return a.__typename===j.POLL_STICKER});var f=b("React").createElement(b("StoriesViewerSheetHeader.react"),null,g._("Insights"));return c==null||c===0?b("React").createElement("div",{className:"e9vueds3 nhd2j8a9"},f,b("React").createElement(b("StoriesSuspenseViewerSheetPreviewTray.react"),{bucket:e}),b("React").createElement(b("StoriesViewerSheetInsightsNullState.react"),null)):b("React").createElement("div",{className:"e9vueds3 nhd2j8a9"},f,b("React").createElement(b("StoriesSuspenseViewerSheetPreviewTray.react"),{bucket:e}),b("React").createElement(b("StoryViewerSheetInsights.react"),{card:a}),b("React").createElement(b("StoriesViewerSheetPollResult.react"),{overlayPoll:d,showVoterList:!1}))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetViewerList.react",["React","StoriesRelay","StoriesSuspensePauseContext","StoriesViewerSheetSection.react","StoriesViewerSheetViewerListContent.react","StoriesViewerSheetViewerListHeader.react","storiesUpdateStorySeenReceiptsLastSeenTimeMutation","usePrevious","StoriesSuspenseViewerSheetViewerList_card.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useContext,i=b("React").useEffect;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment,k=b("StoriesRelay").useRelayEnvironment;function a(a){__p&&__p();a=a.card;var c=k(),d=h(b("StoriesSuspensePauseContext"));d=d.setPause;a=j(g||(g=function(){return b("StoriesSuspenseViewerSheetViewerList_card.graphql")}),a);var e=a==null?void 0:a.id,f=b("usePrevious")(e);i(function(){f!==e&&e!==""&&f!==""&&f!=null&&b("storiesUpdateStorySeenReceiptsLastSeenTimeMutation")(c,f);return function(){e!==""&&e!=null&&b("storiesUpdateStorySeenReceiptsLastSeenTimeMutation")(c,e)}});return e==null?null:b("React").createElement(b("StoriesViewerSheetSection.react"),{showSectionLine:!1},b("React").createElement(b("StoriesViewerSheetViewerListHeader.react"),{cardSeenState:a}),b("React").createElement(b("StoriesViewerSheetViewerListContent.react"),{cardID:e,setPause:d,viewerList:a}))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetSelfStoryContent.react",["React","StoriesEnums","StoriesRelay","StoriesSuspenseViewerSheetPreviewTray.react","StoriesSuspenseViewerSheetViewerList.react","StoriesViewerSheetHeader.react","StoriesViewerSheetPollResult.react","stylex","StoriesSuspenseViewerSheetSelfStoryContent_bucket.graphql","StoriesSuspenseViewerSheetSelfStoryContent_card.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("StoriesEnums").STORY_OVERLAY_TYPES;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c,d=a.bucket;a=a.card;d=j(g||(g=function(){return b("StoriesSuspenseViewerSheetSelfStoryContent_bucket.graphql")}),d);a=j(h||(h=function(){return b("StoriesSuspenseViewerSheetSelfStoryContent_card.graphql")}),a);c=(c=a==null?void 0:a.story_overlays)!=null?c:[];c=c.find(function(a){return a.__typename===i.POLL_STICKER});return b("React").createElement("div",{className:"e9vueds3 nhd2j8a9"},b("React").createElement(b("StoriesViewerSheetHeader.react"),null),b("React").createElement(b("StoriesSuspenseViewerSheetPreviewTray.react"),{bucket:d}),b("React").createElement(b("StoriesViewerSheetPollResult.react"),{overlayPoll:c}),b("React").createElement(b("StoriesSuspenseViewerSheetViewerList.react"),{card:a}))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheet.react",["CometScrollableArea.react","React","StoriesLoggerContext","StoriesRelay","StoriesSuspenseBucketTransitioningContext","StoriesSuspenseContuxContext","StoriesSuspensePauseOnHoverContainer.react","StoriesSuspenseViewerSheetPageStoryContent.react","StoriesSuspenseViewerSheetSelfStoryContent.react","StoriesTestID","StoriesViewerSheetTypes","stylex","useStoriesBehaviorHelpers","StoriesSuspenseViewerSheet_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("React").useContext,j=b("React").useLayoutEffect,k=b("React").useRef,l={container:{height:"datstx6m"},root:{backgroundColor:"cwj9ozl2",height:"datstx6m",width:"k4urcfbm"}};function a(a){__p&&__p();var c=a.bucket,d=a.toggleViewerSheet,e=h(g||(g=function(){return b("StoriesSuspenseViewerSheet_bucket.graphql")}),c);a=i(b("StoriesSuspenseContuxContext"));var f=a.cardIndex;c=i(b("StoriesLoggerContext"));var m=c.logger;a=i(b("StoriesSuspenseBucketTransitioningContext"));var n=a.isBucketTransitionInProgress;c=b("useStoriesBehaviorHelpers")(e);a=c.canSeeViewerSheet;c=c.whichViewerSheet;var o=function(){return q().length},p=function(){return o()>0},q=function(){var a;return(e==null?void 0:(a=e.unified_stories)==null?void 0:a.edges)||[]},r=function(){if(f<0)return null;var a=q();return f>a.length-1?null:(a=a[f])==null?void 0:a.node},s=a()&&p();a=r();var t=a==null?void 0:a.id,u=k(null),v=k(null),w=k(null);j(function(){__p&&__p();d(s);var a=u.current!==t&&t!==""&&t!=null;if(!n&&a){s&&m.openViewerSheetLog();if(v.current&&s){a=(a=v.current.children)==null?void 0:a[0];a&&(w.current=a.cloneNode(!0))}u.current=t}},[s,d,t,m,n,f]);p=null;switch(c()){case b("StoriesViewerSheetTypes").PAGE_STORY_VIEWERSHEET:p=b("React").createElement(b("StoriesSuspenseViewerSheetPageStoryContent.react"),{bucket:e,card:a});break;case b("StoriesViewerSheetTypes").SELF_STORY_VIEWERSHEET:p=b("React").createElement(b("StoriesSuspenseViewerSheetSelfStoryContent.react"),{bucket:e,card:a});break;default:p=b("React").createElement("div",{dangerouslySetInnerHTML:{__html:(c=(r=w.current)==null?void 0:r.outerHTML)!=null?c:""}})}return b("React").createElement(b("StoriesSuspensePauseOnHoverContainer.react"),null,b("React").createElement("div",{className:b("stylex")(l.root),"data-testid":b("StoriesTestID").VIEWER_SHEET},b("React").createElement(b("CometScrollableArea.react"),{vertical:!0,xstyle:l.container},b("React").createElement("span",{ref:function(a){return v.current=a}},p))))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetPlaceholder.react",["BaseGlimmer.react","CometStoriesListItemGlimmer.react","React","StoriesViewerSheetSection.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect;function a(a){var c=a.toggleViewerSheet;g(function(){c(!1)},[c]);a=[].concat(Array(3).keys()).map(function(a){return b("React").createElement(b("BaseGlimmer.react"),{className:"tuwtu1qs tvfksri0 ijttq3ge",index:a})});return b("React").createElement("div",{className:"k4urcfbm datstx6m g5ijobay"},b("React").createElement(b("StoriesViewerSheetSection.react"),{showSectionLine:!0},b("React").createElement("div",{className:"tw6a2znq qt6c0cv9 d1544ag0 t15fza0o"},b("React").createElement(b("BaseGlimmer.react"),{className:"gjzvkazv jnigpg78",index:0})),b("React").createElement("div",{className:"tw6a2znq jbae33se d1544ag0 bjjx79mm j83agx80 bp9cbjyn"},a)),b("React").createElement(b("StoriesViewerSheetSection.react"),{showSectionLine:!1},b("React").createElement("div",{className:"tw6a2znq qt6c0cv9 d1544ag0 t15fza0o"},b("React").createElement(b("BaseGlimmer.react"),{className:"gjzvkazv jnigpg78",index:0})),b("React").createElement(b("CometStoriesListItemGlimmer.react"),{isViewerSheet:!0,numberOfItems:6})))}e.exports=a}),null);
__d("StoriesSuspenseContentSlidingTransition.react",["requireCond","CometPlaceholder.react","Locale","React","StoriesRelay","StoriesCloseButton.react","StoriesSuspensePauseContext","StoriesSuspenseViewerSheet.react","StoriesSuspenseViewerSheetPlaceholder.react","cr:1032347","stylex","StoriesSuspenseContentSlidingTransition_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("React").useCallback,j=b("Locale").isRTL();function a(a){__p&&__p();var c=a.bucket;a=a.children;var d=b("React").useState(!1),e=d[0],f=d[1];d=b("React").useContext(b("StoriesSuspensePauseContext"));d=d.setPause;c=h(g||(g=function(){return b("StoriesSuspenseContentSlidingTransition_bucket.graphql")}),c);var k=i(function(){return b("React").createElement("div",{className:"o36gj0jk datstx6m"},b("React").createElement(b("StoriesSuspenseViewerSheetPlaceholder.react"),{toggleViewerSheet:f}))},[f]);return b("React").createElement("div",{className:b("stylex").dedupe(e&&j?{"transform-0.1":"q6kczzvv"}:{},e&&!j?{"transform-0.1":"jjsq51tz"}:null,e===!1?{"transform-0.1":"qiw3t3sk"}:null,{"display-1":"j83agx80","height-1":"datstx6m","width-1":"k4urcfbm"},{"transition-delay-1":"i1mrkscp","transition-duration-1":"dpja2al7","transition-property-1":"flx89l3n","transition-timing-function-1":"msbwk0y7","will-change-1":"ejg0drik"})},a,b("React").createElement("div",{className:b("stylex").dedupe({"transition-delay-1":"i1mrkscp","transition-duration-1":"dpja2al7","transition-property-1":"flx89l3n","transition-timing-function-1":"msbwk0y7","will-change-1":"ejg0drik"},e&&j?{"transform-0.1":"q6kczzvv"}:null,e&&!j?{"transform-0.1":"jjsq51tz"}:null,e===!1?{"transform-0.1":"qiw3t3sk"}:null)},b("React").createElement(b("StoriesCloseButton.react"),null),b("cr:1032347")&&b("React").createElement(b("cr:1032347"),{setPause:d})),b("React").createElement("div",{className:b("stylex").dedupe({"end-1":"s2y2oui8","height-1":"datstx6m","position-1":"pmk7jnqg","top-1":"kr520xx4","transform-0.1":"qiw3t3sk","transition-delay-1":"i1mrkscp","transition-duration-1":"dpja2al7","transition-property-1":"flx89l3n","transition-timing-function-1":"msbwk0y7","width-1":"o36gj0jk","will-change-1":"ejg0drik"},e&&j?{"transform-0.1":"q6kczzvv"}:null,e&&!j?{"transform-0.1":"jjsq51tz"}:null,e===!1?{"transform-0.1":"qiw3t3sk"}:null)},b("React").createElement(b("CometPlaceholder.react"),{fallback:b("React").createElement(k,null)},b("React").createElement(b("StoriesSuspenseViewerSheet.react"),{bucket:c,toggleViewerSheet:f}))))}e.exports=a}),null);
__d("StoriesSuspenseEmptyBucketError.react",["ix","fbt","CometIcon_DEPRECATED.react","CometUnstyledButton.react","React","StoriesCloseButton.react","StoriesEnums","StoriesGating","StoriesSuspenseBucketDataContext","StoriesSuspenseContuxActionsContext","TetraIcon.react","TetraText.react","asset","fbicon","stylex","useOpenComposer"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").useContext,j=b("StoriesEnums").EMPTY_BUCKET_TYPES,k=b("StoriesEnums").NAV_DIRECTIONS;a=function(a){var c=h._("This Story is Empty"),d=h._("Photos and videos shared in stories are only visible for 24 hours after they've been added"),e=null;switch(a.emptyBucketType){case j.FRIEND_BUCKET:e=b("React").createElement(l,null);break;case j.SELF_BUCKET:b("StoriesGating").isAddToStoryEnabled()&&(e=b("React").createElement(m,null));break}return b("React").createElement("div",{className:"k4urcfbm ni8dbmo4 q10oee1b taijpn5t datstx6m cbu4d94t j83agx80 g6srhlxm bp9cbjyn"},b("React").createElement(b("StoriesCloseButton.react"),{dark:!0}),b("React").createElement("span",{"aria-hidden":!0,className:"ofv0k9yr"},b("React").createElement(b("CometIcon_DEPRECATED.react"),{align:"text-bottom",asset:g("803962"),color:"fds-secondary-icon",name:"stories",size:112,variant:"outline"})),b("React").createElement("span",{className:"oqcyycmt ofv0k9yr"},b("React").createElement(b("TetraText.react"),{type:"headline3"},c)),b("React").createElement("span",{className:"oqcyycmt ofv0k9yr oh7imozk"},b("React").createElement(b("TetraText.react"),{type:"headline4"},d)),e)};var l=function(){__p&&__p();var a=i(b("StoriesSuspenseBucketDataContext"));a=a.bucketData;var c=a.isLastBucket;a=a.bucketIndex;var d=i(b("StoriesSuspenseContuxActionsContext")),e=d.performBucketNavigation;d=function(){};var f=null,j=null;c&&a>0?(d=function(){return e(k.PREV_BUCKET)},f=b("React").createElement(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("541301"),20)}),j=h._("Previous Story")):c||(d=function(){return e(k.NEXT_BUCKET)},f=b("React").createElement(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("541286"),20)}),j=h._("Next Story"));return j===null?null:b("React").createElement(b("CometUnstyledButton.react"),{onClick:d},b("React").createElement("div",{className:"e6erh6tl taijpn5t qypqp5cg j83agx80 enl131ya s1i5eluu bp9cbjyn"},f,b("React").createElement("div",{className:"h676nmdw j83agx80 bwm1u5wc"},b("React").createElement(b("TetraText.react"),{color:"white",type:"button2"},j))))},m=function(){var a=b("useOpenComposer")();return b("React").createElement(b("CometUnstyledButton.react"),{onClick:a},b("React").createElement("div",{className:"e6erh6tl taijpn5t qypqp5cg j83agx80 enl131ya s1i5eluu bp9cbjyn"},b("React").createElement(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("481775"),20)}),b("React").createElement("div",{className:"h676nmdw j83agx80 bwm1u5wc"},b("React").createElement(b("TetraText.react"),{color:"white",type:"button1"},h._("Add to Your Story")))))};e.exports=a}),null);
__d("useStoriesSuspenseBucketSelectors",["StoriesRelay","useStoriesSuspenseBucketSelectors_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c=h(g||(g=function(){return b("useStoriesSuspenseBucketSelectors_bucket.graphql")}),a),d=function(){var a;return(c==null?void 0:(a=c.unified_stories)==null?void 0:a.edges)||[]},e=function(){return d().length};a=function(){return e()>0};var f=function(a){if(a<0)return null;return a>e()-1?null:(a=d()[a])==null?void 0:a.node};return{getCardID:function(a){return((a=f(a))==null?void 0:a.id)||""},getCount:e,hasCards:a}}e.exports=a}),null);
__d("StoriesSuspenseFeedback.react",["PageStoriesFeedback.react","React","StoriesEnums","StoriesFeedback.react","StoriesRelay","StoriesSuspenseContuxContext","StoriesSuspensePauseContext","useStoriesSuspenseBucketSelectors","StoriesSuspenseFeedback_bucket.graphql","StoriesSuspenseFeedback_LWRAnimations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("StoriesEnums").STORY_CARD_TYPES;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c=a.bucket;a=a.LWRAnimations;c=j(g||(g=function(){return b("StoriesSuspenseFeedback_bucket.graphql")}),c);a=j(h||(h=function(){return b("StoriesSuspenseFeedback_LWRAnimations.graphql")}),a);var d=b("React").useContext(b("StoriesSuspenseContuxContext"));d=d.cardIndex;var e=b("React").useContext(b("StoriesSuspensePauseContext"));e=e.setPause;var f=b("useStoriesSuspenseBucketSelectors")(c);f=f.getCardID(d);return(c==null?void 0:c.story_bucket_type)===i.PAGE_STORY||(c==null?void 0:c.story_bucket_type)===i.SHARED_PAGE_STORY?b("React").createElement(b("PageStoriesFeedback.react"),{LWRAnimations:a,bucket:c,cardID:f,owner:c==null?void 0:c.owner,setPause:e}):b("React").createElement(b("StoriesFeedback.react"),{LWRAnimations:a,bucket:c,cardID:f,setPause:e})}e.exports=a}),null);
__d("useStoriesSuspensePause",["requireCond","React","StoriesLoggerContext","StoriesPauseReasons","StoriesViewerSuspenseEventEmitterContext","Visibility","cr:809608"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("React").useEffect,j=b("React").useRef,k=b("React").useState;function a(){__p&&__p();var a=k(!1),c=a[0],d=a[1];a=h(b("StoriesLoggerContext"));var e=a.logger,f=j({});a=h(b("StoriesViewerSuspenseEventEmitterContext"));var l=a.listenToPauseRequest,m=g(function(a,c){a?(f.current[c]=!0,d(a),e.pauseLog(!0,c)):(c===b("StoriesPauseReasons").CLICK_PAUSE_ICON||c===b("StoriesPauseReasons").KEYBOARD||c===b("StoriesPauseReasons").BUCKET_TRANSITION||c===b("StoriesPauseReasons").CARD_CHANGE?f.current={}:delete f.current[c],Object.keys(f.current).length===0&&(d(!1),e.pauseLog(!1,c)))},[e]);i(function(){return l(function(){return m.apply(void 0,arguments)})},[m,l]);i(function(){if(b("cr:809608")==null)return;var a=b("cr:809608")({onJewelHidden:function(){m(!1,b("StoriesPauseReasons").JEWEL)},onJewelShown:function(){m(!0,b("StoriesPauseReasons").JEWEL)}});return a},[m]);i(function(){var a=[b("Visibility").addListener(b("Visibility").HIDDEN,function(){return m(!0,b("StoriesPauseReasons").VISIBILITY_CHANGE)}),b("Visibility").addListener(b("Visibility").VISIBLE,function(){return m(!1,b("StoriesPauseReasons").VISIBILITY_CHANGE)})];return function(){a.forEach(function(a){return a.remove()})}},[m]);return[c,m]}e.exports=a}),null);
__d("StoriesSuspensePauseContextProvider.react",["React","StoriesSuspensePauseContext","useStoriesSuspensePause"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.children;var c=b("useStoriesSuspensePause")(),d=c[0];c=c[1];return b("React").createElement(b("StoriesSuspensePauseContext").Provider,{value:{isPaused:d,setPause:c}},a)}e.exports=a}),null);
__d("useStoriesSuspenseContuxActions",["CometInteractionTracing","CometInteractionTracingQuickLogModule","InteractionClass","QuickPerformanceLogger","React","StoriesConstants","StoriesEnums","StoriesLoggingConstants","StoriesQuickLogModule","StoriesSuspenseBucketDataContext","StoriesViewerSuspenseEventEmitterContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("StoriesEnums").NAV_DIRECTIONS;function a(a){__p&&__p();var c=a.logger,d=a.cardIndex,e=a.isLastCard,f=a.isLastBucket,j=a.isFirstBucket,k=a.setCardIndex;a=a.setLastCard;var l=h(b("StoriesViewerSuspenseEventEmitterContext")),m=l.requestBucketTransition;l=h(b("StoriesSuspenseBucketDataContext"));var n=l.setNavigationDirection,o=d===0&&j,p=e&&f,q=g(function(a,b){if(d<0&&o)return;b!=null&&c.storyNavigationLog(b);k(a)},[d,o,c,k]);l=g(function(a,c){var e=a===i.NEXT_CARD?d+1:d-1,f=a===i.NEXT_CARD?i.NEXT_BUCKET:i.PREV_BUCKET,g=p&&a===i.NEXT_CARD;a=o&&a===i.PREV_CARD;if(g||a)return;b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,b("StoriesConstants").QPL.CANCEL);b("QuickPerformanceLogger").markerStart(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW);b("CometInteractionTracing").trace(b("CometInteractionTracingQuickLogModule").STORY_VIEWER_THREAD_TRANSITION,function(a){n(f),q(e,c)},b("InteractionClass").FLUID,"INTERACTION")},[d,q,o,p,n]);e=g(function(a,d){d===void 0&&(d=!1);d&&c.storyNavigationLog(a===i.NEXT_BUCKET?b("StoriesLoggingConstants").NAVIGATION_GESTURE.SWIPE_RIGHT:b("StoriesLoggingConstants").NAVIGATION_GESTURE.SWIPE_LEFT);if(a===i.NEXT_BUCKET&&f)return;if(a===i.PREV_BUCKET&&j)return;b("QuickPerformanceLogger").annotateMarkerString(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,"TRANSITION_TYPE","BUCKET");n(a);m(a)},[j,f,c,m,n]);return{cardIndexChanged:q,performBucketNavigation:e,performCardNavigation:l,setLastCard:a}}e.exports=a}),null);
__d("StoriesSuspensePendingRefetchBucketIDsContext",["React"],(function(a,b,c,d,e,f){"use strict";a={setShouldRefetchSelfBucket:function(){}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseRefetchOnPost",["requireCond","FBLogger","React","StoriesSuspensePendingRefetchBucketIDsContext","WebPixelRatio","setTimeout","cr:809609"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useState,i=3e3;function a(a,c,d){__p&&__p();d===void 0&&(d=!0);var e=h(!1),f=e[0],j=e[1];e=b("React").useContext(b("StoriesSuspensePendingRefetchBucketIDsContext"));var k=e.setShouldRefetchSelfBucket;g(function(){d&&k(!1)},[d,k]);g(function(){var e=null;b("cr:809609")!=null&&(e=b("cr:809609")({onPostStarted:function(){j(!0)},onPostSucceeded:function(e){e&&b("FBLogger")("fbstories").warn("User bucket fetch failed: %s",e.toString()),a!=null&&(d?b("setTimeout")(function(){c({id:a,scale:b("WebPixelRatio").get()},{fetchPolicy:"network-only"}),j(!1)},i):(k(!0),j(!1)))}}));return function(){e!=null&&e()}},[a,d,c,k]);return f}e.exports=a}),null);
__d("useStoriesSuspenseReshareListener",["JSScheduler","React","StoriesViewerSuspenseEventEmitterContext","WebPixelRatio"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("React").useEffect;function a(a,c,d){d===void 0&&(d=!1);var e=g(b("StoriesViewerSuspenseEventEmitterContext")),f=e.listenToReshareRequest;h(function(){var e=function(e){a!=null&&d&&b("JSScheduler").next(function(){c({id:a,scale:b("WebPixelRatio").get()},{fetchPolicy:"network-only"})})};return f(function(){return e.apply(void 0,arguments)})},[a,d,f,c])}e.exports=a}),null);
__d("StoriesSuspenseContentPane.react",["CometErrorBoundary.react","CometToastBridge.react","QuickPerformanceLogger","React","StoriesActorContext","StoriesRelay","cometTestID","useStoriesSuspenseBucketChangeHandler","useStoriesTransitionPageListener","StoriesBucketError.react","StoriesConstants","StoriesGating","StoriesLoggerContext","StoriesQuickLogModule","StoriesSuspenseBackgroundDarkeningLayer.react","StoriesSuspenseBucketTransitionView.react","StoriesSuspenseContentSlidingTransition.react","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","StoriesSuspenseBucketDataContext","StoriesSuspenseEmptyBucketError.react","StoriesSuspenseEndCardContext","StoriesSuspenseFeedback.react","StoriesSuspenseNavigationButtons.react","StoriesSuspensePauseContextProvider.react","StoriesTestID","StoriesViewerFooter.react","stylex","useStoriesLogger","useStoriesSuspenseContentDataSelectors","useStoriesSuspenseContuxActions","StorieslwrPlaybackContextProvider.react","StoriesSuspenseNullStateContext","StoriesUnselected.react","StoriesEnums","useStoriesSuspenseRefetchOnPost","useStoriesSuspenseReshareListener","StoriesSuspenseContentPane_bucket.graphql","StoriesSuspenseContentPane_LWRAnimations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("StoriesRelay").useRefetchableFragment,j=b("React").useState,k=b("React").useContext,l=b("React").useEffect,m=b("React").useRef,n=b("StoriesEnums").EMPTY_BUCKET_TYPES,o=function(){return b("StoriesSuspenseContentPane_bucket.graphql")};function a(a){__p&&__p();var c=a.LWRAnimations,d=a.bucket;a=a.initialCardIndex;a=j(a);var e=a[0];a=a[1];var f=j(!1),p=f[0];f=f[1];var q=j(null),r=q[0],s=q[1];q=k(b("StoriesSuspenseBucketDataContext"));q=q.bucketData;var t=q.bucketID,u=q.isFirstBucket,v=q.isLastBucket;q=q.bucketIndex;var w=k(b("StoriesSuspenseEndCardContext")),x=w.shouldShowEndCard;w=w.isEndCardPassed;var y=b("React").useContext(b("StoriesActorContext"));y=y.actorID;c=h(g||(g=function(){return b("StoriesSuspenseContentPane_LWRAnimations.graphql")}),c);d=i(o,d);var z=d[0];d=d[1];e=b("useStoriesSuspenseBucketChangeHandler")(z,e,a);q=b("useStoriesLogger")({bucketIndex:q,cardIndex:e},z);u=b("useStoriesSuspenseContuxActions")({cardIndex:e,isFirstBucket:u,isLastBucket:v,isLastCard:p,logger:q,setCardIndex:a,setLastCard:f});v=m(null);a=b("useStoriesSuspenseContentDataSelectors")(z,e);f=a.getCurrentCardID;a=(z==null?void 0:(a=z.story_bucket_owner)==null?void 0:a.id)===y;b("useStoriesSuspenseRefetchOnPost")(t,d,a);var A=f();b("useStoriesSuspenseReshareListener")(t,d,a);l(function(){A!=null&&s(null)},[A]);y={cardIndex:e,isFirstCard:e===0,isLastCard:p};f=x&&p&&!w;b("useStoriesTransitionPageListener")(q);r===n.UNSELECTED?d=b("React").createElement(b("StoriesUnselected.react"),null):r!=null&&(r===n.SELF_BUCKET||r===n.FRIEND_BUCKET)?(b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"empty buckets"),b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,b("StoriesConstants").QPL.SUCCESS),d=b("React").createElement(b("StoriesSuspenseEmptyBucketError.react"),{emptyBucketType:r})):d=b("React").createElement(b("StoriesSuspenseContentSlidingTransition.react"),{bucket:z},b("React").createElement("div",{className:"k4urcfbm datstx6m",id:"stories_viewer_background"}),b("React").createElement(b("StoriesSuspenseBackgroundDarkeningLayer.react"),{isShowingEndCard:f}),b("React").createElement("div",babelHelpers["extends"]({className:"k4urcfbm kr520xx4 j9ispegn pmk7jnqg taijpn5t datstx6m j83agx80 bp9cbjyn"},b("cometTestID")(b("StoriesTestID").VIEWER_CONTENT_PANE),{ref:v}),b("React").createElement(b("StorieslwrPlaybackContextProvider.react"),{lwrPlaybackContainerRef:v},b("React").createElement(b("StoriesSuspenseNavigationButtons.react"),null,b("React").createElement("div",{className:"l9j0dhe7 taijpn5t datstx6m cbu4d94t j83agx80 bp9cbjyn"},b("React").createElement(b("StoriesSuspenseBucketTransitionView.react"),{animations:c,bucket:z,bucketID:t}),!b("StoriesGating").isComet()&&b("React").createElement("div",{className:"k4urcfbm pmk7jnqg dati1w0a ihqw7lf3 hv4rvrfc jb3vyjys taijpn5t j83agx80 rq0escxv hrjtxlhn bp9cbjyn"},b("React").createElement("div",{className:"stjgntxs ni8dbmo4 teirxh3b"},b("React").createElement(b("CometToastBridge.react"),null))),b("React").createElement(b("StoriesViewerFooter.react"),null,!f&&b("React").createElement(b("StoriesSuspenseFeedback.react"),{LWRAnimations:c,bucket:z})))))));return b("React").createElement(b("StoriesSuspenseNullStateContext").Provider,{value:{setNullStateType:s}},b("React").createElement(b("StoriesLoggerContext").Provider,{value:{logger:q}},b("React").createElement(b("StoriesSuspensePauseContextProvider.react"),null,b("React").createElement(b("StoriesSuspenseContuxContext").Provider,{value:y},b("React").createElement(b("StoriesSuspenseContuxActionsContext").Provider,{value:u},b("React").createElement(b("CometErrorBoundary.react"),{fallback:function(a){var c;return b("React").createElement(b("StoriesBucketError.react"),{bucketID:t,cardID:(c=A)!=null?c:"",error:a})}},d))))))}e.exports=a}),null);
__d("StoriesSuspenseContentPaneRoot.react",["QuickPerformanceLogger","React","StoriesRelay","StoriesActorContext","StoriesQuickLogModule","StoriesSuspensePendingRefetchBucketIDsContext","StoriesSuspenseContentPane.react","WebFunnelLogger","WebPixelRatio","stylex","StoriesSuspenseContentPaneRootQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useQuery,i=b("React").useEffect,j=b("React").useRef,k=b("React").useState;function a(a){__p&&__p();var c=a.bucketID,d=a.initialBucketID,e=a.initialCardID,f=a.traySessionID;a=k(!1);var l=a[0];a=a[1];var m=j(null);l=l&&m.current===c?"network-only":"store-or-network";c=h(g||(g=function(){return b("StoriesSuspenseContentPaneRootQuery.graphql")}),{bucketID:c,initialBucketID:d,scale:b("WebPixelRatio").get()},{fetchPolicy:l});i(function(){var a;new(b("WebFunnelLogger"))("FBStoriesWebTrayViewerV2FunnelDefinition").setSessionKey((a=f)!=null?a:"null").setAction("Viewer Loaded").markEnd().log();b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"viewer loaded")},[f]);d=c==null?void 0:(d=c.initialBucket)==null?void 0:(l=d.unified_stories)==null?void 0:l.edges;l=c==null?void 0:(l=c.initialBucket)==null?void 0:(l=l.first_story_to_show)==null?void 0:l.id;var n=e!=null&&e!==""?e:l;e=d&&n!=null?d.findIndex(function(a){return((a=a.node)==null?void 0:a.id)===n}):-1;l=c==null?void 0:(l=c.viewer)==null?void 0:(d=l.actor)==null?void 0:d.id;if(l===(c==null?void 0:(d=c.bucket)==null?void 0:(d=d.story_bucket_owner)==null?void 0:d.id)){m.current=c==null?void 0:(d=c.bucket)==null?void 0:d.id}return b("React").createElement("div",{className:"kr520xx4 j9ispegn pmk7jnqg stjgntxs ni8dbmo4 taijpn5t n7fi1qx3 j83agx80 i09qtzwb ernmaksk bp9cbjyn"},b("React").createElement(b("StoriesActorContext").Provider,{value:{actorID:l}},b("React").createElement(b("StoriesSuspensePendingRefetchBucketIDsContext").Provider,{value:{setShouldRefetchSelfBucket:a}},b("React").createElement(b("StoriesSuspenseContentPane.react"),{LWRAnimations:c,bucket:c==null?void 0:c.bucket,initialCardIndex:e}))))}e.exports=a}),null);
__d("StoriesSuspenseViewerKeyboardListener.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","React","StoriesSuspenseKeyboardContext","StoriesTestID","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").useCallback,i=b("React").useEffect,j=b("React").useRef,k={wrapper:{height:"datstx6m",width:"k4urcfbm"}},l=g._("View previous story"),m=g._("View previous person's story"),n=g._("View next story"),o=g._("View next person's story"),p=g._("Pause story"),q=g._("Close story");function a(a){__p&&__p();a=a.children;var c=j([]),d=b("React").useMemo(function(){var a=function(a){return{command:a,handler:function(){c.current.forEach(function(b){return b(a)})}}};return[babelHelpers["extends"]({},a({key:b("CometKeys").LEFT}),{description:l}),babelHelpers["extends"]({},a({key:b("CometKeys").LEFT,shift:!0}),{description:m}),babelHelpers["extends"]({},a({key:b("CometKeys").UP}),{description:l}),babelHelpers["extends"]({},a({key:b("CometKeys").UP,shift:!0}),{description:m}),babelHelpers["extends"]({},a({key:b("CometKeys").RIGHT}),{description:n}),babelHelpers["extends"]({},a({key:b("CometKeys").RIGHT,shift:!0}),{description:o}),babelHelpers["extends"]({},a({key:b("CometKeys").DOWN}),{description:n}),babelHelpers["extends"]({},a({key:b("CometKeys").DOWN,shift:!0}),{description:o}),babelHelpers["extends"]({},a({key:b("CometKeys").SPACE}),{description:p}),babelHelpers["extends"]({},a({key:b("CometKeys").ESCAPE}),{description:q,isHiddenCommand:!0,shouldStopPropagation:!1})]},[]),e=j(null);i(function(){window.setTimeout(function(){e.current&&e.current.focus()})},[]);var f=h(function(a){var b=c.current;b.push(a);return function(){var c=b.indexOf(a);c>-1&&b.splice(c,1)}},[c]);return b("React").createElement(b("CometComponentWithKeyCommands.react"),{commandConfigs:d,xstyle:k.wrapper},b("React").createElement(b("StoriesSuspenseKeyboardContext").Provider,{value:{addSubscriber:f}},b("React").createElement("div",{className:b("stylex")(k.wrapper),"data-testid":b("StoriesTestID").KEYBOARD_LAYER,ref:e,tabIndex:-1},a)))}e.exports=a}),null);