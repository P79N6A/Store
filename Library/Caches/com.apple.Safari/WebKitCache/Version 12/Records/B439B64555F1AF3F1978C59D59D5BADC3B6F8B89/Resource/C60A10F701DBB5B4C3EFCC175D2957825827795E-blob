if (self.CavalryLogger) { CavalryLogger.start_js(["SqB6A"]); }

__d("CometVisualCompletionUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBoundingClientRect:function(a,b){if(typeof a.getBoundingClientRect!=="function")return{bottom:0,left:0,right:0,top:0};a=a.getBoundingClientRect();var c=a.top,d=a.left,e=a.bottom;a=a.right;return{bottom:b!=null?b+(e-c):e,left:d,right:a,top:b!=null?b:c}},getPixels:function(a){return(a.right-a.left)*(a.bottom-a.top)},getRectIntersection:function(a,b){return{bottom:Math.max(Math.min(a.bottom,b.bottom),b.top),left:Math.min(Math.max(a.left,b.left),b.right),right:Math.max(Math.min(a.right,b.right),b.left),top:Math.min(Math.max(a.top,b.top),b.bottom)}},getRectangle:function(a,b){a=g.getBoundingClientRect(a);var c=a.top,d=a.left,e=a.bottom;a=a.right;e={bottom:e,left:d,right:a,top:c};return g.getRectIntersection(e,b)},getViewportSize:function(){return{height:window.innerHeight,width:window.innerWidth}},inAboveTheFold:function(a){a=a;var b=g.getViewportSize();a=g.getPixels(g.getRectangle(a,{bottom:b.height,left:0,right:b.width,top:-window.scrollY}));return a>0},offsetTop:function(a,b){__p&&__p();var c=0;a=a;while(a&&a.offsetParent&&typeof a.offsetTop==="number")c+=a.offsetTop,a=a.offsetParent;if(a&&a.offsetParent==null&&typeof a.getBoundingClientRect==="function"){var d=a.getBoundingClientRect();d=d.top;d>=0?c+=d:a===document.body&&(c-=b)}return c},trimHash:function(a){return a!=null&&a!==""?a.split("#")[0]:null}};e.exports=g}),null);
__d("CometVisualChangeObserver",["CometVisualCompletion","CometVisualCompletionUtil","JSScheduler","MutationObserver","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=1,i={attributes:!0,characterData:!0,childList:!0,subtree:!0};function j(a){a=b("performance").getEntriesByName(a);return a.length>0&&a[0].responseEnd}function k(a,c,d){__p&&__p();if(a!=null&&b("CometVisualCompletionUtil").inAboveTheFold(a)){b("CometVisualCompletion").addVisualElement(a,d,c);if(typeof b("performance").getEntriesByName==="function"){d=a.querySelectorAll("img");Array.prototype.forEach.call(d,function(a){__p&&__p();if(a.src==null||a.src===""||a.src.indexOf("http")!==0)return;var c=a.src,d;c.indexOf("#")>=0&&(d=b("CometVisualCompletionUtil").trimHash(c));if(!j(c)&&(d==null||!j(d))){var e=new Image();e.onload=e.onerror=function(){b("JSScheduler").scheduleNormalPriCallback(function(){b("CometVisualCompletion").imageDone(c),e=null})};b("CometVisualCompletion").imageWait(c);e.src=a.src}})}}}var l=0;function m(a){return typeof a.getAttribute!=="function"?!0:!a.getAttribute("data-novc")}var n=function(a,b,c){a.type==="childList"&&a.addedNodes&&a.addedNodes.length?Array.prototype.forEach.call(a.addedNodes,function(a){if(m(a)){var d=c.has(a)?"mutationReplace":"mutationAdd";k(a,b,d)}}):a.type==="attributes"&&(a.attributeName==="style"||a.attributeName==="hidden")&&m(a.target)&&k(a.target,b,"mutationStyleAttribute")};a=function(a){__p&&__p();var c=b("performanceAbsoluteNow")(),d="m_"+l++;b("CometVisualCompletion").holdTrigger(d);b("JSScheduler").scheduleNormalPriCallback(function(){var e=new Set();Array.prototype.forEach.call(a,function(a){a.removedNodes&&a.removedNodes.length&&Array.prototype.forEach.call(a.removedNodes,function(a){e.add(a)})});Array.prototype.forEach.call(a,function(a){n(a,c,e)});b("CometVisualCompletion").resumeTrigger(d)})};var o=new(b("MutationObserver"))(a);c={observe:function(a,c){c===void 0&&(c=!1);var d=h++;g.set(d,a);c||k(a,b("performanceAbsoluteNow")(),"mutationRoot");o.observe(a,i);return function(){g["delete"](d)}},start:function(){g.forEach(function(a){o.observe(a,i)})},stop:function(){__p&&__p();var a=o.takeRecords();if(a&&a.length){var c=b("performanceAbsoluteNow")(),d=new Set();Array.prototype.forEach.call(a,function(a){a.removedNodes&&a.removedNodes.length&&Array.prototype.forEach.call(a.removedNodes,function(a){d.add(a)})});Array.prototype.forEach.call(a,function(a){n(a,c,d)})}o.disconnect()}};e.exports=c}),null);
__d("CometVisualCompletionQPL",["CometInteractionTracingMetrics","CometVisualCompletionQuickLogModule","QuickPerformanceLogger","gkx","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("CometVisualCompletionQuickLogModule").COMET_VISUALLY_COMPLETE_WWW;function h(a){var c=b("CometInteractionTracingMetrics").get(a.traceId);if(c){c.metadata.containsDataFromOtherInteraction&&a.annotations.set("containsDataFromOtherInteraction",1);if(c.subSpans.EventQueued!=null){c=c.subSpans.EventQueued[0];a.markerPoints.set("eventQueueEnd",{timestamp:c.end-c.start})}}}function i(a){b("QuickPerformanceLogger").markerStart(g,0,a)}function j(a,c){h(a),a.markerPoints.forEach(function(c,d){var e=c.timestamp;c=c.data;b("QuickPerformanceLogger").markerPoint(g,d,c&&Object.keys(c).length?JSON.stringify(c):void 0,0,e+a.startTime)}),a.tagSet.forEach(function(a,c){a=Array.from(a);b("QuickPerformanceLogger").annotateMarkerStringArray(g,c,a,0)}),a.annotations.forEach(function(a,c){typeof a==="string"?b("QuickPerformanceLogger").annotateMarkerString(g,c,a,0):typeof a==="number"&&b("QuickPerformanceLogger").annotateMarkerInt(g,c,a,0)}),b("QuickPerformanceLogger").annotateMarkerString(g,"rendering_strategy_selection_implementation",b("gkx")("940313")?"parallel":"serial"),b("QuickPerformanceLogger").markerEnd(g,c,0,a.visuallyComplete+a.startTime)}function k(){b("QuickPerformanceLogger").markerDrop(g,0)}a={drop:function(){k()},logIncompleteVC:function(a){if(!a||a.tracePolicy==null||a.tracePolicy===""){k();return}a.visuallyComplete=b("performanceAbsoluteNow")()-a.startTime;j(a,"CANCEL")},logVC:function(a){a.tracePolicy==null||a.tracePolicy===""||a.visuallyComplete===0?k():j(a,"SUCCESS")},start:function(a){i(a)}};e.exports=a}),null);
__d("CometVisualCompletionTrace",["CometVisualCompletionUtil","VisibilityListener","gkx","performance","performanceAbsoluteNow","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/url\(.*(http.*)\)/gi;function h(a){__p&&__p();var c=b("VisibilityListener").getHiddenTime(a.startTime,a.startTime+a.visuallyComplete);a.annotations.set("hidden",c!=null&&c>0?1:0);a.tracePolicy!=null&&a.tracePolicy!==""&&a.annotations.set("tracePolicy",a.tracePolicy);a.annotations.set("interactionId",a.traceId);a.annotations.set("height",a.viewport.height);a.annotations.set("width",a.viewport.width);a.annotations.set("scrollY",a.scrollY);a.annotations.set("initialScrollY",a.initialScrollY);a.annotations.set("overhead",a.calcLatency);a.annotations.set("navSequence",a.navSequence);a.markerPoints.set("speedIndex",{timestamp:a.speedIndex});a.navSequence===1&&b("performance")&&b("performance").timing&&(b("performance").timing.responseStart&&a.markerPoints.set("TTFB",{timestamp:b("performance").timing.responseStart-a.startTime}));a.elements.length&&(a.vcWithoutImage>0&&a.markerPoints.set("vcWithoutImage",{timestamp:a.vcWithoutImage}),a.scrolledVC>0&&a.markerPoints.set("scrolledVC",{timestamp:a.scrolledVC}))}a=function(){__p&&__p();function a(a,c,d){this.$8=0,this.$9=0,this.$10=0,this.$11=0,this.initialScrollY=0,this.scrolledVC=0,this.$5=new Map(),this.$3=new Map(),this.$1=[],this.$2=[],this.$7=0,this.$12=[],this.$4=a,this.$6=b("CometVisualCompletionUtil").getViewportSize(),this.navSequence=c,this.traceID=d,this.markerPoints=new Map(),this.annotations=new Map(),this.tagSet=new Map(),this.navDone=!1}var c=a.prototype;c.addAnnotation=function(a,b){this.annotations.set(a,b)};c.addMarkerPoint=function(a,b,c){c===void 0&&(c={}),this.markerPoints.set(a,{data:c,timestamp:b-this.$4})};c.addVisualElement=function(a,b,c){this.markerPoints.get("FP")||this.addMarkerPoint("FP",c),this.$12.push([a,c,b])};c.addTag=function(a,b){this.tagSet.has(a)||this.tagSet.set(a,new Set());a=this.tagSet.get(a);a&&a.add(b)};c.calculate=function(){__p&&__p();var a=this;if(!this.$12.length)return null;this.$6=b("CometVisualCompletionUtil").getViewportSize();var c=b("performanceAbsoluteNow")();this.$7=0;this.$9=0;this.$10=0;this.setResourceTimingMap();this.initTree();this.getImages();b("gkx")("679542")&&this.getBackgroundImages();this.$8=this.calculatePaintedPixels(this.$1,this.$6.width*this.$6.height);var d={annotations:this.annotations,bgCheckLatency:this.$10,bgChecked:this.$7,bgNum:0,bgPixels:0,calcLatency:0,compNum:0,compPixels:0,elements:this.$2,imgNum:0,imgPixels:0,initialScrollY:this.initialScrollY,markerPoints:this.markerPoints,navComplete:this.$11,navSequence:this.navSequence,paintedPixels:this.$9,scrollY:window.scrollY,scrolledVC:this.scrolledVC,speedIndex:0,startTime:this.$4,tagSet:this.tagSet,totalPixels:this.$8,traceId:this.traceID,tracePolicy:this.tracePolicy,vcWithoutImage:0,viewport:this.$6,visuallyComplete:0};this.$2.length&&(this.$2=this.$2.sort(function(a,b){return b.latency-a.latency}),d.visuallyComplete=this.$2[0].latency,this.$2.forEach(function(b){__p&&__p();d.vcWithoutImage===0&&b.type==="component"&&(d.vcWithoutImage=b.latency);d.speedIndex+=b.pixels/a.$9*b.latency;switch(b.type){case"component":d.compNum++;d.compPixels+=b.pixels;break;case"img":d.imgNum++;d.imgPixels+=b.pixels;break;case"bg":d.bgNum++;d.bgPixels+=b.pixels;break}}));d.calcLatency=b("performanceAbsoluteNow")()-c;h(d);return d};c.findParent=function(a){a=a.parentElement;while(a){var b=a.getAttribute("data-veid");if(b!=null&&b!==""&&this.$3.has(b))return this.$3.get(b);a=a.parentElement}return null};c.getBackgroundImages=function(){__p&&__p();var c=this,d=b("performanceAbsoluteNow")();this.$1.forEach(function(d){__p&&__p();d=d.element.querySelectorAll(":not(img)");Array.prototype.forEach.call(d,function(d){__p&&__p();var e=c.findParent(d);if(!e)return;var f=b("CometVisualCompletionUtil").offsetTop(d,c.initialScrollY),g=b("CometVisualCompletionUtil").getBoundingClientRect(d,f);g=b("CometVisualCompletionUtil").getRectIntersection(g,e.rectangle);var h=b("CometVisualCompletionUtil").getPixels(g);if(!h)return;if(f>c.$6.height)return;var i=b("CometVisualCompletionUtil").trimHash(c.getStyleBackground(d));if(i!=null&&i!==""&&c.$5.has(i)){d={children:[],element:d,latency:c.$5.get(i)+b("performanceNavigationStart")()-c.$4,mutationType:"bg",offsetTop:f,parent:e,pixels:h,rectangle:g,timestamp:c.$5.get(i)+b("performanceNavigationStart")(),type:"bg",url:i,veid:String(a.$13++)};e.children.push(d)}})});this.$10=b("performanceAbsoluteNow")()-d};c.getImages=function(){__p&&__p();var c=this,d=document.querySelectorAll("img");Array.prototype.forEach.call(d,function(d){__p&&__p();if(typeof d.currentSrc!=="string"||d.currentSrc==="")return;var e=c.findParent(d);if(!e)return;var f=b("CometVisualCompletionUtil").offsetTop(d,c.initialScrollY),g=b("CometVisualCompletionUtil").getBoundingClientRect(d,f);g=b("CometVisualCompletionUtil").getRectIntersection(g,e.rectangle);if(d.parentElement){var h=b("CometVisualCompletionUtil").getBoundingClientRect(d.parentElement,b("CometVisualCompletionUtil").offsetTop(d.parentElement,c.initialScrollY));g=b("CometVisualCompletionUtil").getRectIntersection(g,b("CometVisualCompletionUtil").getRectIntersection(h,e.rectangle))}h=b("CometVisualCompletionUtil").getPixels(g);if(!h)return;if(f>c.$6.height)return;var i=d.currentSrc;i=b("CometVisualCompletionUtil").trimHash(i);if(i!=null&&i!==""&&c.$5.has(i)){d={children:[],element:d,latency:c.$5.get(i)+b("performanceNavigationStart")()-c.$4,mutationType:"img",offsetTop:f,parent:e,pixels:h,rectangle:g,timestamp:c.$5.get(i)+b("performanceNavigationStart")(),type:"img",url:i,veid:String(a.$13++)};e.children.push(d)}})};c.getStyleBackground=function(a){__p&&__p();if(typeof window.getComputedStyle!=="function")return null;this.$7++;a=window.getComputedStyle(a);var b=a["background-image"];if(a.visibility!=="hidden"&&b&&b!=="none"){g.lastIndex=0;a=g.exec(b);if(a&&a.length>1)return a[1].replace('"',"")}return null};c.initTree=function(){__p&&__p();var c=this,d={bottom:this.$6.height,left:0,right:this.$6.width,top:-this.initialScrollY};this.$12.forEach(function(e){__p&&__p();var f=e[0],g=e[1];e=e[2];var h=b("CometVisualCompletionUtil").offsetTop(f,c.initialScrollY),i=b("CometVisualCompletionUtil").getBoundingClientRect(f);i.bottom=h+(i.bottom-i.top);i.top=h;i=b("CometVisualCompletionUtil").getRectIntersection(i,d);if(b("CometVisualCompletionUtil").inAboveTheFold(f)){c.scrolledVC=Math.max(c.scrolledVC,g-c.$4);if(h>c.$6.height)return;e={children:[],element:f,latency:g-c.$4,mutationType:e,offsetTop:h,parent:null,pixels:b("CometVisualCompletionUtil").getPixels(i),rectangle:i,timestamp:g,type:"component",veid:String(a.$13++)};h=f.getAttribute("data-veid");h!=null&&h!==""&&c.$3["delete"](h);f.setAttribute("data-veid",e.veid);c.$3.set(e.veid,e)}});this.$3.forEach(function(a){var d=c.findParent(a.element);d?(a.rectangle=b("CometVisualCompletionUtil").getRectIntersection(a.rectangle,d.rectangle),a.pixels=b("CometVisualCompletionUtil").getPixels(a.rectangle),d.children.push(a),a.parent=d):c.$1.push(a)})};c.setResourceTimingMap=function(){var a=this;if(typeof b("performance").getEntriesByType==="function"){var c=b("performance").getEntriesByType("resource");c.forEach(function(c){var d=b("CometVisualCompletionUtil").trimHash(c.name);d!=null&&d!==""&&a.$5.set(d,c.responseEnd)})}};c.calculatePaintedPixels=function(a,b){var c=this,d=b,e=0;a.sort(function(a,b){return b.timestamp-a.timestamp}).forEach(function(a){a.pixels=Math.min(d,a.pixels),e+=a.pixels,d-=a.pixels,a.pixels-=c.calculatePaintedPixels(a.children,a.pixels),a.timestamp>c.$4&&(a.type!=="component"&&a.parent&&a.parent.timestamp>a.timestamp&&(a.latency=a.parent.latency),c.$9+=a.pixels,c.$2.push(a))});return e};c.inOriginalViewport=function(a){return b("CometVisualCompletionUtil").inAboveTheFold(a)&&b("CometVisualCompletionUtil").offsetTop(a,this.initialScrollY)<=this.$6.height};c.setInitialScrollY=function(a){this.initialScrollY=a};c.setNavCompleteTime=function(a){this.$11=a,this.navDone=!0};c.setTracePolicy=function(a){this.tracePolicy=a};return a}();a.$13=1;e.exports=a}),null);
__d("CometVisualCompletion",["CometInteractionTracingMetrics","CometVisualChangeObserver","CometVisualCompletionConstants","CometVisualCompletionQPL","CometVisualCompletionTrace","CometVisualCompletionUtil","IntersectionObserver","JSTracing","intersectionObserverEntryIsIntersecting","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=0,h=new Set(),i=new Map(),j=new Set(),k=null,l=new Map(),m,n=[];function o(){n.forEach(function(a){a(m)}),q.logQPL()}function p(){if(k==null||m||h.size>0||i.size>0||j.size>0)return;b("CometVisualChangeObserver").stop();m=k.calculate();o()}var q={addAnnotation:function(a,b){k!=null&&k.addAnnotation(a,b)},addMarkerPoint:function(a,c,d){c===void 0&&(c=b("performanceAbsoluteNow")()),d===void 0&&(d={}),k!=null&&c!=null&&c>0&&k.addMarkerPoint(a,c,d)},addRenderingInfo:function(a,c,d){__p&&__p();if(k!=null&&m==null&&a!=null){var e=[],f=b("JSTracing").getCurrent();f&&f.size&&f.forEach(function(a){a=b("CometInteractionTracingMetrics").get(a.name);e.push(a?a.type:"UNKNOWN")});f=k.inOriginalViewport(a)?1:0;a=b("performanceAbsoluteNow")();var g={interaction:e.join(","),visible:f};d!=null&&(g.position=d);(d==null||d<10)&&q.addMarkerPoint("Render_"+c+(d!=null?"_"+d:""),a,g);f===1&&(d!=null&&q.addMarkerPoint("Render_"+c+"_LastVisible",a,g),q.addMarkerPoint("LastVisibleRender",a,babelHelpers["extends"]({},g,{name:c})))}},addSSRRootElement:function(a,c){q.addVisualElement(a,"ssrRoot",c);c=a.querySelectorAll("["+b("CometVisualCompletionConstants").LOADING_ELEMENT_ATTR+"]");Array.prototype.forEach.call(c,function(a){q.inAboveTheFold(a)&&q.waitOnLoadingElement(a)})},addTag:function(a,b){k!=null&&k.addTag(a,b)},addTracedInteraction:function(a,c,d){__p&&__p();var e=1,f=null;l.get(a)&&(e=l.get(a)+1);l.set(a,e);if(k!=null){k.addAnnotation("count_"+a,e);if(e>10)return function(){};f=k.traceID;k.addMarkerPoint(a+"_"+e+"_start",b("performanceAbsoluteNow")(),{interactionId:c,qplEvent:d})}return function(){k!=null&&k.traceID===f&&k.addMarkerPoint(a+"_"+e+"_end",b("performanceAbsoluteNow")(),{interactionId:c,qplEvent:d})}},addVisualElement:function(a,c,d){d===void 0&&(d=b("performanceAbsoluteNow")()),k!=null&&a!=null&&k.addVisualElement(a,c,d)},dumpWaits:function(){return[h,new Set(i.keys()),j]},getReport:function(){return m},holdTrigger:function(a){h.add(a);return function(){q.resumeTrigger(a)}},imageDone:function(a){if(!j.has(a))return;j["delete"](a);p()},imageWait:function(a){j.add(a)},inAboveTheFold:function(a){return b("CometVisualCompletionUtil").inAboveTheFold(a)},loadingElementDone:function(a){var b=i.get(a);if(b==null)return;i["delete"](a);p()},logQPL:function(){m&&b("CometVisualCompletionQPL").logVC(m)},resumeTrigger:function(a){if(!h.has(a))return;h["delete"](a);p()},setInitialScrollY:function(a){k!=null&&k.setInitialScrollY(a)},setRoute:function(a){k!=null&&a!=null&&k.setTracePolicy(a)},subscribe:function(a){n.push(a)},traceNavigation:function(a,c){__p&&__p();var d=null;if(k!=null&&m==null){d=k.traceID;k.addAnnotation("incompleteWaitCount",h.size);k.addAnnotation("incompleteLoadingElementsCount",i.size);k.addAnnotation("incompleteImageCount",j.size);k.addAnnotation("incomplete",1);var e=k.calculate();b("CometVisualCompletionQPL").logIncompleteVC(e)}b("CometVisualCompletionQPL").start(c);k=new(b("CometVisualCompletionTrace"))(c,++g,a);d!=null&&k.addAnnotation("incompletePreviousTrace",d);m=null;l.clear();h.clear();i.clear();j.clear();q.holdTrigger(a);e=function(b){k!=null&&a===k.traceID&&(b.completed!=null&&k.setNavCompleteTime(b.completed-b.start),q.resumeTrigger(a))};o();return e},unsubscribe:function(a){n=n.filter(function(b){return b!==a})},waitOnLoadingElement:function(a){__p&&__p();var c=i.get(a);if(c!=null)return c;c=function(c,d){Array.prototype.forEach.call(c,function(c){b("intersectionObserverEntryIsIntersecting")(c)||(d.disconnect(),q.loadingElementDone(a))})};var d=new(b("IntersectionObserver"))(c);d.observe(a);c=function(){d.disconnect(),q.loadingElementDone(a)};i.set(a,c);return c}};e.exports=q}),null);